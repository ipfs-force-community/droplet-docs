(window.webpackJsonp=window.webpackJsonp||[]).push([[20],{402:function(e,t,a){"use strict";a.r(t);var s=a(17),n=Object(s.a)({},(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[a("h1",{attrs:{id:"getting-started"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#getting-started"}},[e._v("#")]),e._v(" Getting Started")]),e._v(" "),a("h2",{attrs:{id:"overview"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#overview"}},[e._v("#")]),e._v(" Overview")]),e._v(" "),a("p",[a("code",[e._v("droplet")]),e._v(" is the market service component in the "),a("code",[e._v("venus")]),e._v(" system, which consists of two parts: "),a("code",[e._v("droplet")]),e._v(" and "),a("code",[e._v("droplet-client")]),e._v(", commonly understood as market server and client.")]),e._v(" "),a("ul",[a("li",[a("p",[a("code",[e._v("droplet")]),e._v(" serves storage providers;")])]),e._v(" "),a("li",[a("p",[a("code",[e._v("droplet-client")]),e._v(" serves users who have retrieval or storage demands.")])])]),e._v(" "),a("p",[e._v("The market service of "),a("code",[e._v("droplet")]),e._v(" is divided into storage market and retrieval market, and its general process is as follows:")]),e._v(" "),a("p",[e._v("Storage process:")]),e._v(" "),a("table",[a("thead",[a("tr",[a("th",[e._v("Stages")]),e._v(" "),a("th",[e._v("Steps")]),e._v(" "),a("th",[e._v("Instructions")])])]),e._v(" "),a("tbody",[a("tr",[a("td",[e._v("Start "),a("code",[e._v("droplet")]),e._v(" and "),a("code",[e._v("droplet-client")])]),e._v(" "),a("td",[e._v("1. Configure and start [droplet](#Configure and Start droplet) "),a("br"),e._v(" 2. Configure and start [droplet-client](#Configure and Start droplet-client)")]),e._v(" "),a("td")]),e._v(" "),a("tr",[a("td",[e._v("Proxy "),a("code",[e._v("libp2p")]),e._v(" listener service for "),a("code",[e._v("miners")])]),e._v(" "),a("td",[e._v("via "),a("code",[e._v("droplet")]),e._v(" ["),a("code",[e._v("libp2p")]),e._v(" listener service for "),a("code",[e._v("miners")]),e._v("](#droplet proxy libp2p listener)")]),e._v(" "),a("td")]),e._v(" "),a("tr",[a("td",[e._v("Post storage ask for "),a("code",[e._v("miners")])]),e._v(" "),a("td",[e._v("via "),a("code",[e._v("droplet")]),e._v(" "),a("a",{attrs:{href:"#ask"}},[e._v("ask")])]),e._v(" "),a("td")]),e._v(" "),a("tr",[a("td",[e._v("Specify "),a("code",[e._v("miner")]),e._v(" to propose deal")]),e._v(" "),a("td",[e._v("1. Through "),a("code",[e._v("droplet-client")]),e._v(" [import the data to be stored](#import the data to be stored) "),a("br"),e._v(" 2. According to the demand [select the appropriate storage provider](#select the storage provider) < br> 3. [Initiate storage deal](#Initiate storage deal)")]),e._v(" "),a("td",[e._v("After the deal is issued, it takes a certain amount of time to execute the deal transaction process. After the deal is confirmed, the storage provider seal the data in the deal and submits the certificate. "),a("code",[e._v("droplet")]),e._v(" will be responsible for tracking order status.")])])])]),e._v(" "),a("p",[e._v("Retrieval process:")]),e._v(" "),a("table",[a("thead",[a("tr",[a("th",[e._v("Stages")]),e._v(" "),a("th",[e._v("Steps")]),e._v(" "),a("th",[e._v("Instructions")])])]),e._v(" "),a("tbody",[a("tr",[a("td",[e._v("Start "),a("code",[e._v("droplet")]),e._v(" and "),a("code",[e._v("droplet-client")])]),e._v(" "),a("td",[e._v("1. Configure and start [droplet](#Configure and Start droplet) "),a("br"),e._v(" 2. Configure and start [droplet-client](#Configure and Start droplet-client)")]),e._v(" "),a("td")]),e._v(" "),a("tr",[a("td",[e._v("Set retrieval price and payment address")]),e._v(" "),a("td",[e._v("Storage provider through "),a("code",[e._v("droplet")]),e._v(" [set search pending order] (#retrieve pending order)")]),e._v(" "),a("td")]),e._v(" "),a("tr",[a("td",[e._v("Submit data retrieval request")]),e._v(" "),a("td",[e._v("[Submit data retrieval request] (#submit data retrieval request)")]),e._v(" "),a("td",[e._v("After submitting the data retrieval request, the search communication process will start, and the data will be returned in batches according to the agreement and fees will be transferred to the receiving address.")])])])]),e._v(" "),a("p",[e._v("üíÅ "),a("strong",[e._v("Whether it is a storage deal or a retrieval request, the execution process of the protocol is automatic, and messages will be sent to the chain during the period, so it is necessary to ensure that the messages of both parties to the transaction can be signed normally. There is a necessary "),a("code",[e._v("fil")]),e._v(" transfer in the transaction process, and the relevant address needs to have sufficient balance, otherwise the transaction will not be completed.")])]),e._v(" "),a("h2",{attrs:{id:"configure-and-start-droplet"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#configure-and-start-droplet"}},[e._v("#")]),e._v(" Configure and Start droplet")]),e._v(" "),a("h3",{attrs:{id:"initialization"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#initialization"}},[e._v("#")]),e._v(" Initialization")]),e._v(" "),a("ul",[a("li",[e._v("On-chain mode")])]),e._v(" "),a("p",[e._v("As a component of the chain service, it cooperates with "),a("code",[e._v("sophon-auth")]),e._v(", "),a("code",[e._v("venus")]),e._v(", "),a("code",[e._v("sophon-messager")]),e._v(", "),a("code",[e._v("sophon-gateway")]),e._v(" and other components to provide market services for the "),a("code",[e._v("miner")]),e._v(" registered to the chain service.")]),e._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v('./droplet run \\\n--node-url=/ip4/<ip>/tcp/<port> \\\n--auth-url=http://<ip>:<port>\\\n--gateway-url=/ip4/<ip>/tcp/<port> \\\n--messager-url=/ip4/<ip>/tcp/<port> \\\n--cs-token=<shared-token> \\\n--signer-type="gateway"\n')])])]),a("p",[e._v("Generated droplet service component configuration reference:")]),e._v(" "),a("div",{staticClass:"language-toml extra-class"},[a("pre",{pre:!0,attrs:{class:"language-toml"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("[")]),a("span",{pre:!0,attrs:{class:"token table class-name"}},[e._v("Node")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("]")]),e._v("\n   "),a("span",{pre:!0,attrs:{class:"token key property"}},[e._v("Url")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("=")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[e._v('"/ip4/192.168.200.151/tcp/3455"')]),e._v("\n   "),a("span",{pre:!0,attrs:{class:"token key property"}},[e._v("Token")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("=")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[e._v('"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJuYW1lIjoic2hhcmVkLXRva2VuIiwicGVybSI6ImFkbWluIiwiZXh0IjoiIn0.aARqJ_7FSe1KakkBhWlFvsYm-xBLAXBnl9SvTfqsVe8"')]),e._v("\n\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("[")]),a("span",{pre:!0,attrs:{class:"token table class-name"}},[e._v("Messager")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("]")]),e._v("\n   "),a("span",{pre:!0,attrs:{class:"token key property"}},[e._v("Url")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("=")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[e._v('"/ip4/127.0.0.1/tcp/39812"')]),e._v("\n   "),a("span",{pre:!0,attrs:{class:"token key property"}},[e._v("Token")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("=")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[e._v('"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJuYW1lIjoic2hhcmVkLXRva2VuIiwicGVybSI6ImFkbWluIiwiZXh0IjoiIn0.aARqJ_7FSe1KakkBhWlFvsYm-xBLAXBnl9SvTfqsVe8"')]),e._v("\n\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("[")]),a("span",{pre:!0,attrs:{class:"token table class-name"}},[e._v("Signer")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("]")]),e._v("\n   "),a("span",{pre:!0,attrs:{class:"token key property"}},[e._v("Type")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("=")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[e._v('"gateway"')]),e._v("\n   "),a("span",{pre:!0,attrs:{class:"token key property"}},[e._v("Url")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("=")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[e._v('"/ip4/127.0.0.1/tcp/45132"')]),e._v("\n   "),a("span",{pre:!0,attrs:{class:"token key property"}},[e._v("Token")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("=")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[e._v('"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJuYW1lIjoic2hhcmVkLXRva2VuIiwicGVybSI6ImFkbWluIiwiZXh0IjoiIn0.aARqJ_7FSe1KakkBhWlFvsYm-xBLAXBnl9SvTfqsVe8"')]),e._v("\n\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("[")]),a("span",{pre:!0,attrs:{class:"token table class-name"}},[e._v("AuthNode")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("]")]),e._v("\n   "),a("span",{pre:!0,attrs:{class:"token key property"}},[e._v("Url")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("=")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[e._v('"http://127.0.0.1:8989"')]),e._v("\n   "),a("span",{pre:!0,attrs:{class:"token key property"}},[e._v("Token")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("=")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[e._v('"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJuYW1lIjoic2hhcmVkLXRva2VuIiwicGVybSI6ImFkbWluIiwiZXh0IjoiIn0.aARqJ_7FSe1KakkBhWlFvsYm-xBLAXBnl9SvTfqsVe8"')]),e._v("\n")])])]),a("p",[e._v("üíÅ *"),a("em",[a("code",[e._v("shared-token")]),e._v(" is used to authentication when accessing "),a("code",[e._v("API")]),e._v(" of other chain service components. "),a("code",[e._v("token")]),e._v(" is managed by "),a("code",[e._v("sophon-auth")]),e._v(" and requires "),a("code",[e._v("admin")]),e._v(" permission. For details, please refer to "),a("a",{attrs:{href:"https://sophon.venus-fil.io/intro/join-a-cs.html#for-admins-of-shared-modules",target:"_blank",rel:"noopener noreferrer"}},[e._v("sophon-auth token"),a("OutboundLink")],1)]),e._v(" *")]),e._v(" "),a("ul",[a("li",[e._v("Off-chain mode")])]),e._v(" "),a("p",[e._v("To start with "),a("code",[e._v("lotus fullnode")]),e._v(":")]),e._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v('./droplet run \\\n--node-url=/ip4/<ip>/tcp/<port> \\\n--cs-token=<token of lotus> \\\n--signer-type="lotusnode"\n')])])]),a("p",[e._v("Generated droplet service component configuration reference:")]),e._v(" "),a("div",{staticClass:"language-toml extra-class"},[a("pre",{pre:!0,attrs:{class:"language-toml"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("[")]),a("span",{pre:!0,attrs:{class:"token table class-name"}},[e._v("Node")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("]")]),e._v("\n   "),a("span",{pre:!0,attrs:{class:"token key property"}},[e._v("Url")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("=")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[e._v('"/ip4/127.0.0.1/tcp/1234"')]),e._v("\n   "),a("span",{pre:!0,attrs:{class:"token key property"}},[e._v("Token")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("=")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[e._v('"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJBbGxvdyI6WyJyZWFkIiwid3JpdGUiLCJzaWduIiwiYWRtaW4iXX0.Ne3JsfHHhN6BgDtdsvLYfUaRC3eJPH_7KrBsMRBdplc"')]),e._v("\n\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("[")]),a("span",{pre:!0,attrs:{class:"token table class-name"}},[e._v("Messager")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("]")]),e._v("\n   "),a("span",{pre:!0,attrs:{class:"token key property"}},[e._v("Url")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("=")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[e._v('""')]),e._v("\n   "),a("span",{pre:!0,attrs:{class:"token key property"}},[e._v("Token")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("=")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[e._v('""')]),e._v("\n\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("[")]),a("span",{pre:!0,attrs:{class:"token table class-name"}},[e._v("Signer")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("]")]),e._v("\n   "),a("span",{pre:!0,attrs:{class:"token key property"}},[e._v("Type")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("=")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[e._v('"lotusnode"')]),e._v("\n   "),a("span",{pre:!0,attrs:{class:"token key property"}},[e._v("Url")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("=")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[e._v('"/ip4/127.0.0.1/tcp/1234"')]),e._v("\n   "),a("span",{pre:!0,attrs:{class:"token key property"}},[e._v("Token")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("=")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[e._v('"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJBbGxvdyI6WyJyZWFkIiwid3JpdGUiLCJzaWduIiwiYWRtaW4iXX0.Ne3JsfHHhN6BgDtdsvLYfUaRC3eJPH_7KrBsMRBdplc"')]),e._v("\n\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("[")]),a("span",{pre:!0,attrs:{class:"token table class-name"}},[e._v("AuthNode")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("]")]),e._v("\n   "),a("span",{pre:!0,attrs:{class:"token key property"}},[e._v("Url")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("=")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[e._v('""')]),e._v("\n   "),a("span",{pre:!0,attrs:{class:"token key property"}},[e._v("Token")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("=")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[e._v('""')]),e._v("\n")])])]),a("p",[e._v("When using chain service "),a("strong",[e._v("and")]),e._v(" "),a("code",[e._v("venus-wallet")]),e._v(":")]),e._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v('./droplet run \\\n--auth-url=http://<ip>:<port>\\\n--node-url=/ip4/<ip>/tcp/<port> \\\n--messager-url=/ip4/<ip>/tcp/<port> \\\n--cs-token=<token of write-authority> \\\n--signer-url=/ip4/<ip>/tcp/<port> \\\n--signer-token=<token of venus-wallet> \\\n--signer-type="wallet"\n')])])]),a("p",[e._v("Generated droplet service component configuration reference:")]),e._v(" "),a("div",{staticClass:"language-toml extra-class"},[a("pre",{pre:!0,attrs:{class:"language-toml"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("[")]),a("span",{pre:!0,attrs:{class:"token table class-name"}},[e._v("Node")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("]")]),e._v("\n   "),a("span",{pre:!0,attrs:{class:"token key property"}},[e._v("Url")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("=")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[e._v('"/ip4/192.168.200.151/tcp/3455"')]),e._v("\n   "),a("span",{pre:!0,attrs:{class:"token key property"}},[e._v("Token")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("=")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[e._v('"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJuYW1lIjoic2hhcmVkLXRva2VuIiwicGVybSI6ImFkbWluIiwiZXh0IjoiIn0.aARqJ_7FSe1KakkBhWlFvsYm-xBLAXBnl9SvTfqsVe8"')]),e._v("\n\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("[")]),a("span",{pre:!0,attrs:{class:"token table class-name"}},[e._v("Messager")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("]")]),e._v("\n   "),a("span",{pre:!0,attrs:{class:"token key property"}},[e._v("Url")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("=")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[e._v('"/ip4/127.0.0.1/tcp/39812"')]),e._v("\n   "),a("span",{pre:!0,attrs:{class:"token key property"}},[e._v("Token")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("=")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[e._v('"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJuYW1lIjoic2hhcmVkLXRva2VuIiwicGVybSI6ImFkbWluIiwiZXh0IjoiIn0.aARqJ_7FSe1KakkBhWlFvsYm-xBLAXBnl9SvTfqsVe8"')]),e._v("\n\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("[")]),a("span",{pre:!0,attrs:{class:"token table class-name"}},[e._v("Signer")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("]")]),e._v("\n   "),a("span",{pre:!0,attrs:{class:"token key property"}},[e._v("Type")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("=")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[e._v('"wallet"')]),e._v("\n   "),a("span",{pre:!0,attrs:{class:"token key property"}},[e._v("Url")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("=")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[e._v('"/ip4/127.0.0.1/tcp/5678/http"')]),e._v("\n   "),a("span",{pre:!0,attrs:{class:"token key property"}},[e._v("Token")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("=")]),e._v(' "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9'),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(".")]),e._v("eyJBbGxvdyI6WyJyZWFkIiwid3JpdGUiLCJzaWduIl19"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(".")]),e._v('IVBGlmRW__6g4QGbb1D1Jtr1oy\n   MM6Sqs1tj1GDGR5EQ"\n\n'),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("[")]),a("span",{pre:!0,attrs:{class:"token table class-name"}},[e._v("AuthNode")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("]")]),e._v("\n   "),a("span",{pre:!0,attrs:{class:"token key property"}},[e._v("Url")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("=")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[e._v('"http://127.0.0.1:8989"')]),e._v("\n   "),a("span",{pre:!0,attrs:{class:"token key property"}},[e._v("Token")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("=")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[e._v('"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJuYW1lIjoic2hhcmVkLXRva2VuIiwicGVybSI6ImFkbWluIiwiZXh0IjoiIn0.aARqJ_7FSe1KakkBhWlFvsYm-xBLAXBnl9SvTfqsVe8"')]),e._v("\n")])])]),a("p",[e._v("üíÅ "),a("strong",[e._v("If signature uses an independent "),a("code",[e._v("venus-wallet")]),e._v(" component, then configure it as the listening address of "),a("code",[e._v("venus-wallet")]),e._v(" and a "),a("code",[e._v("token")]),e._v(" with signing permission.")])]),e._v(" "),a("p",[e._v("To generate "),a("code",[e._v("venus-wallet")]),e._v(" "),a("code",[e._v("token")]),e._v(" with signing permission:")]),e._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[e._v("$ ./venus-wallet auth api-info --perm"),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v("=")]),e._v("sign\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v(">")]),e._v(" eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJBbGxvdyI6WyJyZWFkIiwid3JpdGUiLCJzaWduIl19.Vr-OP7RNOozf6XXZuahpk-ZGA7IDa5NJjmU9L_znJ-0:/ip4/127.0/567/tcp\n")])])]),a("p",[e._v("üíÅ **After the initialization command is successfully executed, "),a("code",[e._v("droplet repo")]),e._v(" will be generated, and it needs to be configured according to the actual environment when using it. **")]),e._v(" "),a("p",[e._v("Configuration options will be generated when "),a("code",[e._v("droplet")]),e._v(" starts for the first time. The default directory is: "),a("code",[e._v("~/.droplet/config.toml")]),e._v(". Next, we will introduce common configuration options.")]),e._v(" "),a("h3",{attrs:{id:"general-configuration"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#general-configuration"}},[e._v("#")]),e._v(" General Configuration")]),e._v(" "),a("p",[e._v("For the description of configuration items of "),a("code",[e._v("venus-wallet")]),e._v(", please refer to "),a("a",{attrs:{href:"https://github.com/ipfs-force-community/droplet/blob/master/docs/zh/droplet%E9%85%8D%E7%BD%AE%E8%A7%A3%E9%87%8A.md",target:"_blank",rel:"noopener noreferrer"}},[e._v("droplet configuration"),a("OutboundLink")],1),e._v(", here we explain the more commonly used configuration items.")]),e._v(" "),a("p",[a("em",[e._v("tips:")]),e._v(" After modifying the configuration file, you need to restart the "),a("code",[e._v("droplet")]),e._v(" service:")]),e._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[e._v("$ "),a("span",{pre:!0,attrs:{class:"token function"}},[e._v("nohup")]),e._v(" ./droplet run "),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v(">")]),e._v(" droplet.log "),a("span",{pre:!0,attrs:{class:"token operator"}},[a("span",{pre:!0,attrs:{class:"token file-descriptor important"}},[e._v("2")]),e._v(">")]),a("span",{pre:!0,attrs:{class:"token file-descriptor important"}},[e._v("&1")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v("&")]),e._v("\n")])])]),a("blockquote",[a("p",[e._v("After the "),a("code",[e._v("repo")]),e._v(" has been generated, the parameters required for initialization are written into the configuration file, so there is no need to add them for subsequent startups.")])]),e._v(" "),a("h4",{attrs:{id:"chain-service-configuration"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#chain-service-configuration"}},[e._v("#")]),e._v(" Chain service configuration")]),e._v(" "),a("ul",[a("li",[e._v("Including: chain synchronization node, message node, signature node and authentication node.")])]),e._v(" "),a("div",{staticClass:"language-yuml extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v('[Node]\n   Url = "/ip4/192.168.200.21/tcp/3453"\n   Token = "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJuYW1lIjoiemwiLCJwZXJtIjoiYWRtaW4iLCJleHQiOiIifQ.3u-PInSUmX-8f6Z971M7JBCHYgFVQrvwUjJfFY03ouQ"\n[Messager]\n   Url = "/ip4/192.168.200.21/tcp/39812"\n   Token = "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJuYW1lIjoiemwiLCJwZXJtIjoiYWRtaW4iLCJleHQiOiIifQ.3u-PInSUmX-8f6Z971M7JBCHYgFVQrvwUjJfFY03ouQ"\n[Signer]\n   Type = "gateway"\n   Url = "/ip4/192.168.200.21/tcp/45132"\n   Token = "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJuYW1lIjoiemwiLCJwZXJtIjoiYWRtaW4iLCJleHQiOiIifQ.3u-PInSUmX-8f6Z971M7JBCHYgFVQrvwUjJfFY03ouQ"\n[AuthNode]\n   Url = "http://192.168.200.21:8989"\n   Token = "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJuYW1lIjoiemwiLCJwZXJtIjoiYWRtaW4iLCJleHQiOiIifQ.3u-PInSUmX-8f6Z971M7JBCHYgFVQrvwUjJfFY03ouQ"\n')])])]),a("h4",{attrs:{id:"api-listener-configuration"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#api-listener-configuration"}},[e._v("#")]),e._v(" "),a("code",[e._v("API")]),e._v(" listener configuration")]),e._v(" "),a("p",[e._v("The default listening port of "),a("code",[e._v("droplet")]),e._v(" is "),a("code",[e._v("127.0.0.1:41235")]),e._v(", in order to support access requests from different networks, the listening address of "),a("code",[e._v("API")]),e._v(" needs to be modified:")]),e._v(" "),a("div",{staticClass:"language-yuml extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v('[API]\nListenAddress = "/ip4/0.0.0.0/tcp/41235"\n')])])]),a("h4",{attrs:{id:"publishmsgperiod-configuration"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#publishmsgperiod-configuration"}},[e._v("#")]),e._v(" "),a("code",[e._v("PublishMsgPeriod")]),e._v(" configuration")]),e._v(" "),a("p",[e._v("When "),a("code",[e._v("droplet")]),e._v(" receives a deal from "),a("code",[e._v("droplet-client")]),e._v(", it will not publish the "),a("code",[e._v("ClientDealProposal")]),e._v(" message immediately, but will wait for a certain period of time, which is controlled by the "),a("code",[e._v("PublishMsgPeriod")]),e._v(" option in the configuration file, which can be used during testing Setting this to a small value reduces waiting time. The following settings, set the wait time to 10 seconds.")]),e._v(" "),a("div",{staticClass:"language-yuml extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v('PublishMsgPeriod = "10s"\n')])])]),a("h4",{attrs:{id:"piecestorage-configuration"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#piecestorage-configuration"}},[e._v("#")]),e._v(" "),a("code",[e._v("PieceStorage")]),e._v(" Configuration")]),e._v(" "),a("p",[e._v("Currently "),a("code",[e._v("droplet")]),e._v(" supports two storage modes for "),a("code",[e._v("Piece")]),e._v(" data:")]),e._v(" "),a("ul",[a("li",[e._v("File system")]),e._v(" "),a("li",[e._v("Object storage")])]),e._v(" "),a("div",{staticClass:"language-yuml extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v('[Piece Storage]\n   [[PieceStorage. Fs]]\n     Name = "local"\n     Enable = true\n     Path = "/mnt/pieces"\n   [[PieceStorage.S3]]\n     Name = "oss"\n     Enable = false\n     EndPoint = ""\n     AccessKey = ""\n     SecretKey = ""\n     Token = ""\n')])])]),a("p",[e._v("It can also be configured by command:")]),e._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[e._v("# Local file system storage")]),e._v("\n./droplet piece-storage add-fs --path"),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[e._v('"/piece/storage/path"')]),e._v(" --name"),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[e._v('"local"')]),e._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[e._v("# object storage")]),e._v("\n./droplet piece-storage add-s3 --endpoint"),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v("=")]),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v("<")]),e._v("url"),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v(">")]),e._v(" --name"),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[e._v('"oss"')]),e._v("\n")])])]),a("h4",{attrs:{id:"miners-configuration"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#miners-configuration"}},[e._v("#")]),e._v(" "),a("code",[e._v("Miners")]),e._v(" Configuration")]),e._v(" "),a("p",[e._v("The miners of the "),a("code",[e._v("droplet")]),e._v(" service and the parameters of each miner are configured as follows:")]),e._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v('[[Miners]]\n   Addr = "f01000"\n   Account = "testuser01"\n  \n   ConsiderOnlineStorageDeals = true\n   Consider OfflineStorageDeals = true\n   ConsiderOnlineRetrievalDeals = true\n   ConsiderOfflineRetrievalDeals = true\n   ConsiderVerifiedStorageDeals = true\n   ConsiderUnverifiedStorageDeals = true\n   PieceCidBlocklist = []\n   ExpectedSealDuration = "24h0m0s"\n   MaxDealStartDelay = "336h0m0s"\n   PublishMsgPeriod = "1h0m0s"\n   MaxDealsPerPublishMsg = 8\n   MaxProviderCollateralMultiplier = 2\n   Filter = ""\n   RetrievalFilter = ""\n   TransferPath = ""\n   MaxPublishDealsFee = "0 FIL"\n   MaxMarketBalanceAddFee = "0 FIL"\n   [CommonProviderConfig. RetrievalPricing]\n     Strategy = "default"\n     [CommonProviderConfig. RetrievalPricing. Default]\n       VerifiedDealsFreeTransfer = true\n     [CommonProviderConfig. RetrievalPricing. External]\n       Path = ""\n     [CommonProviderConfig. AddressConfig]\n       DisableWorkerFallback = false\n')])])]),a("div",{staticClass:"custom-block tip"},[a("p",{staticClass:"custom-block-title"},[e._v("TIP")]),e._v(" "),a("p",[e._v("If there are multiple miners, just copy the above configuration. *** If there are many miners, the configuration file will be very long, consider optimizing? ***")])]),e._v(" "),a("h2",{attrs:{id:"droplet-proxy-libp2p-listener"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#droplet-proxy-libp2p-listener"}},[e._v("#")]),e._v(" droplet proxy libp2p listener")]),e._v(" "),a("p",[e._v("Setting "),a("code",[e._v("droplet")]),e._v(" as "),a("code",[e._v("miner")]),e._v("'s "),a("code",[e._v("libp2p")]),e._v(" listener proxy is to set the entrance of a specific "),a("code",[e._v("miner")]),e._v(" market service to the current running "),a("code",[e._v("droplet")]),e._v(" instance.")]),e._v(" "),a("ul",[a("li",[e._v("Query "),a("code",[e._v("droplet")]),e._v(" peer node listening address")])]),e._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[e._v("./droplet net listen\n\n/ip4/127.0.0.1/tcp/58418/p2p/12D3KooWQftXTGFBKooKuyaNkugapUzi4VmjxEKTgkpsNCQufKBK\n/ip4/192.168.19.67/tcp/58418/p2p/12D3KooWQftXTGFBKooKuyaNkugapUzi4VmjxEKTgkpsNCQufKBK\n/ip6/::1/tcp/49770/p2p/12D3KooWQftXTGFBKooKuyaNkugapUzi4VmjxEKTgkpsNCQufKBK\n")])])]),a("ul",[a("li",[e._v("set "),a("code",[e._v("Mutiadrs")]),e._v(" and "),a("code",[e._v("peerid")]),e._v(" of "),a("code",[e._v("miners")]),e._v(" to "),a("code",[e._v("Mutiadrs")]),e._v(" and "),a("code",[e._v("peerid")]),e._v(" of "),a("code",[e._v("droplet")])])]),e._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[e._v("./droplet actor set-addrs --miner"),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v("=")]),e._v("t01041 /ip4/192.168.19.67/tcp/58418\nRequested multiaddrs change "),a("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("in")]),e._v(" message bafy2bzaceceqgxmiledunzjwbajpghzzn4iibvxhoifsrz4q2grzsirgznzdg\n\n./droplet actor set-peer-id --miner"),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v("=")]),e._v("f01041 12D3KooWQftXTGFBKooKuyaNkugapUzi4VmjxEKTgkpsNCQufKBK\n   Requested peerid change "),a("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("in")]),e._v(" message bafy2bzacea4ruzf4hvyezzhjkt6hnzz5tpk7ttuw6jmyoadqasqtujypqitp2\n")])])]),a("ul",[a("li",[e._v("After waiting for the message to be on-chained, check the agent information of "),a("code",[e._v("miner")])])]),e._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[e._v("./droplet actor info --miner t01041\npeers: 12D3KooWQftXTGFBKooKuyaNkugapUzi4VmjxEKTgkpsNCQufKBK\naddr: /ip4/192.168.19.67/tcp/58418\n")])])]),a("h2",{attrs:{id:"storage-ask"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#storage-ask"}},[e._v("#")]),e._v(" Storage Ask")]),e._v(" "),a("h3",{attrs:{id:"storage-deal-ask"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#storage-deal-ask"}},[e._v("#")]),e._v(" Storage Deal Ask")]),e._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[e._v("./droplet storage ask "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[e._v("set")]),e._v(" --price"),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[e._v("0")]),e._v(".01fil --verified-price"),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[e._v("0")]),e._v(".02fil --min-piece-size"),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v("=")]),e._v("512b --max-piece-size"),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v("=")]),e._v("512M t01041\n")])])]),a("p",[e._v("Pricing information can be checked via the command line tool:")]),e._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[e._v("./droplet storage ask get t01041\nPrice per GiB/Epoch Verified Min. Piece Size "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("(")]),e._v("padded"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(")")]),e._v(" Max. Piece Size "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("(")]),e._v("padded"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(")")]),e._v(" Expiry "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("(")]),e._v("Epoch"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(")")]),e._v(" Expiry "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("(")]),e._v("Appx. Rem. Time"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(")")]),e._v(" Seq. No.\n"),a("span",{pre:!0,attrs:{class:"token number"}},[e._v("0.01")]),e._v(" FIL "),a("span",{pre:!0,attrs:{class:"token number"}},[e._v("0.02")]),e._v(" FIL "),a("span",{pre:!0,attrs:{class:"token number"}},[e._v("512")]),e._v(" B "),a("span",{pre:!0,attrs:{class:"token number"}},[e._v("521")]),e._v(" MiB "),a("span",{pre:!0,attrs:{class:"token number"}},[e._v("161256")]),e._v(" 719h59m0s "),a("span",{pre:!0,attrs:{class:"token number"}},[e._v("0")]),e._v("\n")])])]),a("h3",{attrs:{id:"retrieve-deal"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#retrieve-deal"}},[e._v("#")]),e._v(" Retrieve Deal")]),e._v(" "),a("p",[e._v("The beneficiary address of storage provider should be configured before retrieval.")]),e._v(" "),a("div",{staticClass:"language-toml extra-class"},[a("pre",{pre:!0,attrs:{class:"language-toml"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("[")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("[")]),a("span",{pre:!0,attrs:{class:"token table class-name"}},[e._v("Miners")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("]")]),e._v("\n"),a("span",{pre:!0,attrs:{class:"token key property"}},[e._v("Addr")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("=")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[e._v('"t01002"')]),e._v("\n"),a("span",{pre:!0,attrs:{class:"token key property"}},[e._v("RetrievalPaymentAddress")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("=")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[e._v('"f3umdpich3a7xpm3bgtn4cr3k3w7auck2waw4pk76vye5tqm7zxeaq5yuewy75p63gzc5bhzhmfyhuyltcro4a"')]),e._v("\n")])])]),a("p",[e._v("Set the default ask for miner.")]),e._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[e._v("./droplet retrieve ask "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[e._v("set")]),e._v(" f01002\n")])])]),a("p",[e._v("At the same time, you can also set the price of the data retrieval request, if not set, the default is 0.")]),e._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[e._v("./droplet retrieve ask "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[e._v("set")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("\\")]),e._v("\n--price "),a("span",{pre:!0,attrs:{class:"token number"}},[e._v("0")]),e._v(".02fil "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("\\")]),e._v("\n--unseal-price "),a("span",{pre:!0,attrs:{class:"token number"}},[e._v("0")]),e._v(".01fil "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("\\")]),e._v("\n--payment-interval 1MB "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("\\")]),e._v("\nf01002\n")])])]),a("h2",{attrs:{id:"configure-and-start-droplet-client"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#configure-and-start-droplet-client"}},[e._v("#")]),e._v(" Configure and Start droplet-client")]),e._v(" "),a("p",[e._v("The normal operation of "),a("code",[e._v("droplet-client")]),e._v(" requires synchronization node, signature node ("),a("code",[e._v("venus fullnode")]),e._v(" and "),a("code",[e._v("lotus fullnode")]),e._v(" can be used as signature nodes), message nodes ("),a("code",[e._v("venus fullnode")]),e._v(" and "),a("code",[e._v("lotus fullnode")]),e._v(" can be used as message nodes) and "),a("code",[e._v("droplet")]),e._v(", which means it can be configured flexibly, as long as the message can be signed properly and snet to the chain.")]),e._v(" "),a("p",[a("code",[e._v("droplet-client")]),e._v(" needs to be configured with "),a("code",[e._v("--addr")]),e._v(" to bind the client‚Äôs wallet address, which is used to pay client collateral and retrieval fees.")]),e._v(" "),a("p",[e._v("Here are three commonly used startup methods:")]),e._v(" "),a("ul",[a("li",[e._v("Access to the "),a("code",[e._v("Venus")]),e._v(" chain service")])]),e._v(" "),a("p",[e._v("The signature "),a("code",[e._v("API")]),e._v(" of "),a("code",[e._v("sophon-gateway")]),e._v(" can only be accessed with "),a("code",[e._v("admin")]),e._v(" permission (for security considerations). It is not recommended to use "),a("code",[e._v("sophon-gateway")]),e._v(" for "),a("code",[e._v("droplet-client")]),e._v(". We use the local "),a("code",[e._v("venus-wallet")]),e._v(" for sign in this case.")]),e._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[e._v("./droplet-client run "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("\\")]),e._v("\n--node-url"),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v("=")]),e._v("/ip4/"),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v("<")]),e._v("venus_ip"),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v(">")]),e._v("/tcp/"),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v("<")]),e._v("port"),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v(">")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("\\")]),e._v("\n--messager-url"),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v("=")]),e._v("/ip4/"),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v("<")]),e._v("sophon-messager_ip"),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v(">")]),e._v("/tcp/"),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v("<")]),e._v("port"),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v(">")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("\\")]),e._v("\n--auth-token"),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v("=")]),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v("<")]),e._v("user-signed-token"),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v(">")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("\\")]),e._v("\n--signer-type"),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v("=")]),e._v("wallet "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("\\")]),e._v("\n--signer-url"),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v("=")]),e._v("/ip4/"),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v("<")]),e._v("venus-wallet_ip"),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v(">")]),e._v("/tcp/"),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v("<")]),e._v("port"),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v(">")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("\\")]),e._v("\n--signer-toke"),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v("=")]),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v("<")]),e._v("wallet-token"),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v(">")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("\\")]),e._v("\n--addr"),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v("=")]),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v("<")]),e._v("signer address"),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v(">")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("\\")]),e._v("\n")])])]),a("blockquote",[a("p",[a("code",[e._v("venus-wallet")]),e._v(" generates "),a("code",[e._v("token")]),e._v(" with signature permission. please refer to the above.")])]),e._v(" "),a("ul",[a("li",[e._v("Connect to "),a("code",[e._v("lotus fullnode")]),e._v(" and start")])]),e._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[e._v("./droplet-client run "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("\\")]),e._v("\n--node-url"),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v("=")]),e._v("/ip4/"),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v("<")]),e._v("venus_ip"),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v(">")]),e._v("/tcp/"),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v("<")]),e._v("port"),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v(">")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("\\")]),e._v("\n--node-token"),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v("=")]),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v("<")]),e._v("node-token"),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v(">")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("\\")]),e._v("\n--signer-type"),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v("=")]),e._v("lotusnode"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("\\")]),e._v("\n--addr"),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v("=")]),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v("<")]),e._v("signer address"),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v(">")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("\\")]),e._v("\n")])])]),a("ul",[a("li",[e._v("Connect to "),a("code",[e._v("venus fullnode")]),e._v(" and start")])]),e._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[e._v("./droplet-client run "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("\\")]),e._v("\n--node-url"),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v("=")]),e._v("/ip4/"),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v("<")]),e._v("venus_ip"),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v(">")]),e._v("/tcp/"),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v("<")]),e._v("port"),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v(">")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("\\")]),e._v("\n--node-token"),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v("=")]),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v("<")]),e._v("node-token"),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v(">")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("\\")]),e._v("\n--signer-type"),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v("=")]),e._v("wallet "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("\\")]),e._v("\n--addr"),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v("=")]),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v("<")]),e._v("signer address"),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v(">")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("\\")]),e._v("\n")])])]),a("p",[e._v("These configuration items can also be set in configuration files, see "),a("a",{attrs:{href:"https://github.com/ipfs-force-community/droplet/blob/master/docs/zh/droplet-client%E9%85%8D%E7%BD%AE%E8%A7%A3%E9%87%8A.md",target:"_blank",rel:"noopener noreferrer"}},[e._v("droplet-client configuration"),a("OutboundLink")],1)]),e._v(" "),a("h2",{attrs:{id:"storage-deal"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#storage-deal"}},[e._v("#")]),e._v(" Storage Deal")]),e._v(" "),a("h3",{attrs:{id:"import-the-data-to-be-stored"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#import-the-data-to-be-stored"}},[e._v("#")]),e._v(" Import the data to be stored")]),e._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[e._v("./droplet-client data "),a("span",{pre:!0,attrs:{class:"token function"}},[e._v("import")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v("<")]),e._v("file path"),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v(">")]),e._v("\nImport "),a("span",{pre:!0,attrs:{class:"token number"}},[e._v("1642491708527303001")]),e._v(", Root bafk2bzacedgv2xqys5ja4gycqipmg543ekxz3tjj6wwfexda352n55ahjldja\n")])])]),a("h3",{attrs:{id:"choose-storage-provider"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#choose-storage-provider"}},[e._v("#")]),e._v(" Choose Storage Provider")]),e._v(" "),a("p",[e._v("Use "),a("code",[e._v("droplet-client")]),e._v(" to query "),a("code",[e._v("miner")]),e._v(" storage ask information:")]),e._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[e._v("./droplet-client storage asks query f01041\nAsk: t01041\nPrice per GiB: "),a("span",{pre:!0,attrs:{class:"token number"}},[e._v("0.02")]),e._v(" FIL\nVerified Price per GiB: "),a("span",{pre:!0,attrs:{class:"token number"}},[e._v("0.01")]),e._v(" FIL\nMax Piece size: "),a("span",{pre:!0,attrs:{class:"token number"}},[e._v("8")]),e._v(" MiB\nMin Piece size: "),a("span",{pre:!0,attrs:{class:"token number"}},[e._v("512")]),e._v(" B\n")])])]),a("h3",{attrs:{id:"initiate-storage-deal"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#initiate-storage-deal"}},[e._v("#")]),e._v(" Initiate Storage Deal")]),e._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[e._v("/droplet-client storage deals init\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[e._v("# Enter the cid of the data to be stored, `./droplet-client data local`command to view")]),e._v("\nData CID "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("(")]),e._v("from lotus client "),a("span",{pre:!0,attrs:{class:"token function"}},[e._v("import")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(")")]),e._v(": bafk2bzacedgv2xqys5ja4gycqipmg543ekxz3tjj6wwfexda352n55ahjldja\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("..")]),e._v(" calculating data size\nPieceCid: baga6ea4seaqpz47j4kqdiixpehmzk3uw5c4cmqvs5iyi7xf7rwkepfhdvowdiai PayLoadSize: "),a("span",{pre:!0,attrs:{class:"token number"}},[e._v("809")]),e._v(" PieceSize: "),a("span",{pre:!0,attrs:{class:"token number"}},[e._v("1024")]),e._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[e._v("# Enter the data storage period")]),e._v("\nDeal duration "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("(")]),e._v("days"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(")")]),e._v(": "),a("span",{pre:!0,attrs:{class:"token number"}},[e._v("180")]),e._v("\nMiner Addresses "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("(")]),e._v("f0"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("..")]),e._v(" f0"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("..")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(")")]),e._v(", none to find: t01041\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("..")]),e._v(" querying miner asks\n-----\nProposing from t16qnfduxzpneb2m3rbdasvhgk7rmmo32zpiypkaq\nBalance: "),a("span",{pre:!0,attrs:{class:"token number"}},[e._v("9499.999999856612207905")]),e._v(" FIL\nPiece size: 1KiB "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("(")]),e._v("Payload size: 809B"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(")")]),e._v("\nDuration: 4320h0m0s\nTotal price: ~0.0098876953124352 FIL "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[e._v("0.000000019073486328")]),e._v(" FIL per epoch"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(")")]),e._v("\nVerified: "),a("span",{pre:!0,attrs:{class:"token boolean"}},[e._v("false")]),e._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[e._v("# Confirm whether to accept the order price")]),e._v("\nAccept "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("(")]),e._v("yes/no"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(")")]),e._v(": "),a("span",{pre:!0,attrs:{class:"token function"}},[e._v("yes")]),e._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("..")]),e._v(" executing\nDeal "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("(")]),e._v("t01051"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(")")]),e._v(" CID: bafyreihiln2ha6eaaos7kuhwpnvjvjlxmjnpsklym6hhucu2z776bf2or4\n")])])]),a("p",[e._v("Then wait for the dael message to be sent to the chain and the storage provider to complete the data sealing.")]),e._v(" "),a("p",[a("code",[e._v("droplet-client")]),e._v(" view daels:")]),e._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[e._v("./droplet-client storage deals list\nDealCid DealId Provider State On Chain? Slashed? PieceCID Size Price Duration Verified\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("..")]),e._v(".76bf2or4 "),a("span",{pre:!0,attrs:{class:"token number"}},[e._v("0")]),e._v(" t01051 StorageDealCheckForAcceptance N N "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("..")]),e._v(".dvowdiai "),a("span",{pre:!0,attrs:{class:"token number"}},[e._v("1016")]),e._v(" B "),a("span",{pre:!0,attrs:{class:"token number"}},[e._v("0.00992212295525724")]),e._v(" FIL "),a("span",{pre:!0,attrs:{class:"token number"}},[e._v("520205")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token boolean"}},[e._v("false")]),e._v("\n   Message: Provider state: StorageDealPublish\n")])])]),a("h3",{attrs:{id:"offline-storage-deal"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#offline-storage-deal"}},[e._v("#")]),e._v(" Offline Storage Deal")]),e._v(" "),a("ol",[a("li",[e._v("Import storage deal file")])]),e._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[e._v("./droplet-client data "),a("span",{pre:!0,attrs:{class:"token function"}},[e._v("import")]),e._v(" ./README.md\nImport "),a("span",{pre:!0,attrs:{class:"token number"}},[e._v("1642643014364955003")]),e._v(", Root bafk2bzaceaf4sallirkt63fqrojz5gaut7akiwxrclcsymqelqad7man3hc2c\n")])])]),a("ol",{attrs:{start:"2"}},[a("li",[e._v("Convert to CAR file")])]),e._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[e._v("./droplet-client data generate-car ./README.md ./readme.md.car\n")])])]),a("ol",{attrs:{start:"3"}},[a("li",[e._v("Calculate the "),a("code",[e._v("CID")]),e._v(" and "),a("code",[e._v("Piece size")]),e._v(" of the CAR file")])]),e._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[e._v("./droplet-client data commP ./readme.md.car\nCID: baga6ea4seaqfewgysi3n3cjylkbfknr56vbemb2gwjfvpctqtjgpdweu7o3d6mq\nPiece size: "),a("span",{pre:!0,attrs:{class:"token number"}},[e._v("3.969")]),e._v(" KiB\n")])])]),a("ol",{attrs:{start:"4"}},[a("li",[e._v("Initiate a deal")])]),e._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[e._v("./droplet-client storage deals init "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("\\")]),e._v("\n--manual-piece-cid"),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v("=")]),e._v("baga6ea4seaqfewgysi3n3cjylkbfknr56vbemb2gwjfvpctqtjgpdweu7o3d6mq "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("\\")]),e._v("\n--manual-piece-size"),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[e._v("4064")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("\\")]),e._v("\nbafk2bzaceaf4sallirkt63fqrojz5gaut7akiwxrclcsymqelqad7man3hc2c "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("\\")]),e._v("\nf01051"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("\\")]),e._v("\n"),a("span",{pre:!0,attrs:{class:"token number"}},[e._v("0")]),e._v(".01fil "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("\\")]),e._v("\n"),a("span",{pre:!0,attrs:{class:"token number"}},[e._v("518400")]),e._v("\nbafyreiecguaxgtmgcanfco6huni4d6h6zs3w3bznermmiurtdos7r6hftm\n")])])]),a("ul",[a("li",[a("code",[e._v("manual-piece-cid")]),e._v(": "),a("code",[e._v("CID")]),e._v(" output after executing "),a("code",[e._v("data commP")]),e._v(" in step 3")]),e._v(" "),a("li",[a("code",[e._v("manual-piece-size")]),e._v(": "),a("code",[e._v("Piece size")]),e._v(" output after executing "),a("code",[e._v("data commP")]),e._v(" in step 3. It should be noted that when using this parameter, this value needs to be converted into the size of "),a("code",[e._v("byte")]),e._v(", here The size converted to byte for 3.969kib is 4064.\nThe next four parameters are:")]),e._v(" "),a("li",[e._v("The "),a("code",[e._v("Root")]),e._v(" entered after executing the "),a("code",[e._v("import")]),e._v(" command in the first step")]),e._v(" "),a("li",[e._v("miner ID")]),e._v(" "),a("li",[e._v("Negotiate to pay "),a("code",[e._v("0.01fil")]),e._v(" for the order, **this value must be greater than the minimum value in "),a("code",[e._v("storage ask")]),e._v(" set by miner, otherwise the request will be rejected.")]),e._v(" "),a("li",[e._v("Contract period, must be greater than or equal to 180 days, this value also needs to be replaced by epoch, each epoch=30 seconds, in the example: 518400 = 180 days.")])]),e._v(" "),a("p",[e._v("The final output "),a("code",[e._v("bafyreidfs2w7lxacq6zpqck7q4zimyitidxyahojf7dbbuz5zr7irdlmqa")]),e._v(" is the proposed CID.\nLike online deals, you can check the deal information through the droplet-client at this time, and the final status of the order will stop at "),a("code",[e._v("StorageDealWaitingForData")])]),e._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[e._v("./droplet-client storage deals list\nDealCid DealId Provider State On Chain? Slashed? PieceCID Size Price Duration Verified\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("..")]),e._v(".s7r6hftm0 t01051 StorageDealCheckForAcceptance N N "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("..")]),e._v(". u7o3d6mq "),a("span",{pre:!0,attrs:{class:"token number"}},[e._v("3.969")]),e._v(" KiB "),a("span",{pre:!0,attrs:{class:"token number"}},[e._v("5196.63")]),e._v(" FIL "),a("span",{pre:!0,attrs:{class:"token number"}},[e._v("519663")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token boolean"}},[e._v("false")]),e._v("\n   Message: Provider state: StorageDealWaitingForData\n")])])]),a("p",[e._v("üíÅ "),a("strong",[e._v("If "),a("code",[e._v("droplet-client")]),e._v(" shows the following content:")])]),e._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token number"}},[e._v("2022")]),e._v("-01-20T12:47:27.966+0800  ERROR storagemarket_impl   clientstates/client_states.go:324   deal bafyreif2k2e4acraxk33z3llwo5gqmk32tfrdj2kocjanojbfbf6vj72vm failed: adding market funds failed: estimating gas used: message execution failed: "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[e._v("exit")]),e._v(" SysErrInsufficientFunds"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[e._v("6")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(")")]),e._v("\n")])])]),a("p",[e._v("It means that the balance in the wallet is insufficient, call the command "),a("code",[e._v("./droplet-client actor-funds add 100fil")]),e._v(" and re-execute the command.")]),e._v(" "),a("ol",{attrs:{start:"5"}},[a("li",[e._v("Import data files of offline deal\nIt is necessary to transfer the "),a("code",[e._v(".car")]),e._v(" file generated in the previous step 2 to droplet offline, and import the data through the droplet command:")])]),e._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[e._v("./droplet storage deal import-data bafyreiecguaxgtmgcanfco6huni4d6h6zs3w3bznermmiurtdos7r6hftm ./readme.md.car\n")])])]),a("p",[e._v("Check the status again, the order status is updated to "),a("code",[e._v("StorageDealPublishing")]),e._v(":")]),e._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[e._v("./droplet-client storage deals list\nDealCid DealId Provider State On Chain? Slashed? PieceCID Size Price Duration Verified\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("..")]),e._v(".s7r6hftm "),a("span",{pre:!0,attrs:{class:"token number"}},[e._v("0")]),e._v(" t01051 StorageDealCheckForAcceptance N N "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("..")]),e._v(".u7o3d6mq "),a("span",{pre:!0,attrs:{class:"token number"}},[e._v("3.969")]),e._v(" KiB "),a("span",{pre:!0,attrs:{class:"token number"}},[e._v("5196.63")]),e._v(" FIL "),a("span",{pre:!0,attrs:{class:"token number"}},[e._v("519663")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token boolean"}},[e._v("false")]),e._v("\nMessage: Provider state: StorageDealPublishing\n")])])]),a("p",[e._v("Finally, wait for the deal status to change to "),a("code",[e._v("StorageDealAwaitingPreCommit")]),e._v(", then the deal data is ready to be sealed.")]),e._v(" "),a("h2",{attrs:{id:"submit-data-retrieval-request"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#submit-data-retrieval-request"}},[e._v("#")]),e._v(" Submit Data Retrieval Request")]),e._v(" "),a("p",[e._v("Users can initiate data retrieval request by "),a("code",[e._v("minerID")]),e._v(" and "),a("code",[e._v("Data CID")])]),e._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[e._v("./droplet-client retrieval retrieve --provider t01020 bafk2bzacearla6en6crpouxo72d5lhr3buajbzjippl63bfsd2m7rsyughu42 test.txt\nRecv "),a("span",{pre:!0,attrs:{class:"token number"}},[e._v("0")]),e._v(" B, Paid "),a("span",{pre:!0,attrs:{class:"token number"}},[e._v("0")]),e._v(" FIL, Open "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("(")]),e._v("New"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(")")]),e._v(", 0s\nRecv "),a("span",{pre:!0,attrs:{class:"token number"}},[e._v("0")]),e._v(" B, Paid "),a("span",{pre:!0,attrs:{class:"token number"}},[e._v("0")]),e._v(" FIL, DealProposed "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("(")]),e._v("WaitForAcceptance"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(")")]),e._v(", 16ms\nRecv "),a("span",{pre:!0,attrs:{class:"token number"}},[e._v("0")]),e._v(" B, Paid "),a("span",{pre:!0,attrs:{class:"token number"}},[e._v("0")]),e._v(" FIL, DealAccepted "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("(")]),e._v("Accepted"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(")")]),e._v(", 26ms\nRecv "),a("span",{pre:!0,attrs:{class:"token number"}},[e._v("0")]),e._v(" B, Paid "),a("span",{pre:!0,attrs:{class:"token number"}},[e._v("0")]),e._v(" FIL, PaymentChannelSkip "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("(")]),e._v("Ongoing"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(")")]),e._v(", 27ms\nRecv "),a("span",{pre:!0,attrs:{class:"token number"}},[e._v("1.479")]),e._v(" KiB, Paid "),a("span",{pre:!0,attrs:{class:"token number"}},[e._v("0")]),e._v(" FIL, Blocks Received "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("(")]),e._v("Ongoing"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(")")]),e._v(", 30ms\nRecv "),a("span",{pre:!0,attrs:{class:"token number"}},[e._v("1.479")]),e._v(" KiB, Paid "),a("span",{pre:!0,attrs:{class:"token number"}},[e._v("0")]),e._v(" FIL, AllBlocksReceived "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("(")]),e._v("BlocksComplete"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(")")]),e._v(", 33ms\nRecv "),a("span",{pre:!0,attrs:{class:"token number"}},[e._v("1.479")]),e._v(" KiB, Paid "),a("span",{pre:!0,attrs:{class:"token number"}},[e._v("0")]),e._v(" FIL, Complete "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("(")]),e._v("CheckComplete"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(")")]),e._v(", 35ms\nRecv "),a("span",{pre:!0,attrs:{class:"token number"}},[e._v("1.479")]),e._v(" KiB, Paid "),a("span",{pre:!0,attrs:{class:"token number"}},[e._v("0")]),e._v(" FIL, CompleteVerified "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("(")]),e._v("Finalizing Blockstore"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(")")]),e._v(", 36ms\nRecv "),a("span",{pre:!0,attrs:{class:"token number"}},[e._v("1.479")]),e._v(" KiB, Paid "),a("span",{pre:!0,attrs:{class:"token number"}},[e._v("0")]),e._v(" FIL, BlockstoreFinalized "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("(")]),e._v("Completed"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(")")]),e._v(", 36ms\nSuccess\n")])])])])}),[],!1,null,null,null);t.default=n.exports}}]);