(window.webpackJsonp=window.webpackJsonp||[]).push([[33],{401:function(e,n,t){"use strict";t.r(n);var a=t(17),s=Object(a.a)({},(function(){var e=this,n=e.$createElement,t=e._self._c||n;return t("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[t("h1",{attrs:{id:"droplet-的配置解释"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#droplet-的配置解释"}},[e._v("#")]),e._v(" droplet 的配置解释")]),e._v(" "),t("p",[e._v("一份典型的 "),t("code",[e._v("droplet")]),e._v(" 的配置是这样的:")]),e._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v('\n# ****** 数据传输参数配置 ********\nSimultaneousTransfersForStorage = 20\nSimultaneousTransfersForStoragePerClient = 20\nSimultaneousTransfersForRetrieval = 20\n\n\n# ****** 全局基础参数配置 ********\n[CommonProvider]\n  ConsiderOnlineStorageDeals = true\n  ConsiderOfflineStorageDeals = true\n  ConsiderOnlineRetrievalDeals = true\n  ConsiderOfflineRetrievalDeals = true\n  ConsiderVerifiedStorageDeals = true\n  ConsiderUnverifiedStorageDeals = true\n  PieceCidBlocklist = []\n  ExpectedSealDuration = "24h0m0s"\n  MaxDealStartDelay = "336h0m0s"\n  PublishMsgPeriod = "1h0m0s"\n  MaxDealsPerPublishMsg = 8\n  MaxProviderCollateralMultiplier = 2\n  Filter = ""\n  RetrievalFilter = ""\n  TransferPath = ""\n  MaxPublishDealsFee = "0 FIL"\n  MaxMarketBalanceAddFee = "0 FIL"\n  RetrievalPaymentAddress = ""\n  DealPublishAddress = []\n  [CommonProvider.RetrievalPricing]\n    Strategy = "default"\n    [CommonProvider.RetrievalPricing.Default]\n      VerifiedDealsFreeTransfer = true\n    [CommonProvider.RetrievalPricing.External]\n      Path = ""\n    \n\n每个矿工可以有独立的基础参数，没有配置时使用全局配置，配置方式如下：\n\n# ****** miner基础参数配置 ********\n[[Miners]]\n  Addr = "f01000"\n  Account = "testuser01"\n  \n   ConsiderOnlineStorageDeals = true\n   ConsiderOfflineStorageDeals = true\n   ConsiderOnlineRetrievalDeals = true\n   ConsiderOfflineRetrievalDeals = true\n   ConsiderVerifiedStorageDeals = true\n   ConsiderUnverifiedStorageDeals = true\n   PieceCidBlocklist = []\n   ExpectedSealDuration = "24h0m0s"\n   MaxDealStartDelay = "336h0m0s"\n   PublishMsgPeriod = "1h0m0s"\n   MaxDealsPerPublishMsg = 8\n   MaxProviderCollateralMultiplier = 2\n   Filter = ""\n   RetrievalFilter = ""\n   TransferPath = "/mnt/transfer"\n   MaxPublishDealsFee = "0 FIL"\n   MaxMarketBalanceAddFee = "0 FIL"\n   RetrievalPaymentAddress = ""\n   DealPublishAddress = []\n   [CommonProvider.RetrievalPricing]\n     Strategy = "default"\n     [CommonProvider.RetrievalPricing.Default]\n       VerifiedDealsFreeTransfer = true\n     [CommonProvider.RetrievalPricing.External]\n       Path = ""\n\n# ****** droplet 网络配置  ********\n[API]\n  ListenAddress = "/ip4/127.0.0.1/tcp/41235"\n  RemoteListenAddress = ""\n  Secret = "e647ee23cf95424162b974cd641b6a6479cbc7cb1209cc755f762c8248d50ba4"\n  Timeout = "30s"\n\n[Libp2p]\n  ListenAddresses = ["/ip4/0.0.0.0/tcp/58418", "/ip6/::/tcp/0"]\n  AnnounceAddresses = []\n  NoAnnounceAddresses = []\n  PrivateKey = "08011240d47934b6fccf8b79786335a55ccc04bdb9c92866cae2c0cea2fdefe0f2e7c18650dfbde5dd126c2a23a0d1c60686d3dedd064b67ba97c6161dd8007f0675e1a9"\n\n\n# ****** venus 组件服务配置 ********\n[Node]\n  Url = "/ip4/192.168.200.151/tcp/3453"\n  Token = "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJuYW1lIjoidGVzdC11c2VyMDEiLCJwZXJtIjoic2lnbiIsImV4dCI6IiJ9.ETjNy3HMDS3ScZ3cax9xYb6AopNWYp4y71lZGCvYxMg"\n\n[Messager]\n  Url = "/ip4/127.0.0.1/tcp/39812"\n  Token = "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJuYW1lIjoidGVzdC11c2VyMDEiLCJwZXJtIjoic2lnbiIsImV4dCI6IiJ9.ETjNy3HMDS3ScZ3cax9xYb6AopNWYp4y71lZGCvYxMg"\n\n[Signer]\n  Type = "gateway"\n  Url = "/ip4/127.0.0.1/tcp/45132"\n  Token = "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJuYW1lIjoidGVzdC11c2VyMDEiLCJwZXJtIjoic2lnbiIsImV4dCI6IiJ9.ETjNy3HMDS3ScZ3cax9xYb6AopNWYp4y71lZGCvYxMg"\n\n[AuthNode]\n  Url = "http://127.0.0.1:8989"\n  Token = "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJuYW1lIjoidGVzdC11c2VyMDEiLCJwZXJtIjoic2lnbiIsImV4dCI6IiJ9.ETjNy3HMDS3ScZ3cax9xYb6AopNWYp4y71lZGCvYxMg"\n\n\n\n#  ******** 数据库设置 ********\n[Mysql]\nConnectionString = ""\nMaxOpenConn = 100\nMaxIdleConn = 100\nConnMaxLifeTime = "1m"\nDebug = false\n\n\n# ******** 扇区存储设置 ********\n[PieceStorage]\nS3 = []\n\n[[PieceStorage.Fs]]\nName = "local"\nReadOnly = false\nPath = "./.vscode/test"\n\n\n# ******** 日志设置 ********\n[Journal]\nPath = "journal"\n\n\n# ******** DAG存储设置 ********\n\n[DAGStore]\nRootDir = "/root/.droplet/dagstore"\nMaxConcurrentIndex = 5\nMaxConcurrentReadyFetches = 0\nMaxConcurrencyStorageCalls = 100\nGCInterval = "1m0s"\nTransient = ""\nIndex = ""\nUseTransient = false\n\n\n# ******** 数据检索配置 ********\n\nRetrievalPaymentAddress = ""\n\n\n\n# ****** Metric 配置 ********\n[Metrics]\n  Enabled = false\n  [Metrics.Exporter]\n    Type = "prometheus"\n    [Metrics.Exporter.Prometheus]\n      RegistryType = "define"\n      Namespace = ""\n      EndPoint = "/ip4/0.0.0.0/tcp/4568"\n      Path = "/debug/metrics"\n      ReportingPeriod = "10s"\n    [Metrics.Exporter.Graphite]\n      Namespace = ""\n      Host = "127.0.0.1"\n      Port = 4568\n      ReportingPeriod = "10s"\n\n')])])]),t("p",[e._v("接下来，将这个配置分成基础参数，网络配置，Venus组件配置等多个部分进行讲解")]),e._v(" "),t("h2",{attrs:{id:"数据传输参数配置"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#数据传输参数配置"}},[e._v("#")]),e._v(" 数据传输参数配置")]),e._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v("# 存储订单的最大同时传输数目\n# 整数类型 默认为：20\nSimultaneousTransfersForStorage = 20\n\n# 针对每一个客户端的存储订单最大同时传输数目\n# 整数类型 默认为：20\nSimultaneousTransfersForStoragePerClient = 20\n\n# 获取数据最大同时传输数目\n# 整数类型 默认为：20\nSimultaneousTransfersForRetrieval = 20\n")])])]),t("h2",{attrs:{id:"基础参数配置"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#基础参数配置"}},[e._v("#")]),e._v(" 基础参数配置")]),e._v(" "),t("p",[e._v("这部分的配置主要是决定了了 "),t("code",[e._v("droplet")]),e._v(" 在进行工作时的偏好，满足定制化的需求，其中各项配置的作用如下：")]),e._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v('# 决定是否接受线上存储订单\n# 布尔值 默认为 true\nConsiderOnlineStorageDeals = true\n\n# 决定是否接受线下存储订单\n# 布尔值 默认为 true\nConsiderOfflineStorageDeals = true\n\n# 决定是否接受线上数据获取订单\n# 布尔值 默认为 true\nConsiderOnlineRetrievalDeals = true\n\n# 决定是否接受线下数据获取订单\n# 布尔值 默认为 true\nConsiderOfflineRetrievalDeals = true\n\n# 决定是否接受经过验证的存储订单\n# 布尔值 默认为 true\nConsiderVerifiedStorageDeals = true\n\n# 决定是否接受未经过验证的存储订单\n# 布尔值 默认为 true\nConsiderUnverifiedStorageDeals = true\n\n# 订单数据黑名单\n# 字符串数组 其中每一个字符串都是CID 默认为空\n# CID在黑名单中的数据，不会被用于构建订单\nPieceCidBlocklist = []\n\n# 订单数据被封装完成的最大时间预期\n# 时间字符串 默认为："24h0m0s"\n# 时间字符串是由数字和时间单位组成的字符串，数字包括整数和小数，合法的单位包括 "ns", "us" (or "µs"), "ms", "s", "m", "h".\nExpectedSealDuration = "24h0m0s"\n\n# 预期订单封装开始前等待时间\n# 时间字符串 默认为："336h0m0s"\nMaxDealStartDelay = "336h0m0s"\n\n# 消息推送上链的周期\n# 时间字符串 默认为："1h0m0s"\nPublishMsgPeriod = "5m0s"\n\n# 在一个消息推送周期内的最大订数量\n# 整数类型 默认为8 \nMaxDealsPerPublishMsg = 8\n\n# 最大的存储供应商抵押乘法因子\n# 整数类型 默认为：2\nMaxProviderCollateralMultiplier = 2\n\n# 通过外部执行器来筛选存储订单,是可执行的程序或脚本\nFilter = ""\n\n# 通过外部执行器来筛选检索订单,是可执行的程序或脚本\nRetrievalFilter = ""\n\n# 订单传输数据的存储位置\n# 字符串类型 可选 为空值时默认使用`DROPLET_REPO`的路径\nTransferPath = ""\n\n# 发送订单消息的最大费用\n# FIL类型 默认为："0 FIL"\n# FIL类型字符串形式为 整数+" FIL"\nMaxPublishDealsFee = "0 FIL"\n\n# 发送增加抵押消息时花费的最大费用\n# FIL类型 默认为："0 FIL"\nMaxMarketBalanceAddFee = "0 FIL"\n\n# 保留字段，当前配置无效\n[RetrievalPricing]\n\n# 使用的策略类型\n# 字符串类型 可以选择"default"和"external"  默认为:"default"\n# 前者使用内置的默认策略，后者使用外部提供的脚本自定义的策略\nStrategy = "default"\n\n[RetrievalPricing.Default]\n\n# 对于经过认证的订单数据，是否定价为0\n# 布尔值 默认为 "true"\n# 只有Strategy = "default" 才会生效\nVerifiedDealsFreeTransfer = true\n\n[RetrievalPricing.External]\n# 定义外部策略的脚本的路径\n# 字符串类型 如果选择external策略时，必选\nPath = ""\n\n# 该设置为保留字段，当前无效\n[AddressConfig]\n\n# 是否降低使用woker地址发布消息的优先级，如果是，则只有在其他可选地址没有的情况下才会使用woker的地址发消息\n# 布尔值 默认为 false\nDisableWorkerFallback = false\n\n[[AddressConfig.DealPublishControl]]\n\n# 发布订单消息的地址\n# 字符串类型 必选\nAddr = ""\n\n# 持有相应地址的账户\n# 字符串类型 必选\nAccount =""\n')])])]),t("h2",{attrs:{id:"droplet-网络配置"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#droplet-网络配置"}},[e._v("#")]),e._v(" droplet  网络配置")]),e._v(" "),t("p",[e._v("这部分的配置决定了 droplet 和外界交互的接口")]),e._v(" "),t("h3",{attrs:{id:"api"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#api"}},[e._v("#")]),e._v(" [API]")]),e._v(" "),t("p",[e._v("droplet 对外提供服务的接口")]),e._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v('[API]\n# droplet 提供服务监听的地址\n# 字符串类型，必选项，默认为:"/ip4/127.0.0.1/tcp/41235"\nListenAddress = "/ip4/127.0.0.1/tcp/41235"\n\n# 保留字段\nRemoteListenAddress = ""\n\n# 密钥用于加密通信\n# 字符串类型 可选项（没有则自动生成）\nSecret = "878f9c1f88c6f68ee7be17e5f0848c9312897b5d22ff7d89ca386ed0a583da3c"\n\n# 保留字段\nTimeout = "30s"\n')])])]),t("h3",{attrs:{id:"libp2p"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#libp2p"}},[e._v("#")]),e._v(" [Libp2p]")]),e._v(" "),t("p",[e._v("Droplet 在P2P网络中通信时使用的 通信地址")]),e._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v('[Libp2p]\n# 监听的网络地址\n# 字符串数组 必选 默认为:["/ip4/0.0.0.0/tcp/58418", "/ip6/::/tcp/0"]\nListenAddresses = ["/ip4/0.0.0.0/tcp/58418", "/ip6/::/tcp/0"]\n\n# 保留字段\nAnnounceAddresses = []\n\n# 保留字段\nNoAnnounceAddresses = []\n\n# 用于生成p2p节点的peerid\n# 字符串 可选（没设置则自动生成）\nPrivateKey = "08011240ae580daabbe087007d2b4db4e880af10d582215d2272669a94c49c854f36f99c35"\n')])])]),t("h2",{attrs:{id:"venus-组件服务配置"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#venus-组件服务配置"}},[e._v("#")]),e._v(" venus 组件服务配置")]),e._v(" "),t("p",[e._v("当 "),t("code",[e._v("droplet")]),e._v(" 接入venus组件使用时，需要配置相关组件的API。")]),e._v(" "),t("h3",{attrs:{id:"node"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#node"}},[e._v("#")]),e._v(" [Node]")]),e._v(" "),t("p",[e._v("venus链服务接入配置")]),e._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v('[Node]\n# 链服务的入口\n# 字符串类型 必选（也可以直接通过命令行的--node-url flag 进行配置）\nUrl = "/ip4/192.168.200.128/tcp/3453"\n\n# venus 系列组件的鉴权token\n# 字符串类型 必选（也可以直接通过命令行的 --auth-token flag 进行配置）\nToken = "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJuYW1lIjoiZm9yY2VuZXQtbnYxNiIsInBlcm0iOiJhZG1pbiIsImV4dCI6IiJ9.PuzEy1TlAjjNiSUu_tbHi2XPUritDLm9Xf5UW3MHRe8"\n\n')])])]),t("h3",{attrs:{id:"messager"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#messager"}},[e._v("#")]),e._v(" [Messager]")]),e._v(" "),t("p",[e._v("venus 消息服务接入配置")]),e._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v('[Messager]\n# 消息服务入口\n# 字符串类型 可选（也可以直接通过命令行的 --messager-url flag 进行配置） 不接入链服务时可不填\nUrl = "/ip4/192.168.200.128/tcp/39812/"\n\n# venus 系列组件的鉴权token\n# 字符串类型 可选（也可以直接通过命令行的 --auth-token flag 进行配置） 不接入链服务时可不填\nToken = "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJuYW1lIjoiZm9yY2VuZXQtbnYxNiIsInBlcm0iOiJhZG1pbiIsImV4dCI6IiJ9.PuzEy1TlAjjNiSUu_tbHi2XPUritDLm9Xf5UW3MHRe8"\n')])])]),t("h3",{attrs:{id:"signer"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#signer"}},[e._v("#")]),e._v(" [Signer]")]),e._v(" "),t("p",[e._v("venus 提供签名服务的组件，它可以由两种类型：由venus-wallet直接提供的签名服务和由sophon-gateway提供的间接签名服务")]),e._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v('[Signer]\n# 签名服务组件的类型\n# 字符串类型  枚举："gateway"，"wallet"，"lotusnode"\nType = "gateway"\n\n# 签名服务入口\n# 字符串类型 必选（也可以直接通过命令行的 --signer-url flag 进行配置）\nUrl = "/ip4/192.168.200.128/tcp/45132/"\n\n# venus 系列组件的鉴权token\n# 字符串类型 必选（也可以直接通过命令行的 --auth-token flag 进行配置）\nToken = "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJuYW1lIjoiZm9yY2VuZXQtbnYxNiIsInBlcm0iOiJhZG1pbiIsImV4dCI6IiJ9.PuzEy1TlAjjNiSUu_tbHi2XPUritDLm9Xf5UW3MHRe8"\n')])])]),t("h3",{attrs:{id:"authnode"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#authnode"}},[e._v("#")]),e._v(" [AuthNode]")]),e._v(" "),t("p",[e._v("venus 提供鉴权服务接入配置")]),e._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v('[AuthNode]\n\n# 鉴权服务入口\n# 字符串类型 可选（也可以直接通过命令行的 --signer-url flag 进行配置） 不接入链服务时可不填\nUrl = "http://192.168.200.128:8989"\n\n# venus 系列组件的鉴权token\n# 字符串类型 可选（也可以直接通过命令行的 --auth-token flag 进行配置） 不接入链服务时可不填\nToken = "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJuYW1lIjoiZm9yY2VuZXQtbnYxNiIsInBlcm0iOiJhZG1pbiIsImV4dCI6IiJ9.PuzEy1TlAjjNiSUu_tbHi2XPUritDLm9Xf5UW3MHRe8"\n')])])]),t("h2",{attrs:{id:"矿工配置"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#矿工配置"}},[e._v("#")]),e._v(" 矿工配置")]),e._v(" "),t("p",[e._v("预置矿工信息")]),e._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v('[[Miners]]\n# 矿工的地址\n# 字符串类型 必选\nAddr =""\n\n# 账户名\n# 字符串类型 必选\nAccount = ""\n\n# 基础参数，见上文\n')])])]),t("div",{staticClass:"custom-block tip"},[t("p",{staticClass:"custom-block-title"},[e._v("提示")]),e._v(" "),t("p",[e._v("基础参数在不配置时将会使用 "),t("code",[e._v("CommonProvider")]),e._v(", 如下:")]),e._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v('[[Miners]]\n  Addr = "f02472"\n  Account = "litao"\n')])])]),t("p",[e._v("基础参数一旦配置了一项,则所有项都必须自己配置,比如配置:")]),e._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v('[[Miners]]\n  Addr = "f02472"\n  Account = "litao"\n  TransferPath = "/mnt/transfer/2472"\n')])])]),t("p",[e._v("这样的配置会导致基础参数中的其他配置项都去各自类型的零值,而不会用 "),t("code",[e._v("CommonProvider")]),e._v(" 中的配置，\n如 "),t("code",[e._v("f02472")]),e._v(" 对应的 "),t("code",[e._v("ConsiderOnlineStorageDeals")]),e._v(" 等于 "),t("code",[e._v("false")]),e._v(", 而并非是 "),t("code",[e._v("CommonProvider")]),e._v(" 中的 true.")]),e._v(" "),t("p",[e._v("这一点需要特别注意,正确的配置方式:")]),e._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v('[[Miners]]\n  Addr = "f02472"\n  Account = "litao"\n  TransferPath = "/mnt/transfer/2472"\n  ConsiderOnlineStorageDeals = true\n  ConsiderOfflineStorageDeals = true\n  ConsiderOnlineRetrievalDeals = true\n  ConsiderOfflineRetrievalDeals = true\n  ConsiderVerifiedStorageDeals = true\n  ConsiderUnverifiedStorageDeals = true\n  PieceCidBlocklist = []\n  ExpectedSealDuration = "24h0m0s"\n  MaxDealStartDelay = "336h0m0s"\n  PublishMsgPeriod = "1m0s"\n  MaxDealsPerPublishMsg = 8\n  MaxProviderCollateralMultiplier = 2\n  Filter = ""\n  RetrievalFilter = ""\n  MaxPublishDealsFee = "0 FIL"\n  MaxMarketBalanceAddFee = "0 FIL"\n  RetrievalPaymentAddress = ""\n  [RetrievalPricing]\n    Strategy = "default"\n    [RetrievalPricing.Default]\n      VerifiedDealsFreeTransfer = true\n    [RetrievalPricing.External]\n      Path = ""\n')])])]),t("p",[e._v("这样不是很灵活,以后会考虑优化.")])]),e._v(" "),t("h2",{attrs:{id:"数据库配置"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#数据库配置"}},[e._v("#")]),e._v(" 数据库配置")]),e._v(" "),t("p",[e._v("Droplet 运行过程中产生的数据的存储数据库的设置\n目前支持BadgerDB和MySQLDB，默认使用BadgerDB")]),e._v(" "),t("h3",{attrs:{id:"mysql"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#mysql"}},[e._v("#")]),e._v(" [Mysql]")]),e._v(" "),t("p",[e._v("MySQLDB的配置")]),e._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v('[Mysql]\n\n# 用于连接MySQL数据库的 connection string\n# 字符串类型 如果要使用 MySQL 数据库的话，这是必选，否则使用默认的BadgerDB\nConnectionString = ""\n\n# 打开连接的最大数量\n# 整数类型 默认为100\nMaxOpenConn = 100\n\n# 空闲连接的最大数量\n# 整数类型 默认为100\nMaxIdleConn = 100\n\n# 可复用连接的最大生命周期\n# 时间字符串 默认为："1m"\n# 时间字符串是由数字和时间单位组成的字符串，数字包括整数和小数，合法的单位包括 "ns", "us" (or "µs"), "ms", "s", "m", "h".\nConnMaxLifeTime = "1m"\n\n# 是否输出数据库相关的调试信息\n# 布尔值 默认false\nDebug = false\n')])])]),t("h2",{attrs:{id:"扇区存储配置"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#扇区存储配置"}},[e._v("#")]),e._v(" 扇区存储配置")]),e._v(" "),t("p",[e._v("配置 "),t("code",[e._v("droplet")]),e._v(" 导入数据后生成的扇区的存储空间\n支持使用两种类型的数据存储方式： 文件系统存储和对象存储")]),e._v(" "),t("h3",{attrs:{id:"piecestorage-fs"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#piecestorage-fs"}},[e._v("#")]),e._v(" [[PieceStorage.Fs]]")]),e._v(" "),t("p",[e._v("配置本地文件系统作为扇区存储\n对于大量数据的扇区，建议挂载和"),t("code",[e._v("sophon-cluster")]),e._v("共用的文件系统进行配置")]),e._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v('[PieceStorage]\n[[PieceStorage.Fs]]\n\n# 存储空间的名称，它在 `droplet` 的所有的存储空间中，必须是唯一的\n# 字符串类型 必选\nName = "local"\n\n# 该存储空间是否可写（ read only false 即为可写）\n# 布尔值 默认为 false\nReadOnly = false\n\n# 该存储空间在本地文件系统中的路径\n# 字符串类型 必选\nPath = "/piecestorage/"\n\n')])])]),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v('[PieceStorage]\n[[PieceStorage.S3]]\n# 存储空间的名称，它在 `droplet` 的所有的存储空间中，必须是唯一的\n# 字符串类型 必选\nName = "s3"\n\n# 该存储空间是否可写（ read only false 即为可写）\n# 布尔值 默认为 false\nReadOnly = true\n\n# 对象存储服务的入口\n# 字符串类型 必选\n# 支持单独的EndPoint（"oss-cn-shanghai.aliyuncs.com"）和完整的EndPoint Url（"http://oss-cn-shanghai.aliyuncs.com"）\nEndPoint = "oss-cn-shanghai.aliyuncs.com"\n\n# 对象存储服务的Bucket名称\n# 字符串类型 必选\nBucket = "droplet"\n\n# 指定在Bucket 中的子目录\n# 字符串类型 可选\nSubDir = "dir1/dir2"\n\n# 访问对象存储服务的参数\n# 字符串类型 其中AccessKey，SecretKey必选，token 可选\nAccessKey = "LTAI5t6HiFgsqN6eVJ......"\nSecretKey = "AlFNH9NakUsVjVRxMHaaYP7p......"\nToken = ""\n\n')])])]),t("h2",{attrs:{id:"日志设置"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#日志设置"}},[e._v("#")]),e._v(" 日志设置")]),e._v(" "),t("p",[e._v("配置 "),t("code",[e._v("droplet")]),e._v(" 使用过程中，产生日志存储的位置")]),e._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v('[Journal]\n\n# 日志存储的位置\n# 字符串类型 默认为："journal" (即`DROPLET_REPO`文件夹下面的journal文件夹)\nPath = "journal"\n')])])]),t("h2",{attrs:{id:"dag存储设置"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#dag存储设置"}},[e._v("#")]),e._v(" DAG存储设置")]),e._v(" "),t("p",[e._v("DAG 数据存储的配置")]),e._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v('# 参考 github.com/filecoin-project/dagstore/dagstore.go\n[DAGStore]\n\n# DAG数据存储的根目录\n# 字符串类型 默认为： "<DROPLET_REPO_PATH>/dagstore"\nRootDir = "/root/.droplet/dagstore"\n\n# 可以同时进行索引作业的最大数量\n# 整数类型 默认为5 0表示不限制\nMaxConcurrentIndex = 5\n\n# 可以同时被抓取的最大未封装订单的数量\n# 整数类型 默认为0 0表示不限制\nMaxConcurrentReadyFetches = 0\n\n# 可以被同时调用的存储API的最大数量\n# 整数类型 默认为100\nMaxConcurrencyStorageCalls = 100\n\n# DAG 数据进行垃圾回收的时间间隔\n# 时间字符串 默认为："1m0s"\n# 时间字符串是由数字和时间单位组成的字符串，数字包括整数和小数，合法的单位包括 "ns", "us" (or "µs"), "ms", "s", "m", "h".\nGCInterval = "1m0s"\n\n# 临时文件的存储路径\n# 字符串类型 可选 不设置则使用RooDir目录下的\'transients\'文件夹\nTransient = ""\n\n# 存储扇区索引数据的路径\n# 字符串类型 可选 不设置则使用RooDir目录下的\'index\'文件夹\nIndex = ""\n\n# 不使用本地缓存，直接读取数据源\n# 布尔类型 默认为 false\nUseTransient = false\n')])])]),t("h2",{attrs:{id:"数据检索"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#数据检索"}},[e._v("#")]),e._v(" 数据检索")]),e._v(" "),t("p",[e._v("获取订单中存储的扇区数据时的相关配置")]),e._v(" "),t("h3",{attrs:{id:"retrievalpaymentaddress"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#retrievalpaymentaddress"}},[e._v("#")]),e._v(" [RetrievalPaymentAddress]")]),e._v(" "),t("p",[e._v("获取订单扇区数据时，使用的收款地址")]),e._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v('RetrievalPaymentAddress = ""\n')])])]),t("h2",{attrs:{id:"metric-配置"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#metric-配置"}},[e._v("#")]),e._v(" Metric 配置")]),e._v(" "),t("p",[e._v("配置 Metric 相关的参数")]),e._v(" "),t("div",{staticClass:"language-toml extra-class"},[t("pre",{pre:!0,attrs:{class:"language-toml"}},[t("code",[t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("[")]),t("span",{pre:!0,attrs:{class:"token table class-name"}},[e._v("Metrics")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("]")]),e._v("\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[e._v("# 是否启用 Metric")]),e._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[e._v("# 布尔值 默认为 false")]),e._v("\n"),t("span",{pre:!0,attrs:{class:"token key property"}},[e._v("Enabled")]),e._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("=")]),e._v(" "),t("span",{pre:!0,attrs:{class:"token boolean"}},[e._v("false")]),e._v("\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[e._v("# Metric 导出设置")]),e._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("[")]),t("span",{pre:!0,attrs:{class:"token table class-name"}},[e._v("Metrics.Exporter")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("]")]),e._v("\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[e._v("# Metric 导出的类型")]),e._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[e._v('# 字符串类型 可选值为 "prometheus" 和 "graphite" 默认为 "prometheus"')]),e._v("\n"),t("span",{pre:!0,attrs:{class:"token key property"}},[e._v("Type")]),e._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("=")]),e._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[e._v('"prometheus"')]),e._v("\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[e._v("# Prometheus 导出设置")]),e._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("[")]),t("span",{pre:!0,attrs:{class:"token table class-name"}},[e._v("Metrics.Exporter.Prometheus")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("]")]),e._v("\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[e._v("# 注册器的类型")]),e._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[e._v('# 字符串类型 可选值为 "define" 和 "default" 默认为 "define"')]),e._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[e._v("# define: 空白全新的注册器; default:Prometheus 提供的默认注册器")]),e._v("\n"),t("span",{pre:!0,attrs:{class:"token key property"}},[e._v("RegistryType")]),e._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("=")]),e._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[e._v('"define"')]),e._v("\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[e._v("# 命名空间")]),e._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[e._v('# 字符串类型 默认为 ""')]),e._v("\n"),t("span",{pre:!0,attrs:{class:"token key property"}},[e._v("Namespace")]),e._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("=")]),e._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[e._v('""')]),e._v("\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[e._v("# 监听地址")]),e._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[e._v('# 字符串类型 默认为 "/ip4/0.0.0.0/tcp/4568"')]),e._v("\n"),t("span",{pre:!0,attrs:{class:"token key property"}},[e._v("EndPoint")]),e._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("=")]),e._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[e._v('"/ip4/0.0.0.0/tcp/4568"')]),e._v("\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[e._v("# Metrics 指标的访问路径")]),e._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[e._v('# 字符串类型 默认为 "/debug/metrics"')]),e._v("\n"),t("span",{pre:!0,attrs:{class:"token key property"}},[e._v("Path")]),e._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("=")]),e._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[e._v('"/debug/metrics"')]),e._v("\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[e._v("# Metric 指标聚合的周期")]),e._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[e._v('# 时间字符串 默认为 "10s"')]),e._v("\n"),t("span",{pre:!0,attrs:{class:"token key property"}},[e._v("ReportingPeriod")]),e._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("=")]),e._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[e._v('"10s"')]),e._v("\n\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[e._v("# Graphite 导出设置")]),e._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("[")]),t("span",{pre:!0,attrs:{class:"token table class-name"}},[e._v("Metrics.Exporter.Graphite")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("]")]),e._v("\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[e._v("# 命名空间")]),e._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[e._v('# 字符串类型 默认为 ""')]),e._v("\n"),t("span",{pre:!0,attrs:{class:"token key property"}},[e._v("Namespace")]),e._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("=")]),e._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[e._v('""')]),e._v("\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[e._v("# 监听地址")]),e._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[e._v('# 字符串类型 默认为 "127.0.0.1"')]),e._v("\n"),t("span",{pre:!0,attrs:{class:"token key property"}},[e._v("Host")]),e._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("=")]),e._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[e._v('"127.0.0.1"')]),e._v("\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[e._v("# 监听端口")]),e._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[e._v("# 整数类型 默认为 4568")]),e._v("\n"),t("span",{pre:!0,attrs:{class:"token key property"}},[e._v("Port")]),e._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("=")]),e._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[e._v("4568")]),e._v("\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[e._v("# Metric 指标聚合的周期")]),e._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[e._v('# 时间字符串 默认为 "10s"')]),e._v("\n"),t("span",{pre:!0,attrs:{class:"token key property"}},[e._v("ReportingPeriod")]),e._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("=")]),e._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[e._v('"10s"')]),e._v("\n")])])])])}),[],!1,null,null,null);n.default=s.exports}}]);