<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>å¿«é€Ÿå¯ç”¨ | æ°´æ»´</title>
    <meta name="generator" content="VuePress 1.8.0">
    <link rel="icon" href="/assets/droplet-icon.png">
    <script async="true" src="https://www.googletagmanager.com/gtag/js?id=G-GRVZ8072DQ"></script>
    <script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'G-GRVZ8072DQ');</script>
    <meta name="description" content="æ°´æ»´ï¼ŒåŸVenusè®¢å•æœåŠ¡ï¼Œæ˜¯ä¸€ä¸ªFilecoinå­˜å‚¨è®¢å•è§£å†³æ–¹æ¡ˆ">
    
    <link rel="preload" href="/assets/css/0.styles.5e9c2d8a.css" as="style"><link rel="preload" href="/assets/js/app.c59b3e41.js" as="script"><link rel="preload" href="/assets/js/2.80641b54.js" as="script"><link rel="preload" href="/assets/js/30.c335ae88.js" as="script"><link rel="prefetch" href="/assets/js/10.f067a250.js"><link rel="prefetch" href="/assets/js/11.2a60a7f2.js"><link rel="prefetch" href="/assets/js/12.27a7dfea.js"><link rel="prefetch" href="/assets/js/13.647f3f5f.js"><link rel="prefetch" href="/assets/js/14.092a8cc9.js"><link rel="prefetch" href="/assets/js/15.c8f53e8b.js"><link rel="prefetch" href="/assets/js/16.6ac95f29.js"><link rel="prefetch" href="/assets/js/17.c372edbe.js"><link rel="prefetch" href="/assets/js/18.9d946796.js"><link rel="prefetch" href="/assets/js/19.7051420e.js"><link rel="prefetch" href="/assets/js/20.5deb1620.js"><link rel="prefetch" href="/assets/js/21.0291b2d4.js"><link rel="prefetch" href="/assets/js/22.5781ecad.js"><link rel="prefetch" href="/assets/js/23.ce31993f.js"><link rel="prefetch" href="/assets/js/24.60f1206b.js"><link rel="prefetch" href="/assets/js/25.3f1049dd.js"><link rel="prefetch" href="/assets/js/26.c92c8fce.js"><link rel="prefetch" href="/assets/js/27.a5fb9072.js"><link rel="prefetch" href="/assets/js/28.47c5b8e2.js"><link rel="prefetch" href="/assets/js/29.b5e77913.js"><link rel="prefetch" href="/assets/js/3.2c2f4ccd.js"><link rel="prefetch" href="/assets/js/31.5e8e4af1.js"><link rel="prefetch" href="/assets/js/32.8a91c4aa.js"><link rel="prefetch" href="/assets/js/33.d5b3e42e.js"><link rel="prefetch" href="/assets/js/34.4e5045df.js"><link rel="prefetch" href="/assets/js/35.08bcf08f.js"><link rel="prefetch" href="/assets/js/36.953e7df3.js"><link rel="prefetch" href="/assets/js/37.48eae3a5.js"><link rel="prefetch" href="/assets/js/38.dec584ec.js"><link rel="prefetch" href="/assets/js/4.06777882.js"><link rel="prefetch" href="/assets/js/5.d51f6b5b.js"><link rel="prefetch" href="/assets/js/6.93b48b5a.js"><link rel="prefetch" href="/assets/js/7.48216839.js"><link rel="prefetch" href="/assets/js/8.15913162.js"><link rel="prefetch" href="/assets/js/9.dd782b6b.js">
    <link rel="stylesheet" href="/assets/css/0.styles.5e9c2d8a.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/zh/" class="home-link router-link-active"><img src="/assets/droplet-icon.png" alt="æ°´æ»´" class="logo"> <span class="site-name can-hide">æ°´æ»´</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/zh/intro/" class="nav-link">
  åŠŸèƒ½ä»‹ç»
</a></div><div class="nav-item"><a href="/zh/operation/" aria-current="page" class="nav-link router-link-exact-active router-link-active">
  éƒ¨ç½²/è¿ç»´
</a></div><div class="nav-item"><a href="/zh/developer/" class="nav-link">
  ç ”å‘/è®¾è®¡
</a></div><div class="nav-item"><a href="/zh/about/" class="nav-link">
  å…³äº
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Select language" class="dropdown-title"><span class="title">é€‰æ‹©è¯­è¨€</span> <span class="arrow down"></span></button> <button type="button" aria-label="Select language" class="mobile-dropdown-title"><span class="title">é€‰æ‹©è¯­è¨€</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/" class="nav-link">
  English
</a></li><li class="dropdown-item"><!----> <a href="/zh/operation/" aria-current="page" class="nav-link router-link-exact-active router-link-active">
  ç®€ä½“ä¸­æ–‡
</a></li></ul></div></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/zh/intro/" class="nav-link">
  åŠŸèƒ½ä»‹ç»
</a></div><div class="nav-item"><a href="/zh/operation/" aria-current="page" class="nav-link router-link-exact-active router-link-active">
  éƒ¨ç½²/è¿ç»´
</a></div><div class="nav-item"><a href="/zh/developer/" class="nav-link">
  ç ”å‘/è®¾è®¡
</a></div><div class="nav-item"><a href="/zh/about/" class="nav-link">
  å…³äº
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Select language" class="dropdown-title"><span class="title">é€‰æ‹©è¯­è¨€</span> <span class="arrow down"></span></button> <button type="button" aria-label="Select language" class="mobile-dropdown-title"><span class="title">é€‰æ‹©è¯­è¨€</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/" class="nav-link">
  English
</a></li><li class="dropdown-item"><!----> <a href="/zh/operation/" aria-current="page" class="nav-link router-link-exact-active router-link-active">
  ç®€ä½“ä¸­æ–‡
</a></li></ul></div></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>éƒ¨ç½²</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/zh/operation/" aria-current="page" class="active sidebar-link">å¿«é€Ÿå¯ç”¨</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/zh/operation/#æ¦‚è¿°" class="sidebar-link">æ¦‚è¿°</a></li><li class="sidebar-sub-header"><a href="/zh/operation/#é…ç½®å¯åŠ¨venus-market" class="sidebar-link">é…ç½®å¯åŠ¨venus-market</a></li><li class="sidebar-sub-header"><a href="/zh/operation/#venus-marketä»£ç†libp2pç›‘å¬" class="sidebar-link">venus-marketä»£ç†libp2pç›‘å¬</a></li><li class="sidebar-sub-header"><a href="/zh/operation/#æŒ‚å•" class="sidebar-link">æŒ‚å•</a></li><li class="sidebar-sub-header"><a href="/zh/operation/#é…ç½®å¯åŠ¨market-client" class="sidebar-link">é…ç½®å¯åŠ¨market-client</a></li><li class="sidebar-sub-header"><a href="/zh/operation/#å­˜å‚¨è®¢å•" class="sidebar-link">å­˜å‚¨è®¢å•</a></li><li class="sidebar-sub-header"><a href="/zh/operation/#æäº¤æ•°æ®æ£€ç´¢è®¢å•" class="sidebar-link">æäº¤æ•°æ®æ£€ç´¢è®¢å•</a></li></ul></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>é…ç½®</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/zh/operation/market-client-config.html" class="sidebar-link">droplet-client é…ç½®</a></li><li><a href="/zh/operation/market-config.html" class="sidebar-link">droplet é…ç½®</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>è¿ç»´</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/zh/operation/prep-datasets.html" class="sidebar-link">å¤§æ•°æ®é›†å‡†å¤‡</a></li><li><a href="/zh/operation/migrate-offline-deal.html" class="sidebar-link">è¿ç§»ç¦»çº¿è®¢å•</a></li><li><a href="/zh/operation/extend-claim.html" class="sidebar-link">DCè®¢å•è¿‡ç»­æœŸ</a></li><li><a href="/zh/operation/deal-filter.html" class="sidebar-link">è®¢å•è¿‡æ»¤å™¨</a></li><li><a href="/zh/operation/metrics.html" class="sidebar-link">Metrics æŒ‡æ ‡</a></li><li><a href="/zh/operation/rebuild-signature.html" class="sidebar-link">ç­¾åé‡æ„</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="å¿«é€Ÿå¯ç”¨"><a href="#å¿«é€Ÿå¯ç”¨" class="header-anchor">#</a> å¿«é€Ÿå¯ç”¨</h1> <h2 id="æ¦‚è¿°"><a href="#æ¦‚è¿°" class="header-anchor">#</a> æ¦‚è¿°</h2> <p><code>venus-market</code> æ˜¯ <code>venus</code> ç³»ç»Ÿä¸­çš„å¸‚åœºæœåŠ¡ç»„ä»¶ï¼Œç”±ä¸¤éƒ¨åˆ†ç»„æˆï¼š<code>venus-market</code> å’Œ <code>market-client</code>ï¼Œé€šä¿—ç†è§£ä¸ºå¸‚åœºæœåŠ¡ç«¯å’Œå®¢æˆ·ç«¯ã€‚</p> <ul><li><p><code>venus-market</code> çš„æœåŠ¡å¯¹è±¡æ˜¯å­˜å‚¨æä¾›å•†ï¼›</p></li> <li><p><code>market-client</code> çš„æœåŠ¡å¯¹è±¡æ˜¯æœ‰æ£€ç´¢éœ€æ±‚æˆ–å­˜å‚¨éœ€æ±‚çš„ç”¨æˆ·ã€‚</p></li></ul> <p><code>venus-market</code> çš„å¸‚åœºæœåŠ¡åˆ†ä¸ºå­˜å‚¨å¸‚åœºå’Œæ£€ç´¢å¸‚åœºï¼Œå…¶ä¸€èˆ¬æµç¨‹å¦‚ä¸‹ï¼š</p> <p>å­˜å‚¨æµç¨‹ï¼š</p> <table><thead><tr><th>é˜¶æ®µ</th> <th>æ­¥éª¤</th> <th>è¯´æ˜</th></tr></thead> <tbody><tr><td>å¯åŠ¨ <code>venus-market</code> å’Œ <code>market-client</code></td> <td>1. é…ç½®å’Œå¯åŠ¨<a href="#%E9%85%8D%E7%BD%AE%E5%90%AF%E5%8A%A8venus-market">venus-market</a> <br> 2. é…ç½®å’Œå¯åŠ¨<a href="#%E9%85%8D%E7%BD%AE%E5%90%AF%E5%8A%A8market-client">market-client</a></td> <td></td></tr> <tr><td>ä»£ç† <code>miners</code> çš„ <code>libp2p</code> ç›‘å¬æœåŠ¡</td> <td>é€šè¿‡ <code>venus-market</code> <a href="#venus-market%E4%BB%A3%E7%90%86libp2p%E7%9B%91%E5%90%AC">ä»£ç† <code>miners</code> çš„ <code>libp2p</code> ç›‘å¬æœåŠ¡</a></td> <td></td></tr> <tr><td>ä¸º <code>miners</code> æŒ‚å•</td> <td>é€šè¿‡ <code>venus-market</code> <a href="#%E6%8C%82%E5%8D%95">æŒ‚å•</a></td> <td></td></tr> <tr><td>æŒ‡å®š <code>miner</code> å‘å•</td> <td>1. é€šè¿‡ <code>market-client</code> <a href="#%E5%AF%BC%E5%85%A5%E5%BE%85%E5%AD%98%E5%82%A8%E7%9A%84%E6%95%B0%E6%8D%AE">å¯¼å…¥å¾…å­˜å‚¨çš„æ•°æ®</a> <br> 2. æ ¹æ®éœ€æ±‚<a href="#%E9%80%89%E6%8B%A9%E6%8C%82%E5%8D%95">é€‰æ‹©åˆé€‚çš„æŒ‚å•</a> <br> 3. <a href="#%E5%8F%91%E8%B5%B7%E5%AD%98%E5%82%A8%E8%AE%A2%E5%8D%95">å‘èµ·å­˜å‚¨è®¢å•</a></td> <td>å‘å•ä¹‹åï¼Œéœ€è¦ä¸€å®šæ—¶é—´æ‰§è¡Œè®¢å•äº¤æ˜“æµç¨‹ï¼Œè®¢å•è¢«ç¡®è®¤åï¼Œå­˜å‚¨æä¾›å•†å¯¹è®¢å•ä¸­æ•°æ®è¿›è¡Œå°è£…å¹¶æäº¤è¯æ˜ï¼Œ<code>venus-market</code> è´Ÿè´£è·Ÿè¸ªè®¢å•çŠ¶æ€ã€‚</td></tr></tbody></table> <p>æ£€ç´¢æµç¨‹ï¼š</p> <table><thead><tr><th>é˜¶æ®µ</th> <th>æ­¥éª¤</th> <th>è¯´æ˜</th></tr></thead> <tbody><tr><td>å¯åŠ¨ <code>venus-market</code> å’Œ <code>market-client</code></td> <td>1. é…ç½®å’Œå¯åŠ¨<a href="#%E9%85%8D%E7%BD%AE%E5%90%AF%E5%8A%A8venus-market">venus-market</a> <br> 2. é…ç½®å’Œå¯åŠ¨<a href="#%E9%85%8D%E7%BD%AE%E5%90%AF%E5%8A%A8market-client">market-client</a></td> <td></td></tr> <tr><td>è®¾ç½®æ£€ç´¢ä»·æ ¼åŠæ”¶æ¬¾åœ°å€</td> <td>å­˜å‚¨ä¾›åº”å•†é€šè¿‡ <code>venus-market</code> <a href="#%E6%A3%80%E7%B4%A2%E6%8C%82%E5%8D%95">è®¾ç½®æ£€ç´¢æŒ‚å•</a></td> <td></td></tr> <tr><td>æäº¤æ•°æ®æ£€ç´¢è®¢å•</td> <td><a href="#%E6%8F%90%E4%BA%A4%E6%95%B0%E6%8D%AE%E6%A3%80%E7%B4%A2%E8%AE%A2%E5%8D%95">æäº¤æ•°æ®æ£€ç´¢è®¢å•</a></td> <td>æäº¤æ•°æ®æ£€ç´¢è®¢å•ä¹‹åï¼Œå¼€å§‹æ‰§è¡Œæ£€ç´¢äº¤æµæµç¨‹ï¼Œä¼šæŒ‰ç…§åè®®åˆ†æ‰¹æ¬¡å›ä¼ æ•°æ®å¹¶å°†æ‰€éœ€è´¹ç”¨è½¬ç»™æ”¶æ¬¾åœ°å€ã€‚</td></tr></tbody></table> <p>ğŸ’ <strong>æ— è®ºæ˜¯å­˜å‚¨äº¤æ˜“è¿˜æ˜¯æ£€ç´¢äº¤æ˜“ï¼Œå…¶åè®®çš„æ‰§è¡Œè¿‡ç¨‹éƒ½æ˜¯è‡ªåŠ¨çš„ï¼ŒæœŸé—´ä¼šå‘é€æ¶ˆæ¯ä¸Šé“¾ï¼Œæ•…éœ€ä¿è¯äº¤æ˜“åŒæ–¹çš„æ¶ˆæ¯éƒ½å¯ä»¥æ­£å¸¸ç­¾åã€‚äº¤æ˜“è¿‡ç¨‹å­˜åœ¨å¿…è¦çš„ <code>fil</code> æµè½¬ï¼Œç›¸å…³åœ°å€éœ€è¦æœ‰è¶³å¤Ÿçš„ä½™é¢ï¼Œå¦åˆ™äº¤æ˜“å°†æ— æ³•è¾¾æˆã€‚</strong></p> <h2 id="é…ç½®å¯åŠ¨venus-market"><a href="#é…ç½®å¯åŠ¨venus-market" class="header-anchor">#</a> é…ç½®å¯åŠ¨venus-market</h2> <h3 id="åˆå§‹åŒ–"><a href="#åˆå§‹åŒ–" class="header-anchor">#</a> åˆå§‹åŒ–</h3> <ul><li>é“¾ä¸Šæ¨¡å¼</li></ul> <p>ä½œä¸ºé“¾æœåŠ¡ä¸­çš„ä¸€ä¸ªç»„ä»¶ï¼Œé…åˆ<code>venus-auth</code>ã€<code>venus</code>ã€ <code>venus-messager</code>ã€<code>venus-gateway</code>ç­‰ç»„ä»¶ä¸€èµ·ä¸ºæ³¨å†Œåˆ°é“¾æœåŠ¡çš„ <code>miner</code> æä¾›å¸‚åœºæœåŠ¡ã€‚</p> <div class="language- extra-class"><pre class="language-text"><code>./venus-market run \
--node-url=/ip4/&lt;ip&gt;/tcp/&lt;port&gt; \
--auth-url=http://&lt;ip&gt;:&lt;port&gt; \
--gateway-url=/ip4/&lt;ip&gt;/tcp/&lt;port&gt; \
--messager-url=/ip4/&lt;ip&gt;/tcp/&lt;port&gt; \
--cs-token=&lt;shared-token&gt; \
--signer-type=&quot;gateway&quot;
</code></pre></div><p>ç”Ÿæˆçš„æœåŠ¡ç»„ä»¶é…ç½®å‚è€ƒ:</p> <div class="language-toml extra-class"><pre class="language-toml"><code><span class="token punctuation">[</span><span class="token table class-name">Node</span><span class="token punctuation">]</span>
  <span class="token key property">Url</span> <span class="token punctuation">=</span> <span class="token string">&quot;/ip4/192.168.200.151/tcp/3455&quot;</span>
  <span class="token key property">Token</span> <span class="token punctuation">=</span> <span class="token string">&quot;eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJuYW1lIjoic2hhcmVkLXRva2VuIiwicGVybSI6ImFkbWluIiwiZXh0IjoiIn0.aARqJ_7FSe1KakkBhWlFvsYm-xBLAXBnl9SvTfqsVe8&quot;</span>

<span class="token punctuation">[</span><span class="token table class-name">Messager</span><span class="token punctuation">]</span>
  <span class="token key property">Url</span> <span class="token punctuation">=</span> <span class="token string">&quot;/ip4/127.0.0.1/tcp/39812&quot;</span>
  <span class="token key property">Token</span> <span class="token punctuation">=</span> <span class="token string">&quot;eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJuYW1lIjoic2hhcmVkLXRva2VuIiwicGVybSI6ImFkbWluIiwiZXh0IjoiIn0.aARqJ_7FSe1KakkBhWlFvsYm-xBLAXBnl9SvTfqsVe8&quot;</span>

<span class="token punctuation">[</span><span class="token table class-name">Signer</span><span class="token punctuation">]</span>
  <span class="token key property">Type</span> <span class="token punctuation">=</span> <span class="token string">&quot;gateway&quot;</span>
  <span class="token key property">Url</span> <span class="token punctuation">=</span> <span class="token string">&quot;/ip4/127.0.0.1/tcp/45132&quot;</span>
  <span class="token key property">Token</span> <span class="token punctuation">=</span> <span class="token string">&quot;eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJuYW1lIjoic2hhcmVkLXRva2VuIiwicGVybSI6ImFkbWluIiwiZXh0IjoiIn0.aARqJ_7FSe1KakkBhWlFvsYm-xBLAXBnl9SvTfqsVe8&quot;</span>

<span class="token punctuation">[</span><span class="token table class-name">AuthNode</span><span class="token punctuation">]</span>
  <span class="token key property">Url</span> <span class="token punctuation">=</span> <span class="token string">&quot;http://127.0.0.1:8989&quot;</span>
  <span class="token key property">Token</span> <span class="token punctuation">=</span> <span class="token string">&quot;eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJuYW1lIjoic2hhcmVkLXRva2VuIiwicGVybSI6ImFkbWluIiwiZXh0IjoiIn0.aARqJ_7FSe1KakkBhWlFvsYm-xBLAXBnl9SvTfqsVe8&quot;</span>
</code></pre></div><p>ğŸ’ <strong><code>shared-token</code> æ˜¯ç”¨äºè®¿é—®å…¶ä»–é“¾æœåŠ¡ç»„ä»¶ <code>API</code> æ—¶çš„æƒé™éªŒè¯ï¼Œç”± <code>venus-auth</code> ç®¡ç†ï¼Œéœ€è¦ <code>admin</code> æƒé™ã€‚å…·ä½“è¯·å‚è€ƒ <a href="https://github.com/filecoin-project/venus-docs/blob/master/docs/zh/cs/deploy-a-cs.md#user%E5%8F%8Atoken%E7%94%9F%E6%88%90" target="_blank" rel="noopener noreferrer">venus-auth token<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></strong></p> <ul><li>é“¾ä¸‹æ¨¡å¼</li></ul> <p>é…åˆ <code>lotus fullnode</code> çš„å¯åŠ¨æ–¹å¼:</p> <div class="language- extra-class"><pre class="language-text"><code>./venus-market run \
--node-url=/ip4/&lt;ip&gt;/tcp/&lt;port&gt; \
--cs-token=&lt;token of lotus&gt; \
--signer-type=&quot;lotusnode&quot;
</code></pre></div><p>ç”Ÿæˆçš„æœåŠ¡ç»„ä»¶é…ç½®å‚è€ƒ:</p> <div class="language-toml extra-class"><pre class="language-toml"><code><span class="token punctuation">[</span><span class="token table class-name">Node</span><span class="token punctuation">]</span>
  <span class="token key property">Url</span> <span class="token punctuation">=</span> <span class="token string">&quot;/ip4/127.0.0.1/tcp/1234&quot;</span>
  <span class="token key property">Token</span> <span class="token punctuation">=</span> <span class="token string">&quot;eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJBbGxvdyI6WyJyZWFkIiwid3JpdGUiLCJzaWduIiwiYWRtaW4iXX0.Ne3JsfHHhN6BgDtdsvLYfUaRC3eJPH_7KrBsMRBdplc&quot;</span>

<span class="token punctuation">[</span><span class="token table class-name">Messager</span><span class="token punctuation">]</span>
  <span class="token key property">Url</span> <span class="token punctuation">=</span> <span class="token string">&quot;&quot;</span>
  <span class="token key property">Token</span> <span class="token punctuation">=</span> <span class="token string">&quot;&quot;</span>

<span class="token punctuation">[</span><span class="token table class-name">Signer</span><span class="token punctuation">]</span>
  <span class="token key property">Type</span> <span class="token punctuation">=</span> <span class="token string">&quot;lotusnode&quot;</span>
  <span class="token key property">Url</span> <span class="token punctuation">=</span> <span class="token string">&quot;/ip4/127.0.0.1/tcp/1234&quot;</span>
  <span class="token key property">Token</span> <span class="token punctuation">=</span> <span class="token string">&quot;eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJBbGxvdyI6WyJyZWFkIiwid3JpdGUiLCJzaWduIiwiYWRtaW4iXX0.Ne3JsfHHhN6BgDtdsvLYfUaRC3eJPH_7KrBsMRBdplc&quot;</span>

<span class="token punctuation">[</span><span class="token table class-name">AuthNode</span><span class="token punctuation">]</span>
  <span class="token key property">Url</span> <span class="token punctuation">=</span> <span class="token string">&quot;&quot;</span>
  <span class="token key property">Token</span> <span class="token punctuation">=</span> <span class="token string">&quot;&quot;</span>
</code></pre></div><p>ä½¿ç”¨é“¾æœåŠ¡å’Œ <code>venus-wallet</code> çš„å¯åŠ¨æ–¹å¼:</p> <div class="language- extra-class"><pre class="language-text"><code>./venus-market run \
--auth-url=http://&lt;ip&gt;:&lt;port&gt; \
--node-url=/ip4/&lt;ip&gt;/tcp/&lt;port&gt; \
--messager-url=/ip4/&lt;ip&gt;/tcp/&lt;port&gt; \
--cs-token=&lt;token of write-authority&gt; \
--signer-url=/ip4/&lt;ip&gt;/tcp/&lt;port&gt; \
--signer-token=&lt;token of venus-wallet&gt; \
--signer-type=&quot;wallet&quot;
</code></pre></div><p>ç”Ÿæˆçš„æœåŠ¡ç»„ä»¶é…ç½®å‚è€ƒ:</p> <div class="language-toml extra-class"><pre class="language-toml"><code><span class="token punctuation">[</span><span class="token table class-name">Node</span><span class="token punctuation">]</span>
  <span class="token key property">Url</span> <span class="token punctuation">=</span> <span class="token string">&quot;/ip4/192.168.200.151/tcp/3455&quot;</span>
  <span class="token key property">Token</span> <span class="token punctuation">=</span> <span class="token string">&quot;eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJuYW1lIjoic2hhcmVkLXRva2VuIiwicGVybSI6ImFkbWluIiwiZXh0IjoiIn0.aARqJ_7FSe1KakkBhWlFvsYm-xBLAXBnl9SvTfqsVe8&quot;</span>

<span class="token punctuation">[</span><span class="token table class-name">Messager</span><span class="token punctuation">]</span>
  <span class="token key property">Url</span> <span class="token punctuation">=</span> <span class="token string">&quot;/ip4/127.0.0.1/tcp/39812&quot;</span>
  <span class="token key property">Token</span> <span class="token punctuation">=</span> <span class="token string">&quot;eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJuYW1lIjoic2hhcmVkLXRva2VuIiwicGVybSI6ImFkbWluIiwiZXh0IjoiIn0.aARqJ_7FSe1KakkBhWlFvsYm-xBLAXBnl9SvTfqsVe8&quot;</span>

<span class="token punctuation">[</span><span class="token table class-name">Signer</span><span class="token punctuation">]</span>
  <span class="token key property">Type</span> <span class="token punctuation">=</span> <span class="token string">&quot;wallet&quot;</span>
  <span class="token key property">Url</span> <span class="token punctuation">=</span> <span class="token string">&quot;/ip4/127.0.0.1/tcp/5678/http&quot;</span>
  <span class="token key property">Token</span> <span class="token punctuation">=</span> <span class="token string">&quot;eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJBbGxvdyI6WyJyZWFkIiwid3JpdGUiLCJzaWduIl19.IVBGlmRW__6g4QGbb1D1Jtr1oyMM6Sqs1tj1GDGR5EQ&quot;</span>

<span class="token punctuation">[</span><span class="token table class-name">AuthNode</span><span class="token punctuation">]</span>
  <span class="token key property">Url</span> <span class="token punctuation">=</span> <span class="token string">&quot;http://127.0.0.1:8989&quot;</span>
  <span class="token key property">Token</span> <span class="token punctuation">=</span> <span class="token string">&quot;eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJuYW1lIjoic2hhcmVkLXRva2VuIiwicGVybSI6ImFkbWluIiwiZXh0IjoiIn0.aARqJ_7FSe1KakkBhWlFvsYm-xBLAXBnl9SvTfqsVe8&quot;</span>
</code></pre></div><p>ğŸ’ <strong>ç­¾åç”¨ç‹¬ç«‹çš„<code>venus-wallet</code>ç»„ä»¶ï¼Œåˆ™é…ç½®ä¸º <code>venus-wallet</code>çš„ç›‘å¬åœ°å€åŠå…·æœ‰ç­¾åæƒé™çš„ <code>token</code>.</strong></p> <p><code>venus-wallet</code> ç”Ÿæˆå…·æœ‰ç­¾åæƒé™çš„ <code>token</code>:</p> <div class="language-bash extra-class"><pre class="language-bash"><code>$ ./venus-wallet auth api-info --perm<span class="token operator">=</span>sign
<span class="token operator">&gt;</span> eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJBbGxvdyI6WyJyZWFkIiwid3JpdGUiLCJzaWduIl19.Vr-OP7RNOozf6XXZuahpk-ZGA7IDa5NJjmU9L_znJ-0:/ip4/127.0.0.1/tcp/5678/http
</code></pre></div><p>ğŸ’ <strong>åˆå§‹åŒ–å‘½ä»¤æ‰§è¡ŒæˆåŠŸåå°†ä¼šç”Ÿæˆ<code>venus-market repo</code>,åœ¨ä½¿ç”¨æ—¶éœ€æ ¹æ®å®é™…ç¯å¢ƒé…ç½®ã€‚</strong></p> <p><code>venus-market</code> é¦–æ¬¡å¯åŠ¨æ—¶ä¼šç”Ÿæˆé…ç½®é¡¹ï¼Œé»˜è®¤ç›®å½•ä¸º: <code>~/.venusmarket/config.toml</code>,æ¥ä¸‹æ¥æˆ‘ä»¬å°†ä»‹ç»å¸¸ç”¨é…ç½®é¡¹ã€‚</p> <h3 id="é€šç”¨é…ç½®"><a href="#é€šç”¨é…ç½®" class="header-anchor">#</a> é€šç”¨é…ç½®</h3> <p><code>venus-wallet</code> çš„é…ç½®é¡¹è¯´æ˜å‚è€ƒ <a href="/zh/operation/venus-marketé…ç½®è§£é‡Š.html">venus-marketé…ç½®</a>ï¼Œè¿™é‡Œæˆ‘ä»¬å¯¹æ¯”è¾ƒå¸¸ç”¨çš„é…ç½®é¡¹è¿›è¡Œè¯´æ˜ã€‚</p> <p><em>tips:</em> ä¿®æ”¹å®Œé…ç½®æ–‡ä»¶ä¹‹åéœ€è¦é‡å¯<code>venus-market</code>æœåŠ¡ï¼š</p> <div class="language-bash extra-class"><pre class="language-bash"><code>$ <span class="token function">nohup</span> ./venus-market run <span class="token operator">&gt;</span> market.log <span class="token operator"><span class="token file-descriptor important">2</span>&gt;</span><span class="token file-descriptor important">&amp;1</span> <span class="token operator">&amp;</span>
</code></pre></div><blockquote><p>å·²ç»ç”Ÿæˆ <code>repo</code> ä¹‹åï¼Œåˆå§‹åŒ–æ‰€éœ€çš„å‚æ•°è¢«å†™å…¥é…ç½®æ–‡ä»¶ï¼Œæ•…åç»­å¯åŠ¨æ— éœ€å†åŠ ã€‚</p></blockquote> <h4 id="é“¾æœåŠ¡é…ç½®"><a href="#é“¾æœåŠ¡é…ç½®" class="header-anchor">#</a> é“¾æœåŠ¡é…ç½®</h4> <ul><li>åŒ…æ‹¬ï¼šåŒæ­¥èŠ‚ç‚¹ï¼Œæ¶ˆæ¯èŠ‚ç‚¹ï¼Œç­¾åèŠ‚ç‚¹åŠæˆæƒèŠ‚ç‚¹ã€‚</li></ul> <div class="language-yuml extra-class"><pre class="language-text"><code>[Node]
  Url = &quot;/ip4/192.168.200.21/tcp/3453&quot;
  Token = &quot;eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJuYW1lIjoiemwiLCJwZXJtIjoiYWRtaW4iLCJleHQiOiIifQ.3u-PInSUmX-8f6Z971M7JBCHYgFVQrvwUjJfFY03ouQ&quot;
[Messager]
  Url = &quot;/ip4/192.168.200.21/tcp/39812&quot;
  Token = &quot;eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJuYW1lIjoiemwiLCJwZXJtIjoiYWRtaW4iLCJleHQiOiIifQ.3u-PInSUmX-8f6Z971M7JBCHYgFVQrvwUjJfFY03ouQ&quot;
[Signer]
  Type = &quot;gateway&quot;
  Url = &quot;/ip4/192.168.200.21/tcp/45132&quot;
  Token = &quot;eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJuYW1lIjoiemwiLCJwZXJtIjoiYWRtaW4iLCJleHQiOiIifQ.3u-PInSUmX-8f6Z971M7JBCHYgFVQrvwUjJfFY03ouQ&quot;
[AuthNode]
  Url = &quot;http://192.168.200.21:8989&quot;
  Token = &quot;eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJuYW1lIjoiemwiLCJwZXJtIjoiYWRtaW4iLCJleHQiOiIifQ.3u-PInSUmX-8f6Z971M7JBCHYgFVQrvwUjJfFY03ouQ&quot;
</code></pre></div><h4 id="api-ç›‘å¬é…ç½®"><a href="#api-ç›‘å¬é…ç½®" class="header-anchor">#</a> <code>API</code> ç›‘å¬é…ç½®</h4> <p><code>venus-market</code> é»˜è®¤ç›‘å¬ç«¯å£ä¸º <code>127.0.0.1:41235</code>, ä¸ºäº†æ”¯æŒä¸åŒç½‘ç»œçš„è®¿é—®è¯·æ±‚, éœ€è¦ä¿®æ”¹<code>API</code>çš„ç›‘å¬åœ°å€:</p> <div class="language-yuml extra-class"><pre class="language-text"><code>[API]
ListenAddress = &quot;/ip4/0.0.0.0/tcp/41235&quot;
</code></pre></div><h4 id="publishmsgperiod-é…ç½®"><a href="#publishmsgperiod-é…ç½®" class="header-anchor">#</a> <code>PublishMsgPeriod</code> é…ç½®</h4> <p><code>venus-market</code> åœ¨æ”¶åˆ° <code>market-client</code> çš„è®¢å•æ—¶, å¹¶ä¸ä¼šé©¬ä¸Šå°±å‘å¸ƒ <code>ClientDealProposal</code> æ¶ˆæ¯,ä¼šç­‰å¾…ä¸€å®šçš„æ—¶é—´, ç”±é…ç½®æ–‡ä»¶ä¸­çš„ <code>PublishMsgPeriod</code> é¡¹æ¥æ§åˆ¶ï¼Œåœ¨æµ‹è¯•æ—¶å¯ä»¥å°†æ­¤é¡¹è®¾ç½®ä¸ºè¾ƒå°å€¼å‡å°‘ç­‰å¾…æ—¶é—´ã€‚ä¸‹é¢çš„è®¾ç½®ï¼Œå°†ç­‰å¾…æ—¶é—´è®¾ç½®ä¸º10ç§’ã€‚</p> <div class="language-yuml extra-class"><pre class="language-text"><code>PublishMsgPeriod = &quot;10s&quot;
</code></pre></div><h4 id="piecestorage-é…ç½®"><a href="#piecestorage-é…ç½®" class="header-anchor">#</a> <code>PieceStorage</code> é…ç½®</h4> <p>ç›®å‰ <code>venus-market</code> æ”¯æŒä¸¤ç§ <code>Piece</code> æ•°æ®çš„å­˜å‚¨æ¨¡å¼ï¼š</p> <ul><li>æ–‡ä»¶ç³»ç»Ÿ</li> <li>å¯¹è±¡å­˜å‚¨</li></ul> <div class="language-yuml extra-class"><pre class="language-text"><code>[PieceStorage]
  [[PieceStorage.Fs]]
    Name = &quot;local&quot;
    Enable = true
    Path = &quot;/mnt/pieces&quot;
  [[PieceStorage.S3]]
    Name = &quot;oss&quot;
    Enable = false
    EndPoint = &quot;&quot;
    AccessKey = &quot;&quot;
    SecretKey = &quot;&quot;
    Token = &quot;&quot;
</code></pre></div><p>ä¹Ÿå¯ä»¥é€šè¿‡å‘½ä»¤é…ç½®ï¼š</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token comment"># æœ¬åœ°æ–‡ä»¶ç³»ç»Ÿå­˜å‚¨</span>
./venus-market piece-storage add-fs --path<span class="token operator">=</span><span class="token string">&quot;/piece/storage/path&quot;</span> --name<span class="token operator">=</span><span class="token string">&quot;local&quot;</span>

<span class="token comment"># å¯¹è±¡å­˜å‚¨</span>
./venus-market piece-storage add-s3 --endpoint<span class="token operator">=</span><span class="token operator">&lt;</span>url<span class="token operator">&gt;</span> --name<span class="token operator">=</span><span class="token string">&quot;oss&quot;</span>
</code></pre></div><h4 id="miners-é…ç½®"><a href="#miners-é…ç½®" class="header-anchor">#</a> <code>Miners</code> é…ç½®</h4> <p><code>venus-market</code> æœåŠ¡çš„çŸ¿å·¥åŠæ¯ä¸ªçŸ¿å·¥çš„å‚æ•°ï¼Œé…ç½®å¦‚ä¸‹ï¼š</p> <div class="language- extra-class"><pre class="language-text"><code>[[Miners]]
  Addr = &quot;f01000&quot;
  Account = &quot;testuser01&quot;
  
  ConsiderOnlineStorageDeals = true
  ConsiderOfflineStorageDeals = true
  ConsiderOnlineRetrievalDeals = true
  ConsiderOfflineRetrievalDeals = true
  ConsiderVerifiedStorageDeals = true
  ConsiderUnverifiedStorageDeals = true
  PieceCidBlocklist = []
  ExpectedSealDuration = &quot;24h0m0s&quot;
  MaxDealStartDelay = &quot;336h0m0s&quot;
  PublishMsgPeriod = &quot;1h0m0s&quot;
  MaxDealsPerPublishMsg = 8
  MaxProviderCollateralMultiplier = 2
  Filter = &quot;&quot;
  RetrievalFilter = &quot;&quot;
  TransferPath = &quot;&quot;
  MaxPublishDealsFee = &quot;0 FIL&quot;
  MaxMarketBalanceAddFee = &quot;0 FIL&quot;
  [CommonProviderConfig.RetrievalPricing]
    Strategy = &quot;default&quot;
    [CommonProviderConfig.RetrievalPricing.Default]
      VerifiedDealsFreeTransfer = true
    [CommonProviderConfig.RetrievalPricing.External]
      Path = &quot;&quot;
    [CommonProviderConfig.AddressConfig]
      DisableWorkerFallback = false
</code></pre></div><div class="custom-block tip"><p class="custom-block-title">æç¤º</p> <p>å¦‚æœæœ‰å¤šä¸ªçŸ¿å·¥ï¼Œå°†ä¸Šè¿°é…ç½®æ‹·è´ä¸€ä»½å³å¯ã€‚<em><strong>å¦‚æœçŸ¿å·¥æ¯”è¾ƒå¤šï¼Œé‚£é…ç½®æ–‡ä»¶ä¼šå¾ˆé•¿ï¼Œè€ƒè™‘ä¼˜åŒ–ï¼Ÿ</strong></em></p></div> <h2 id="venus-marketä»£ç†libp2pç›‘å¬"><a href="#venus-marketä»£ç†libp2pç›‘å¬" class="header-anchor">#</a> venus-marketä»£ç†libp2pç›‘å¬</h2> <p>å°† <code>venus-market</code> è®¾ç½®ä¸º <code>miner</code> çš„ <code>libp2p</code> ç›‘å¬ä»£ç†å°±æ˜¯å°†ç‰¹å®š <code>miner</code> çš„å¸‚åœºæœåŠ¡çš„å…¥å£è®¾ç½®ä¸ºå½“å‰è¿è¡Œçš„ <code>venus-market</code> å®ä¾‹ã€‚</p> <ul><li>æŸ¥è¯¢ <code>venus-market</code> çš„å¯¹ç­‰èŠ‚ç‚¹ç›‘å¬åœ°å€</li></ul> <div class="language-bash extra-class"><pre class="language-bash"><code>./venus-market net listen

/ip4/127.0.0.1/tcp/58418/p2p/12D3KooWQftXTGFBKooKuyaNkugapUzi4VmjxEKTgkpsNCQufKBK
/ip4/192.168.19.67/tcp/58418/p2p/12D3KooWQftXTGFBKooKuyaNkugapUzi4VmjxEKTgkpsNCQufKBK
/ip6/::1/tcp/49770/p2p/12D3KooWQftXTGFBKooKuyaNkugapUzi4VmjxEKTgkpsNCQufKBK
</code></pre></div><ul><li>å°† <code>miners</code> çš„ <code>Mutiaddrs</code> å’Œ <code>peerid</code> è®¾ç½®ä¸º <code>venus-market</code> çš„ <code>Mutiaddrs</code> å’Œ <code>peerid</code></li></ul> <div class="language-bash extra-class"><pre class="language-bash"><code>./venus-market actor set-addrs --miner<span class="token operator">=</span>t01041 /ip4/192.168.19.67/tcp/58418
Requested multiaddrs change <span class="token keyword">in</span> message bafy2bzaceceqgxmiledunzjwbajpghzzn4iibvxhoifsrz4q2grzsirgznzdg

./venus-market actor set-peer-id --miner<span class="token operator">=</span>f01041 12D3KooWQftXTGFBKooKuyaNkugapUzi4VmjxEKTgkpsNCQufKBK
  Requested peerid change <span class="token keyword">in</span> message bafy2bzacea4ruzf4hvyezzhjkt6hnzz5tpk7ttuw6jmyoadqasqtujypqitp2
</code></pre></div><ul><li>ç­‰å¾…æ¶ˆæ¯ä¸Šé“¾åï¼ŒæŸ¥çœ‹ <code>miner</code> çš„ä»£ç†ä¿¡æ¯</li></ul> <div class="language-bash extra-class"><pre class="language-bash"><code>./venus-market actor info --miner t01041
peers: 12D3KooWQftXTGFBKooKuyaNkugapUzi4VmjxEKTgkpsNCQufKBK
addr: /ip4/192.168.19.67/tcp/58418
</code></pre></div><h2 id="æŒ‚å•"><a href="#æŒ‚å•" class="header-anchor">#</a> æŒ‚å•</h2> <h3 id="å­˜å‚¨æŒ‚å•"><a href="#å­˜å‚¨æŒ‚å•" class="header-anchor">#</a> å­˜å‚¨æŒ‚å•</h3> <div class="language-bash extra-class"><pre class="language-bash"><code>./venus-market storage ask <span class="token builtin class-name">set</span> --price<span class="token operator">=</span><span class="token number">0</span>.01fil --verified-price<span class="token operator">=</span><span class="token number">0</span>.02fil --min-piece-size<span class="token operator">=</span>512b --max-piece-size<span class="token operator">=</span>512M t01041
</code></pre></div><p>å¯ä»¥é€šè¿‡å‘½ä»¤è¡Œå·¥å…·æ£€æŸ¥å®šä»·ä¿¡æ¯ï¼š</p> <div class="language-shell extra-class"><pre class="language-shell"><code>./venus-market storage ask get t01041
Price per GiB/Epoch  Verified  Min. Piece Size <span class="token punctuation">(</span>padded<span class="token punctuation">)</span>  Max. Piece Size <span class="token punctuation">(</span>padded<span class="token punctuation">)</span>  Expiry <span class="token punctuation">(</span>Epoch<span class="token punctuation">)</span>  Expiry <span class="token punctuation">(</span>Appx. Rem. Time<span class="token punctuation">)</span>  Seq. No.
<span class="token number">0.01</span> FIL             <span class="token number">0.02</span> FIL  <span class="token number">512</span> B                     <span class="token number">521</span> MiB                     <span class="token number">161256</span>          719h59m0s                 <span class="token number">0</span>
</code></pre></div><h3 id="æ£€ç´¢æŒ‚å•"><a href="#æ£€ç´¢æŒ‚å•" class="header-anchor">#</a> æ£€ç´¢æŒ‚å•</h3> <p>å­˜å‚¨æœåŠ¡æä¾›å•†è‡³å°‘åº”è®¾ç½®æ”¶æ¬¾åœ°å€</p> <div class="language-bash extra-class"><pre class="language-bash"><code>./venus-market retrieve ask <span class="token builtin class-name">set</span> t3ueb62v5kbyuvwo5tuyzpvds2bfakdjeg2s33p47buvbfiyd7w5fwmeilobt5cqzi673s5z6i267igkgxum6a
</code></pre></div><p>åŒæ—¶ï¼Œä¹Ÿå¯ä»¥è®¾ç½®æ•°æ®æ£€ç´¢è®¢å•çš„ä»·æ ¼ï¼Œä¸è®¾ç½®æ—¶ï¼Œé»˜è®¤ä¸º0.</p> <div class="language-bash extra-class"><pre class="language-bash"><code>./venus-market retrieve ask <span class="token builtin class-name">set</span> <span class="token punctuation">\</span>
--price <span class="token number">0</span>.02fil <span class="token punctuation">\</span>
--unseal-price <span class="token number">0</span>.01fil <span class="token punctuation">\</span>
--payment-interval 1MB <span class="token punctuation">\</span>
t3ueb62v5kbyuvwo5tuyzpvds2bfakdjeg2s33p47buvbfiyd7w5fwmeilobt5cqzi673s5z6i267igkgxum6a
</code></pre></div><h2 id="é…ç½®å¯åŠ¨market-client"><a href="#é…ç½®å¯åŠ¨market-client" class="header-anchor">#</a> é…ç½®å¯åŠ¨market-client</h2> <p><code>market-client</code> æ­£å¸¸è¿è¡Œéœ€è¦åŒæ­¥èŠ‚ç‚¹ã€ç­¾åèŠ‚ç‚¹ï¼ˆ<code>venus fullnode</code> å’Œ <code>lotus fullnode</code> å¯ä»¥ä½œä¸ºç­¾åèŠ‚ç‚¹ï¼‰ã€æ¶ˆæ¯èŠ‚ç‚¹ï¼ˆ<code>venus fullnode</code> å’Œ <code>lotus fullnode</code> å¯ä»¥ä½œä¸ºæ¶ˆæ¯èŠ‚ç‚¹ï¼‰åŠ <code>venus-market</code>ï¼Œæ•…å…¶å¯ä»¥çµæ´»é…ç½®ï¼Œåªè¦ä¿è¯æ¶ˆæ¯èƒ½å¤Ÿæ­£å¸¸ç­¾åå¹¶ä¸Šé“¾å³å¯ã€‚</p> <p><code>market-client</code> éœ€è¦é…ç½® <code>--addr</code> ç”¨æ¥ç»‘å®šå®¢æˆ·çš„é’±åŒ…åœ°å€ï¼Œç”¨äºæ”¯ä»˜å®¢æˆ·ç«¯æŠµæŠ¼å’Œæ£€ç´¢è´¹ç”¨ã€‚</p> <p>è¿™é‡Œä»‹ç»å¸¸ç”¨çš„ä¸‰ç§å¯åŠ¨æ–¹å¼ï¼š</p> <ul><li>æ¥å…¥ <code>Venus</code> é“¾æœåŠ¡</li></ul> <p><code>venus-gateway</code> çš„ç­¾å <code>API</code> åªæœ‰ <code>admin</code> æƒé™æ‰èƒ½è®¿é—®ï¼ˆå®‰å…¨è€ƒè™‘ï¼‰ï¼Œä¹Ÿå°±æ˜¯åªæœ‰é“¾æœåŠ¡ç»„ä»¶æ‰èƒ½è®¿é—®ï¼Œæ•… <code>market-client</code> æ— æ³•ä½¿ç”¨ï¼Œæ‰€ä»¥ç”¨æœ¬åœ°çš„ <code>venus-wallet</code> è¿›è¡Œç­¾åã€‚</p> <div class="language-shell extra-class"><pre class="language-shell"><code>./market-client run <span class="token punctuation">\</span>
--node-url<span class="token operator">=</span>/ip4/<span class="token operator">&lt;</span>venus_ip<span class="token operator">&gt;</span>/tcp/<span class="token operator">&lt;</span>port<span class="token operator">&gt;</span> <span class="token punctuation">\</span> 
--messager-url<span class="token operator">=</span>/ip4/<span class="token operator">&lt;</span>venus-messager_ip<span class="token operator">&gt;</span>/tcp/<span class="token operator">&lt;</span>port<span class="token operator">&gt;</span> <span class="token punctuation">\</span>
--auth-token<span class="token operator">=</span><span class="token operator">&lt;</span>user-signed-token<span class="token operator">&gt;</span> <span class="token punctuation">\</span>
--signer-type<span class="token operator">=</span>wallet <span class="token punctuation">\</span>
--signer-url<span class="token operator">=</span>/ip4/<span class="token operator">&lt;</span>venus-wallet_ip<span class="token operator">&gt;</span>/tcp/<span class="token operator">&lt;</span>port<span class="token operator">&gt;</span> <span class="token punctuation">\</span>
--signer-toke<span class="token operator">=</span><span class="token operator">&lt;</span>wallet-token<span class="token operator">&gt;</span> <span class="token punctuation">\</span>
--addr<span class="token operator">=</span><span class="token operator">&lt;</span>signer address<span class="token operator">&gt;</span> <span class="token punctuation">\</span>
</code></pre></div><blockquote><p><code>venus-wallet</code> ç”Ÿæˆå…·æœ‰ç­¾åæƒé™çš„ <code>token</code> è¯·å‚è€ƒä¸Šæ–‡.</p></blockquote> <ul><li>è¿æ¥ <code>lotus fullnode</code> å¯åŠ¨</li></ul> <div class="language-shell extra-class"><pre class="language-shell"><code>./market-client run <span class="token punctuation">\</span>
--node-url<span class="token operator">=</span>/ip4/<span class="token operator">&lt;</span>venus_ip<span class="token operator">&gt;</span>/tcp/<span class="token operator">&lt;</span>port<span class="token operator">&gt;</span> <span class="token punctuation">\</span> 
--node-token<span class="token operator">=</span><span class="token operator">&lt;</span>node-token<span class="token operator">&gt;</span> <span class="token punctuation">\</span>
--signer-type<span class="token operator">=</span>lotusnode <span class="token punctuation">\</span>
--addr<span class="token operator">=</span><span class="token operator">&lt;</span>signer address<span class="token operator">&gt;</span> <span class="token punctuation">\</span>
</code></pre></div><ul><li>è¿æ¥ <code>venus fullnode</code> å¯åŠ¨</li></ul> <div class="language-shell extra-class"><pre class="language-shell"><code>./market-client run <span class="token punctuation">\</span>
--node-url<span class="token operator">=</span>/ip4/<span class="token operator">&lt;</span>venus_ip<span class="token operator">&gt;</span>/tcp/<span class="token operator">&lt;</span>port<span class="token operator">&gt;</span> <span class="token punctuation">\</span> 
--node-token<span class="token operator">=</span><span class="token operator">&lt;</span>node-token<span class="token operator">&gt;</span> <span class="token punctuation">\</span>
--signer-type<span class="token operator">=</span>wallet <span class="token punctuation">\</span>
--addr<span class="token operator">=</span><span class="token operator">&lt;</span>signer address<span class="token operator">&gt;</span> <span class="token punctuation">\</span>
</code></pre></div><p>è¿™äº›é…ç½®é¡¹ä¹Ÿå¯ä»¥åœ¨é…ç½®æ–‡ä»¶ä¸­è®¾ç½®ï¼Œå‚è§<a href="/zh/operation/market-clienté…ç½®è§£é‡Š.html">market-clienté…ç½®</a></p> <h2 id="å­˜å‚¨è®¢å•"><a href="#å­˜å‚¨è®¢å•" class="header-anchor">#</a> å­˜å‚¨è®¢å•</h2> <h3 id="å¯¼å…¥å¾…å­˜å‚¨çš„æ•°æ®"><a href="#å¯¼å…¥å¾…å­˜å‚¨çš„æ•°æ®" class="header-anchor">#</a> å¯¼å…¥å¾…å­˜å‚¨çš„æ•°æ®</h3> <div class="language-shell extra-class"><pre class="language-shell"><code>./market-client data <span class="token function">import</span> <span class="token operator">&lt;</span>file path<span class="token operator">&gt;</span>
Import <span class="token number">1642491708527303001</span>, Root bafk2bzacedgv2xqys5ja4gycqipmg543ekxz3tjj6wwfexda352n55ahjldja
</code></pre></div><h3 id="é€‰æ‹©æŒ‚å•"><a href="#é€‰æ‹©æŒ‚å•" class="header-anchor">#</a> é€‰æ‹©æŒ‚å•</h3> <p>ä½¿ç”¨ <code>market-client</code> æ¥æŸ¥è¯¢ <code>miner</code> æŒ‚å•ä¿¡æ¯ï¼š</p> <div class="language-bash extra-class"><pre class="language-bash"><code>./market-client storage asks query f01041 
Ask: t01041
Price per GiB: <span class="token number">0.02</span> FIL
Verified Price per GiB: <span class="token number">0.01</span> FIL
Max Piece size: <span class="token number">8</span> MiB
Min Piece size: <span class="token number">512</span> B
</code></pre></div><h3 id="å‘èµ·å­˜å‚¨è®¢å•"><a href="#å‘èµ·å­˜å‚¨è®¢å•" class="header-anchor">#</a> å‘èµ·å­˜å‚¨è®¢å•</h3> <div class="language-shell extra-class"><pre class="language-shell"><code>/market-client storage deals init
<span class="token comment"># è¾“å…¥éœ€è¦å­˜å‚¨çš„æ•°æ®çš„cid, `./market-client data local`å‘½ä»¤æŸ¥çœ‹</span>
Data CID <span class="token punctuation">(</span>from lotus client <span class="token function">import</span><span class="token punctuation">)</span>: bafk2bzacedgv2xqys5ja4gycqipmg543ekxz3tjj6wwfexda352n55ahjldja
<span class="token punctuation">..</span> calculating data size
PieceCid:  baga6ea4seaqpz47j4kqdiixpehmzk3uw5c4cmqvs5iyi7xf7rwkepfhdvowdiai  PayLoadSize: <span class="token number">809</span> PieceSize: <span class="token number">1024</span>
<span class="token comment"># è¾“å…¥æ•°æ®å­˜å‚¨å‘¨æœŸ</span>
Deal duration <span class="token punctuation">(</span>days<span class="token punctuation">)</span>: <span class="token number">180</span>
Miner Addresses <span class="token punctuation">(</span>f0<span class="token punctuation">..</span> f0<span class="token punctuation">..</span><span class="token punctuation">)</span>, none to find: t01041
<span class="token punctuation">..</span> querying miner asks
-----
Proposing from t16qnfduxzpneb2m3rbdasvhgk7rmmo32zpiypkaq
	Balance: <span class="token number">9499.999999856612207905</span> FIL
Piece size: 1KiB <span class="token punctuation">(</span>Payload size: 809B<span class="token punctuation">)</span>
Duration: 4320h0m0s
Total price: ~0.0098876953124352 FIL <span class="token punctuation">(</span><span class="token number">0.000000019073486328</span> FIL per epoch<span class="token punctuation">)</span>
Verified: <span class="token boolean">false</span>
<span class="token comment"># ç¡®è®¤æ˜¯å¦æ¥å—è®¢å•ä»·æ ¼</span>
Accept <span class="token punctuation">(</span>yes/no<span class="token punctuation">)</span>: <span class="token function">yes</span>
<span class="token punctuation">..</span> executing
Deal <span class="token punctuation">(</span>t01051<span class="token punctuation">)</span> CID: bafyreihiln2ha6eaaos7kuhwpnvjvjlxmjnpsklym6hhucu2z776bf2or4
</code></pre></div><p>ç„¶åç­‰å¾…è®¢å•æ¶ˆæ¯ä¸Šé“¾ï¼Œä»¥åŠå­˜å‚¨æä¾›å•†å®Œæˆæ•°æ®å°è£…å³å¯ã€‚</p> <p><code>market-client</code> æŸ¥çœ‹è®¢å•:</p> <div class="language-shell extra-class"><pre class="language-shell"><code>./market-client storage deals list
DealCid      DealId  Provider  State                          On Chain?  Slashed?  PieceCID     Size    Price                    Duration  Verified
<span class="token punctuation">..</span>.76bf2or4  <span class="token number">0</span>       t01051    StorageDealCheckForAcceptance  N          N         <span class="token punctuation">..</span>.dvowdiai  <span class="token number">1016</span> B  <span class="token number">0.00992212295525724</span> FIL  <span class="token number">520205</span>    <span class="token boolean">false</span>
  Message: Provider state: StorageDealPublish
</code></pre></div><h3 id="çº¿ä¸‹å­˜å‚¨è®¢å•"><a href="#çº¿ä¸‹å­˜å‚¨è®¢å•" class="header-anchor">#</a> çº¿ä¸‹å­˜å‚¨è®¢å•</h3> <ol><li>å¯¼å…¥è®¢å•å­˜å‚¨æ–‡ä»¶</li></ol> <div class="language-bash extra-class"><pre class="language-bash"><code>./market-client data <span class="token function">import</span> ./README.md
Import <span class="token number">1642643014364955003</span>, Root bafk2bzaceaf4sallirkt63fqrojz5gaut7akiwxrclcsymqelqad7man3hc2c
</code></pre></div><p>2.è½¬ä¸ºCARæ–‡ä»¶</p> <div class="language-bash extra-class"><pre class="language-bash"><code>./market-client data generate-car ./README.md ./readme.md.car
</code></pre></div><p>3.è®¡ç®—CARæ–‡ä»¶çš„<code>CID</code>å’Œ<code>Piece size</code></p> <div class="language-shell extra-class"><pre class="language-shell"><code>./market-client data commP ./readme.md.car
CID:  baga6ea4seaqfewgysi3n3cjylkbfknr56vbemb2gwjfvpctqtjgpdweu7o3d6mq
Piece size:  <span class="token number">3.969</span> KiB
</code></pre></div><p>4.å‘èµ·è®¢å•</p> <div class="language-bash extra-class"><pre class="language-bash"><code>./market-client storage deals init <span class="token punctuation">\</span>
--manual-piece-cid<span class="token operator">=</span>baga6ea4seaqfewgysi3n3cjylkbfknr56vbemb2gwjfvpctqtjgpdweu7o3d6mq <span class="token punctuation">\</span>
--manual-piece-size<span class="token operator">=</span><span class="token number">4064</span> <span class="token punctuation">\</span>
bafk2bzaceaf4sallirkt63fqrojz5gaut7akiwxrclcsymqelqad7man3hc2c <span class="token punctuation">\</span>
f01051 <span class="token punctuation">\</span>
<span class="token number">0</span>.01fil <span class="token punctuation">\</span>
<span class="token number">518400</span>
bafyreiecguaxgtmgcanfco6huni4d6h6zs3w3bznermmiurtdos7r6hftm
</code></pre></div><ul><li><code>manual-piece-cid</code>: åœ¨ç¬¬3æ­¥è®¡æ‰§è¡Œ<code>data commP</code>åè¾“å‡ºçš„<code>CID</code></li> <li><code>manual-piece-size</code>: åœ¨ç¬¬3æ­¥æ‰§è¡Œ<code>data commP</code>åè¾“å‡ºçš„<code>Piece size</code>.éœ€è¦æ³¨æ„çš„æ˜¯, åœ¨ä½¿ç”¨è¿™ä¸ªå‚æ•°æ—¶, è¿™ä¸ªå€¼éœ€è¦è½¬æ¢æˆ<code>byte</code>çš„å¤§å°, åœ¨è¿™é‡Œä¸º3.969kibè½¬æ¢æˆbyteçš„å¤§å°æ˜¯4064.
ä¹‹å4ä¸ªå‚æ•°åˆ†åˆ«æ˜¯:</li> <li>ç¬¬ä¸€æ­¥æ‰§è¡Œ<code>import</code>å‘½ä»¤åè¾“å…¥çš„<code>Root</code></li> <li>çŸ¿å·¥ID</li> <li>åå•†æ”¯ä»˜è®¢å•çš„è´¹ç”¨<code>0.01fil</code>, **è¿™ä¸ªå€¼å¿…é¡»å¤§äºæ—·å·¥è®¾ç½®çš„<code>storage ask</code>ä¸­çš„æœ€å°å€¼, ä¸ç„¶è®¢å•ä¼šè¢«æ‹’ç»æ‰.</li> <li>åˆçº¦å‘¨æœŸ, å¿…é¡»å¤§äºç­‰äº180å¤©, è¿™ä¸ªå€¼ä¹Ÿéœ€è¦æ¢æˆepochä¸ºå•ä½, æ¯ä¸ªepoch=30ç§’, ç¤ºä¾‹ä¸­:518400 = 180å¤©.</li></ul> <p>æœ€åçš„è¾“å‡º<code>bafyreidfs2w7lxacq6zpqck7q4zimyitidxyahojf7dbbuz5zr7irdlmqa</code>ä¸ºproposeçš„cid.
çº¿ä¸Šè®¢å•ä¸€æ ·, æ­¤æ—¶å¯ä»¥é€šè¿‡market-clientæŸ¥çœ‹dealä¿¡æ¯, è®¢å•çš„æœ€åçŠ¶æ€ä¼šåœæ­¢åœ¨<code>StorageDealWaitingForData</code></p> <div class="language-shell extra-class"><pre class="language-shell"><code>./market-client storage deals list
DealCid      DealId  Provider  State                          On Chain?        Slashed?  PieceCID     Size       Price                    Duration  Verified  
<span class="token punctuation">..</span>.s7r6hftm  <span class="token number">0</span>       t01051    StorageDealCheckForAcceptance  N                N         <span class="token punctuation">..</span>.u7o3d6mq  <span class="token number">3.969</span> KiB  <span class="token number">5196.63</span> FIL              <span class="token number">519663</span>    <span class="token boolean">false</span>     
  Message: Provider state: StorageDealWaitingForData
</code></pre></div><p>ğŸ’ <strong>å¦‚æœ <code>market-client</code> å‡ºç°ä¸‹é¢çš„å†…å®¹:</strong></p> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token number">2022</span>-01-20T12:47:27.966+0800	ERROR	storagemarket_impl	clientstates/client_states.go:324	deal bafyreif2k2e4acraxk33z3llwo5gqmk32tfrdj2kocjanojbfbf6vj72vm failed: adding market funds failed: estimating gas used: message execution failed: <span class="token builtin class-name">exit</span> SysErrInsufficientFunds<span class="token punctuation">(</span><span class="token number">6</span><span class="token punctuation">)</span>
</code></pre></div><p>è¯´æ˜é’±åŒ…ä½™é¢ä¸è¶³,è°ƒç”¨å‘½ä»¤ <code>./market-client actor-funds add 100fil</code> å……å€¼åé‡æ–°æ‰§è¡Œå‘½ä»¤.</p> <ol start="5"><li>å¯¼å…¥ç¦»çº¿è®¢å•çš„æ•°æ®æ–‡ä»¶
éœ€è¦å°†ä¹‹å‰ç¬¬2æ­¥ç”Ÿæˆçš„<code>.car</code>æ–‡ä»¶çº¿ä¸‹ä¼ è¾“åˆ°venus-market, å¹¶é€šè¿‡venus-marketå‘½ä»¤å¯¼å…¥æ•°æ®:</li></ol> <div class="language-shell extra-class"><pre class="language-shell"><code>./venus-market storage-deals import-data bafyreiecguaxgtmgcanfco6huni4d6h6zs3w3bznermmiurtdos7r6hftm ./readme.md.car
</code></pre></div><p>å†æ¬¡æŸ¥çœ‹çŠ¶æ€, è®¢å•çŠ¶æ€æ›´æ–°ä¸º<code>StorageDealPublishing</code>:</p> <div class="language-shell extra-class"><pre class="language-shell"><code>./market-client storage deals list
DealCid      DealId  Provider  State                          On Chain?        Slashed?  PieceCID     Size       Price                    Duration  Verified  
<span class="token punctuation">..</span>.s7r6hftm  <span class="token number">0</span>       t01051    StorageDealCheckForAcceptance  N                N         <span class="token punctuation">..</span>.u7o3d6mq  <span class="token number">3.969</span> KiB  <span class="token number">5196.63</span> FIL              <span class="token number">519663</span>    <span class="token boolean">false</span>     
Message: Provider state: StorageDealPublishing
</code></pre></div><p>æœ€åç­‰å¾…è®¢å•çŠ¶æ€å˜åŒ–ä¸º<code>StorageDealAwaitingPreCommit</code> å°±å¯ä»¥è¿›è¡Œè®¢å•æ•°æ®çš„å°è£…äº†ã€‚</p> <h2 id="æäº¤æ•°æ®æ£€ç´¢è®¢å•"><a href="#æäº¤æ•°æ®æ£€ç´¢è®¢å•" class="header-anchor">#</a> æäº¤æ•°æ®æ£€ç´¢è®¢å•</h2> <p>ç”¨æˆ·é€šè¿‡ <code>minerID</code> å’Œ <code>Data CID</code> å°±å¯ä»¥å‘èµ·æ•°æ®æ£€ç´¢è®¢å•</p> <div class="language-shell extra-class"><pre class="language-shell"><code>./market-client retrieval retrieve --provider t01020 bafk2bzacearla6en6crpouxo72d5lhr3buajbzjippl63bfsd2m7rsyughu42 test.txt
Recv <span class="token number">0</span> B, Paid <span class="token number">0</span> FIL, Open <span class="token punctuation">(</span>New<span class="token punctuation">)</span>, 0s
Recv <span class="token number">0</span> B, Paid <span class="token number">0</span> FIL, DealProposed <span class="token punctuation">(</span>WaitForAcceptance<span class="token punctuation">)</span>, 16ms
Recv <span class="token number">0</span> B, Paid <span class="token number">0</span> FIL, DealAccepted <span class="token punctuation">(</span>Accepted<span class="token punctuation">)</span>, 26ms
Recv <span class="token number">0</span> B, Paid <span class="token number">0</span> FIL, PaymentChannelSkip <span class="token punctuation">(</span>Ongoing<span class="token punctuation">)</span>, 27ms
Recv <span class="token number">1.479</span> KiB, Paid <span class="token number">0</span> FIL, BlocksReceived <span class="token punctuation">(</span>Ongoing<span class="token punctuation">)</span>, 30ms
Recv <span class="token number">1.479</span> KiB, Paid <span class="token number">0</span> FIL, AllBlocksReceived <span class="token punctuation">(</span>BlocksComplete<span class="token punctuation">)</span>, 33ms
Recv <span class="token number">1.479</span> KiB, Paid <span class="token number">0</span> FIL, Complete <span class="token punctuation">(</span>CheckComplete<span class="token punctuation">)</span>, 35ms
Recv <span class="token number">1.479</span> KiB, Paid <span class="token number">0</span> FIL, CompleteVerified <span class="token punctuation">(</span>FinalizingBlockstore<span class="token punctuation">)</span>, 36ms
Recv <span class="token number">1.479</span> KiB, Paid <span class="token number">0</span> FIL, BlockstoreFinalized <span class="token punctuation">(</span>Completed<span class="token punctuation">)</span>, 36ms
Success
</code></pre></div></div> <footer class="page-edit"><div class="edit-link"><a href="https://github.com/ipfs-force-community/damocles-docs/edit/main/docs/zh/operation/README.md" target="_blank" rel="noopener noreferrer">Edit this page</a> <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></div> <div class="last-updated"><span class="prefix">Last Updated:</span> <span class="time">2023/6/13 09:19:41</span></div></footer> <div class="page-nav"><p class="inner"><!----> <span class="next"><a href="/zh/operation/market-client-config.html">
        droplet-client é…ç½®
      </a>
      â†’
    </span></p></div> </main></div><div class="global-ui"><!----></div></div>
    <script src="/assets/js/app.c59b3e41.js" defer></script><script src="/assets/js/2.80641b54.js" defer></script><script src="/assets/js/30.c335ae88.js" defer></script>
  </body>
</html>
