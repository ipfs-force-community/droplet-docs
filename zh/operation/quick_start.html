<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>å¿«é€Ÿå¯ç”¨ | æ°´æ»´</title>
    <meta name="generator" content="VuePress 1.8.0">
    <link rel="icon" href="/assets/droplet-icon.png">
    <script async="true" src="https://www.googletagmanager.com/gtag/js?id=G-GRVZ8072DQ"></script>
    <script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'G-GRVZ8072DQ');</script>
    <meta name="description" content="æ°´æ»´ï¼ŒåŸVenusè®¢å•æœåŠ¡ï¼Œæ˜¯ä¸€ä¸ªFilecoinå­˜å‚¨è®¢å•è§£å†³æ–¹æ¡ˆ">
    
    <link rel="preload" href="/assets/css/0.styles.72e9161a.css" as="style"><link rel="preload" href="/assets/js/app.3b420fac.js" as="script"><link rel="preload" href="/assets/js/2.d646fae5.js" as="script"><link rel="preload" href="/assets/js/40.eb08e8b4.js" as="script"><link rel="prefetch" href="/assets/js/10.54d869d8.js"><link rel="prefetch" href="/assets/js/11.0709d827.js"><link rel="prefetch" href="/assets/js/12.1067bf79.js"><link rel="prefetch" href="/assets/js/13.79dca4c5.js"><link rel="prefetch" href="/assets/js/14.ccd12171.js"><link rel="prefetch" href="/assets/js/15.cfd4f0ef.js"><link rel="prefetch" href="/assets/js/16.0655211a.js"><link rel="prefetch" href="/assets/js/17.b592e31e.js"><link rel="prefetch" href="/assets/js/18.dd25ebca.js"><link rel="prefetch" href="/assets/js/19.ae250042.js"><link rel="prefetch" href="/assets/js/20.e55ae312.js"><link rel="prefetch" href="/assets/js/21.8ec14afd.js"><link rel="prefetch" href="/assets/js/22.20cd45db.js"><link rel="prefetch" href="/assets/js/23.b96f8066.js"><link rel="prefetch" href="/assets/js/24.98c32c85.js"><link rel="prefetch" href="/assets/js/25.bc845610.js"><link rel="prefetch" href="/assets/js/26.c6900ae9.js"><link rel="prefetch" href="/assets/js/27.40422914.js"><link rel="prefetch" href="/assets/js/28.f85f8f1e.js"><link rel="prefetch" href="/assets/js/29.111516fb.js"><link rel="prefetch" href="/assets/js/3.4f172ebf.js"><link rel="prefetch" href="/assets/js/30.f033c8be.js"><link rel="prefetch" href="/assets/js/31.4d803608.js"><link rel="prefetch" href="/assets/js/32.195b1e04.js"><link rel="prefetch" href="/assets/js/33.e36813ef.js"><link rel="prefetch" href="/assets/js/34.31db2e2c.js"><link rel="prefetch" href="/assets/js/35.48bf0c09.js"><link rel="prefetch" href="/assets/js/36.5e631563.js"><link rel="prefetch" href="/assets/js/37.268ad578.js"><link rel="prefetch" href="/assets/js/38.29313c11.js"><link rel="prefetch" href="/assets/js/39.6ffc3ac2.js"><link rel="prefetch" href="/assets/js/4.ee54e947.js"><link rel="prefetch" href="/assets/js/41.f90b1bb5.js"><link rel="prefetch" href="/assets/js/5.b5bd5abf.js"><link rel="prefetch" href="/assets/js/6.0c2827f1.js"><link rel="prefetch" href="/assets/js/7.fc8c7bc4.js"><link rel="prefetch" href="/assets/js/8.9147db7e.js"><link rel="prefetch" href="/assets/js/9.5a86ab25.js">
    <link rel="stylesheet" href="/assets/css/0.styles.72e9161a.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/zh/" class="home-link router-link-active"><img src="/assets/droplet-icon.png" alt="æ°´æ»´" class="logo"> <span class="site-name can-hide">æ°´æ»´</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/zh/intro/" class="nav-link">
  åŠŸèƒ½ä»‹ç»
</a></div><div class="nav-item"><a href="/zh/operation/" class="nav-link router-link-active">
  éƒ¨ç½²/è¿ç»´
</a></div><div class="nav-item"><a href="/zh/developer/" class="nav-link">
  ç ”å‘/è®¾è®¡
</a></div><div class="nav-item"><a href="/zh/about/" class="nav-link">
  å…³äº
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Select language" class="dropdown-title"><span class="title">é€‰æ‹©è¯­è¨€</span> <span class="arrow down"></span></button> <button type="button" aria-label="Select language" class="mobile-dropdown-title"><span class="title">é€‰æ‹©è¯­è¨€</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/" class="nav-link">
  English
</a></li><li class="dropdown-item"><!----> <a href="/zh/operation/quick_start.html" aria-current="page" class="nav-link router-link-exact-active router-link-active">
  ç®€ä½“ä¸­æ–‡
</a></li></ul></div></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/zh/intro/" class="nav-link">
  åŠŸèƒ½ä»‹ç»
</a></div><div class="nav-item"><a href="/zh/operation/" class="nav-link router-link-active">
  éƒ¨ç½²/è¿ç»´
</a></div><div class="nav-item"><a href="/zh/developer/" class="nav-link">
  ç ”å‘/è®¾è®¡
</a></div><div class="nav-item"><a href="/zh/about/" class="nav-link">
  å…³äº
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Select language" class="dropdown-title"><span class="title">é€‰æ‹©è¯­è¨€</span> <span class="arrow down"></span></button> <button type="button" aria-label="Select language" class="mobile-dropdown-title"><span class="title">é€‰æ‹©è¯­è¨€</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/" class="nav-link">
  English
</a></li><li class="dropdown-item"><!----> <a href="/zh/operation/quick_start.html" aria-current="page" class="nav-link router-link-exact-active router-link-active">
  ç®€ä½“ä¸­æ–‡
</a></li></ul></div></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>éƒ¨ç½²</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/zh/operation/quick_start.html" aria-current="page" class="active sidebar-link">å¿«é€Ÿå¯ç”¨</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/zh/operation/quick_start.html#æ¦‚è¿°" class="sidebar-link">æ¦‚è¿°</a></li><li class="sidebar-sub-header"><a href="/zh/operation/quick_start.html#droplet" class="sidebar-link">droplet</a></li><li class="sidebar-sub-header"><a href="/zh/operation/quick_start.html#droplet-client" class="sidebar-link">droplet-client</a></li></ul></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>é…ç½®</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/zh/operation/market-client-config.html" class="sidebar-link">droplet-client é…ç½®</a></li><li><a href="/zh/operation/market-config.html" class="sidebar-link">droplet é…ç½®</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>è¿ç»´</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/zh/operation/prep-datasets.html" class="sidebar-link">å¤§æ•°æ®é›†å‡†å¤‡</a></li><li><a href="/zh/operation/migrate-offline-deal.html" class="sidebar-link">è¿ç§»ç¦»çº¿è®¢å•</a></li><li><a href="/zh/operation/batch-deal.html" class="sidebar-link">æ‰¹é‡å‘å•</a></li><li><a href="/zh/operation/extend-claim.html" class="sidebar-link">DC è®¢å•ç»­æœŸ</a></li><li><a href="/zh/operation/http-retrieval.html" class="sidebar-link">http æ£€ç´¢</a></li><li><a href="/zh/operation/deal-filter.html" class="sidebar-link">è®¢å•è¿‡æ»¤å™¨</a></li><li><a href="/zh/operation/metrics.html" class="sidebar-link">Metrics æŒ‡æ ‡</a></li><li><a href="/zh/operation/rebuild-signature.html" class="sidebar-link">ç­¾åé‡æ„</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="å¿«é€Ÿå¯ç”¨"><a href="#å¿«é€Ÿå¯ç”¨" class="header-anchor">#</a> å¿«é€Ÿå¯ç”¨</h1> <h2 id="æ¦‚è¿°"><a href="#æ¦‚è¿°" class="header-anchor">#</a> æ¦‚è¿°</h2> <p><code>droplet</code> æ˜¯ <code>venus</code> ç³»ç»Ÿä¸­çš„å¸‚åœºæœåŠ¡ç»„ä»¶ï¼Œç”±ä¸¤éƒ¨åˆ†ç»„æˆï¼š<code>droplet</code> å’Œ <code>droplet-client</code>ï¼Œé€šä¿—ç†è§£ä¸ºå¸‚åœºæœåŠ¡ç«¯å’Œå®¢æˆ·ç«¯ã€‚</p> <ul><li><p><code>droplet</code> çš„æœåŠ¡å¯¹è±¡æ˜¯å­˜å‚¨æä¾›å•†ï¼›</p></li> <li><p><code>droplet-client</code> çš„æœåŠ¡å¯¹è±¡æ˜¯æœ‰æ£€ç´¢éœ€æ±‚æˆ–å­˜å‚¨éœ€æ±‚çš„ç”¨æˆ·ã€‚</p></li></ul> <p><code>droplet</code> çš„å¸‚åœºæœåŠ¡åˆ†ä¸ºå­˜å‚¨å¸‚åœºå’Œæ£€ç´¢å¸‚åœºï¼Œå…¶ä¸€èˆ¬æµç¨‹å¦‚ä¸‹ï¼š</p> <ul><li>å­˜å‚¨æµç¨‹ï¼š</li></ul> <table><thead><tr><th>é˜¶æ®µ</th> <th>æ­¥éª¤</th></tr></thead> <tbody><tr><td>å¯åŠ¨ <code>droplet</code> å’Œ <code>droplet-client</code></td> <td>1. <a href="###droplet%E5%88%9D%E5%A7%8B%E5%8C%96%E5%B9%B6%E5%90%AF%E5%8A%A8">dropletåˆå§‹åŒ–å¹¶å¯åŠ¨</a> <br>2.  <a href="###droplet-client%E5%88%9D%E5%A7%8B%E5%8C%96%E5%B9%B6%E5%90%AF%E5%8A%A8">droplet-clientåˆå§‹åŒ–å¹¶å¯åŠ¨</a></td></tr> <tr><td>ä»£ç† <code>miners</code> çš„ <code>libp2p</code> ç›‘å¬æœåŠ¡</td> <td>3. <a href="###%E8%AE%BE%E7%BD%AEdroplet%E4%BF%A1%E6%81%AF%E5%88%B0%E7%BD%91%E7%BB%9C">è®¾ç½®dropletä¿¡æ¯åˆ°ç½‘ç»œ</a></td></tr> <tr><td>ä¸º <code>miners</code> æŒ‚å•</td> <td>4. <a href="####%E5%AD%98%E5%82%A8%E6%8C%82%E5%8D%95">å­˜å‚¨æŒ‚å•</a></td></tr> <tr><td>æŒ‡å®š <code>miner</code> å‘å•</td> <td>5. <a href="###%E5%AD%98%E5%82%A8%E8%AE%A2%E5%8D%95%EF%BC%88%E5%8F%91%E5%8D%95%EF%BC%89">å­˜å‚¨å‘å•</a></td></tr></tbody></table> <p>å‘å•ä¹‹åï¼Œéœ€è¦ä¸€å®šæ—¶é—´æ‰§è¡Œè®¢å•äº¤æ˜“æµç¨‹ï¼Œè®¢å•è¢«ç¡®è®¤åï¼Œå­˜å‚¨æä¾›å•†å¯¹è®¢å•ä¸­æ•°æ®è¿›è¡Œå°è£…å¹¶æäº¤è¯æ˜ï¼Œ<code>droplet</code> è´Ÿè´£è·Ÿè¸ªè®¢å•çŠ¶æ€ã€‚</p> <ul><li>æ£€ç´¢æµç¨‹ï¼š</li></ul> <table><thead><tr><th>é˜¶æ®µ</th> <th>æ­¥éª¤</th></tr></thead> <tbody><tr><td>å¯åŠ¨ <code>droplet</code> å’Œ <code>droplet-client</code></td> <td>1. <a href="###droplet%E5%88%9D%E5%A7%8B%E5%8C%96%E5%B9%B6%E5%90%AF%E5%8A%A8">dropletåˆå§‹åŒ–å¹¶å¯åŠ¨</a> <br>2.  <a href="###droplet-client%E5%88%9D%E5%A7%8B%E5%8C%96%E5%B9%B6%E5%90%AF%E5%8A%A8">droplet-clientåˆå§‹åŒ–å¹¶å¯åŠ¨</a></td></tr> <tr><td>è®¾ç½®æ£€ç´¢ä»·æ ¼åŠæ”¶æ¬¾åœ°å€</td> <td>3. å­˜å‚¨ä¾›åº”å•†é€šè¿‡ <code>droplet</code> <a href="####%E6%A3%80%E7%B4%A2%E6%8C%82%E5%8D%95">æ£€ç´¢æŒ‚å•</a></td></tr> <tr><td>æäº¤æ•°æ®æ£€ç´¢è®¢å•</td> <td>4. <a href="#%E6%8F%90%E4%BA%A4%E6%95%B0%E6%8D%AE%E6%A3%80%E7%B4%A2%E8%AE%A2%E5%8D%95">æäº¤æ•°æ®æ£€ç´¢è®¢å•</a></td></tr></tbody></table> <p>æäº¤æ•°æ®æ£€ç´¢è®¢å•ä¹‹åï¼Œå¼€å§‹æ‰§è¡Œæ£€ç´¢äº¤æµæµç¨‹ï¼Œä¼šæŒ‰ç…§åè®®åˆ†æ‰¹æ¬¡å›ä¼ æ•°æ®å¹¶å°†æ‰€éœ€è´¹ç”¨è½¬ç»™æ”¶æ¬¾åœ°å€</p> <p>ğŸ’ <strong>æ— è®ºæ˜¯å­˜å‚¨äº¤æ˜“è¿˜æ˜¯æ£€ç´¢äº¤æ˜“ï¼Œå…¶åè®®çš„æ‰§è¡Œè¿‡ç¨‹éƒ½æ˜¯è‡ªåŠ¨çš„ï¼ŒæœŸé—´ä¼šå‘é€æ¶ˆæ¯ä¸Šé“¾ï¼Œæ•…éœ€ä¿è¯äº¤æ˜“åŒæ–¹çš„æ¶ˆæ¯éƒ½å¯ä»¥æ­£å¸¸ç­¾åã€‚äº¤æ˜“è¿‡ç¨‹å­˜åœ¨å¿…è¦çš„ <code>fil</code> æµè½¬ï¼Œç›¸å…³åœ°å€éœ€è¦æœ‰è¶³å¤Ÿçš„ä½™é¢ï¼Œå¦åˆ™äº¤æ˜“å°†æ— æ³•è¾¾æˆã€‚</strong></p> <h2 id="droplet"><a href="#droplet" class="header-anchor">#</a> droplet</h2> <h3 id="dropletåˆå§‹åŒ–å¹¶å¯åŠ¨"><a href="#dropletåˆå§‹åŒ–å¹¶å¯åŠ¨" class="header-anchor">#</a> dropletåˆå§‹åŒ–å¹¶å¯åŠ¨</h3> <h4 id="gatewayç­¾åæ¨¡å¼"><a href="#gatewayç­¾åæ¨¡å¼" class="header-anchor">#</a> gatewayç­¾åæ¨¡å¼</h4> <p><code>sophon-gateway</code>ä½œä¸ºä¸­è½¬ï¼Œä¼šæ‰¾é“¾æ¥<code>sophon-gateway</code>çš„walletè¿›è¡Œç­¾åã€‚
é…åˆ<code>sophon-auth</code>ã€<code>venus</code>ã€ <code>sophon-messager</code>ã€<code>sophon-gateway</code>ç­‰é“¾æœåŠ¡ç»„ä»¶ä¸€èµ·ä¸ºæ³¨å†Œåˆ°é“¾æœåŠ¡çš„ <code>miner</code> æä¾›å¸‚åœºæœåŠ¡ã€‚</p> <div class="language-sh extra-class"><pre class="language-sh"><code>./droplet run <span class="token punctuation">\</span>
--cs-url<span class="token operator">=</span>/ip4/<span class="token operator">&lt;</span>ip<span class="token operator">&gt;</span>/tcp/<span class="token operator">&lt;</span>port<span class="token operator">&gt;</span> <span class="token punctuation">\</span>
--cs-token<span class="token operator">=</span><span class="token operator">&lt;</span>shared-token<span class="token operator">&gt;</span> <span class="token punctuation">\</span>
--signer-type<span class="token operator">=</span><span class="token string">&quot;gateway&quot;</span> <span class="token punctuation">\</span>
--gateway-url<span class="token operator">=</span>/ip4/<span class="token operator">&lt;</span>ip<span class="token operator">&gt;</span>/tcp/<span class="token operator">&lt;</span>port<span class="token operator">&gt;</span>
</code></pre></div><p>ç”Ÿæˆçš„æœåŠ¡ç»„ä»¶é…ç½®å‚è€ƒ:</p> <div class="language-toml extra-class"><pre class="language-toml"><code><span class="token punctuation">[</span><span class="token table class-name">ChainService</span><span class="token punctuation">]</span>
  <span class="token key property">Url</span> <span class="token punctuation">=</span>  <span class="token string">&quot;/ip4/192.168.200.21/tcp/45132&quot;</span>
  <span class="token key property">Token</span> <span class="token punctuation">=</span> <span class="token string">&quot;eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJuYW1lIjoiemwiLCJwZXJtIjoiYWRtaW4iLCJleHQiOiIifQ.3u-PInSUmX-8f6Z971M7JBCHYgFVQrvwUjJfFY03ouQ&quot;</span>

<span class="token punctuation">[</span><span class="token table class-name">Signer</span><span class="token punctuation">]</span>
  <span class="token key property">Type</span> <span class="token punctuation">=</span> <span class="token string">&quot;gateway&quot;</span>
  <span class="token key property">Url</span> <span class="token punctuation">=</span> <span class="token string">&quot;/ip4/127.0.0.1/tcp/45132&quot;</span>
  <span class="token key property">Token</span> <span class="token punctuation">=</span> <span class="token string">&quot;eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJuYW1lIjoic2hhcmVkLXRva2VuIiwicGVybSI6ImFkbWluIiwiZXh0IjoiIn0.aARqJ_7FSe1KakkBhWlFvsYm-xBLAXBnl9SvTfqsVe8&quot;</span>
</code></pre></div><p>ğŸ’ <strong><code>shared-token</code> æ˜¯ç”¨äºè®¿é—®å…¶ä»–é“¾æœåŠ¡ç»„ä»¶ <code>API</code> æ—¶çš„æƒé™éªŒè¯ï¼Œç”± <code>sophon-auth</code> ç®¡ç†ï¼Œéœ€è¦ <code>admin</code> æƒé™ã€‚å…·ä½“è¯·å‚è€ƒ <a href="https://github.com/filecoin-project/venus-docs/blob/master/docs/zh/cs/deploy-a-cs.md#user%E5%8F%8Atoken%E7%94%9F%E6%88%90" target="_blank" rel="noopener noreferrer">sophon-auth token<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></strong></p> <p>ğŸ’ <strong>å¦‚æœé“¾æœåŠ¡ç»„ä»¶æ²¡æœ‰<a href="https://github.com/ipfs-force-community/sophon-gateway/blob/master/docs/zh/%E5%BF%AB%E9%80%9F%E5%90%AF%E7%94%A8.md#%E4%BD%BF%E7%94%A8-gateway-%E4%BB%A3%E7%90%86%E5%AF%B9%E5%85%B6%E4%BB%96%E7%BA%BF%E4%B8%8A%E7%BB%84%E4%BB%B6%E7%9A%84%E8%AF%B7%E6%B1%82" target="_blank" rel="noopener noreferrer">è®¾ç½®ç»Ÿä¸€çš„å…¥å£<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>çš„è¯ï¼Œå¯ä»¥é…ç½®æ–‡ä»¶æˆ–è€…é€šè¿‡å‘½ä»¤è¡Œ flag å•ç‹¬è®¾ç½®æ¯ä¸€ä¸ªé“¾æœåŠ¡ç»„ä»¶çš„ Url å’Œ Token ã€‚å…·ä½“è¯·å‚è€ƒ <a href="https://github.com/filecoin-project/venus-docs/blob/master/docs/zh/cs/deploy-a-cs.md#user%E5%8F%8Atoken%E7%94%9F%E6%88%90" target="_blank" rel="noopener noreferrer">sophon-auth token<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></strong></p> <h5 id="å•ç‹¬ä¸ºæ¯ä¸ªé“¾æœåŠ¡ç»„ä»¶è®¾ç½®-url-å’Œ-token"><a href="#å•ç‹¬ä¸ºæ¯ä¸ªé“¾æœåŠ¡ç»„ä»¶è®¾ç½®-url-å’Œ-token" class="header-anchor">#</a> å•ç‹¬ä¸ºæ¯ä¸ªé“¾æœåŠ¡ç»„ä»¶è®¾ç½® Url å’Œ Token</h5> <div class="language-sh extra-class"><pre class="language-sh"><code>./droplet run <span class="token punctuation">\</span>
--auth-url<span class="token operator">=</span>http://<span class="token operator">&lt;</span>ip<span class="token operator">&gt;</span>:<span class="token operator">&lt;</span>port<span class="token operator">&gt;</span> <span class="token punctuation">\</span>
--node-url<span class="token operator">=</span>/ip4/<span class="token operator">&lt;</span>ip<span class="token operator">&gt;</span>/tcp/<span class="token operator">&lt;</span>port<span class="token operator">&gt;</span> <span class="token punctuation">\</span>
--messager-url<span class="token operator">=</span>/ip4/<span class="token operator">&lt;</span>ip<span class="token operator">&gt;</span>/tcp/<span class="token operator">&lt;</span>port<span class="token operator">&gt;</span> <span class="token punctuation">\</span>
--cs-token<span class="token operator">=</span><span class="token operator">&lt;</span>shared-token<span class="token operator">&gt;</span> <span class="token punctuation">\</span>
--signer-type<span class="token operator">=</span><span class="token string">&quot;gateway&quot;</span> <span class="token punctuation">\</span>
--gateway-url<span class="token operator">=</span>/ip4/<span class="token operator">&lt;</span>ip<span class="token operator">&gt;</span>/tcp/<span class="token operator">&lt;</span>port<span class="token operator">&gt;</span>
</code></pre></div><p>ç”Ÿæˆçš„æœåŠ¡ç»„ä»¶é…ç½®å‚è€ƒ:</p> <div class="language-toml extra-class"><pre class="language-toml"><code><span class="token punctuation">[</span><span class="token table class-name">ChainService</span><span class="token punctuation">]</span>
  <span class="token key property">Url</span> <span class="token punctuation">=</span>  <span class="token string">&quot;&quot;</span>
  <span class="token key property">Token</span> <span class="token punctuation">=</span> <span class="token string">&quot;eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJuYW1lIjoiemwiLCJwZXJtIjoiYWRtaW4iLCJleHQiOiIifQ.3u-PInSUmX-8f6Z971M7JBCHYgFVQrvwUjJfFY03ouQ&quot;</span>
<span class="token punctuation">[</span><span class="token table class-name">Node</span><span class="token punctuation">]</span>
  <span class="token key property">Url</span> <span class="token punctuation">=</span> <span class="token string">&quot;/ip4/192.168.200.151/tcp/3455&quot;</span>
  <span class="token key property">Token</span> <span class="token punctuation">=</span> <span class="token string">&quot;&quot;</span>

<span class="token punctuation">[</span><span class="token table class-name">Messager</span><span class="token punctuation">]</span>
  <span class="token key property">Url</span> <span class="token punctuation">=</span> <span class="token string">&quot;/ip4/127.0.0.1/tcp/39812&quot;</span>
  <span class="token key property">Token</span> <span class="token punctuation">=</span> <span class="token string">&quot;&quot;</span>

<span class="token punctuation">[</span><span class="token table class-name">AuthNode</span><span class="token punctuation">]</span>
  <span class="token key property">Url</span> <span class="token punctuation">=</span> <span class="token string">&quot;http://127.0.0.1:8989&quot;</span>
  <span class="token key property">Token</span> <span class="token punctuation">=</span> <span class="token string">&quot;&quot;</span>

<span class="token punctuation">[</span><span class="token table class-name">Signer</span><span class="token punctuation">]</span>
  <span class="token key property">Type</span> <span class="token punctuation">=</span> <span class="token string">&quot;gateway&quot;</span>
  <span class="token key property">Url</span> <span class="token punctuation">=</span> <span class="token string">&quot;/ip4/127.0.0.1/tcp/45132&quot;</span>
  <span class="token key property">Token</span> <span class="token punctuation">=</span> <span class="token string">&quot;eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJuYW1lIjoic2hhcmVkLXRva2VuIiwicGVybSI6ImFkbWluIiwiZXh0IjoiIn0.aARqJ_7FSe1KakkBhWlFvsYm-xBLAXBnl9SvTfqsVe8&quot;</span>

</code></pre></div><h4 id="venus-wallet-ç­¾åæ¨¡å¼"><a href="#venus-wallet-ç­¾åæ¨¡å¼" class="header-anchor">#</a> <code>venus-wallet</code> ç­¾åæ¨¡å¼</h4> <p>ğŸ’ <strong>ç­¾åç”¨ç‹¬ç«‹çš„<code>venus-wallet</code>ç»„ä»¶ï¼Œåˆ™é…ç½®ä¸º <code>venus-wallet</code>çš„ç›‘å¬åœ°å€åŠå…·æœ‰ç­¾åæƒé™çš„ <code>token</code>.</strong></p> <p><code>venus-wallet</code> ç”Ÿæˆå…·æœ‰ç­¾åæƒé™çš„ <code>token</code>:</p> <div class="language-bash extra-class"><pre class="language-bash"><code>$ ./venus-wallet auth api-info --perm<span class="token operator">=</span>sign
<span class="token operator">&gt;</span> eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJBbGxvdyI6WyJyZWFkIiwid3JpdGUiLCJzaWduIl19.Vr-OP7RNOozf6XXZuahpk-ZGA7IDa5NJjmU9L_znJ-0:/ip4/127.0.0.1/tcp/5678/http
</code></pre></div><p>åˆå§‹åŒ–å¹¶å¯åŠ¨</p> <div class="language- extra-class"><pre class="language-text"><code>./droplet run \
--cs-url=/ip4/&lt;ip&gt;/tcp/&lt;port&gt; \
--cs-token=&lt;shared-token&gt; \
--signer-type=&quot;wallet&quot; \
--signer-url=/ip4/&lt;ip&gt;/tcp/&lt;port&gt; \
--signer-token=&lt;token of venus-wallet&gt; 
</code></pre></div><p>ç”Ÿæˆçš„æœåŠ¡ç»„ä»¶é…ç½®å‚è€ƒ:</p> <div class="language-toml extra-class"><pre class="language-toml"><code><span class="token punctuation">[</span><span class="token table class-name">ChainService</span><span class="token punctuation">]</span>
  <span class="token key property">Url</span> <span class="token punctuation">=</span>  <span class="token string">&quot;/ip4/192.168.200.21/tcp/45132&quot;</span>
  <span class="token key property">Token</span> <span class="token punctuation">=</span> <span class="token string">&quot;eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJuYW1lIjoiemwiLCJwZXJtIjoiYWRtaW4iLCJleHQiOiIifQ.3u-PInSUmX-8f6Z971M7JBCHYgFVQrvwUjJfFY03ouQ&quot;</span>

<span class="token punctuation">[</span><span class="token table class-name">Signer</span><span class="token punctuation">]</span>
  <span class="token key property">Type</span> <span class="token punctuation">=</span> <span class="token string">&quot;wallet&quot;</span>
  <span class="token key property">Url</span> <span class="token punctuation">=</span> <span class="token string">&quot;/ip4/127.0.0.1/tcp/5678/http&quot;</span>
  <span class="token comment"># walletç”Ÿæˆçš„token</span>
  <span class="token key property">Token</span> <span class="token punctuation">=</span> <span class="token string">&quot;eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJBbGxvdyI6WyJyZWFkIiwid3JpdGUiLCJzaWduIl19.IVBGlmRW__6g4QGbb1D1Jtr1oyMM6Sqs1tj1GDGR5EQ&quot;</span>
</code></pre></div><h4 id="é“¾æ¥lotuså¯åŠ¨"><a href="#é“¾æ¥lotuså¯åŠ¨" class="header-anchor">#</a> é“¾æ¥lotuså¯åŠ¨</h4> <p>é…åˆ <code>lotus fullnode</code> çš„å¯åŠ¨æ–¹å¼ã€‚</p> <div class="language- extra-class"><pre class="language-text"><code>./droplet run \
--node-url=/ip4/&lt;ip&gt;/tcp/&lt;port&gt; \
--cs-token=&lt;token of lotus&gt; \
--signer-type=&quot;lotusnode&quot;
</code></pre></div><p>ç”Ÿæˆçš„æœåŠ¡ç»„ä»¶é…ç½®å‚è€ƒ:</p> <div class="language-toml extra-class"><pre class="language-toml"><code><span class="token punctuation">[</span><span class="token table class-name">Node</span><span class="token punctuation">]</span>
  <span class="token key property">Url</span> <span class="token punctuation">=</span> <span class="token string">&quot;/ip4/127.0.0.1/tcp/1234&quot;</span>
  <span class="token key property">Token</span> <span class="token punctuation">=</span> <span class="token string">&quot;eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJBbGxvdyI6WyJyZWFkIiwid3JpdGUiLCJzaWduIiwiYWRtaW4iXX0.Ne3JsfHHhN6BgDtdsvLYfUaRC3eJPH_7KrBsMRBdplc&quot;</span>

<span class="token punctuation">[</span><span class="token table class-name">Messager</span><span class="token punctuation">]</span>
  <span class="token key property">Url</span> <span class="token punctuation">=</span> <span class="token string">&quot;&quot;</span>
  <span class="token key property">Token</span> <span class="token punctuation">=</span> <span class="token string">&quot;&quot;</span>

<span class="token punctuation">[</span><span class="token table class-name">Signer</span><span class="token punctuation">]</span>
  <span class="token key property">Type</span> <span class="token punctuation">=</span> <span class="token string">&quot;lotusnode&quot;</span>
  <span class="token key property">Url</span> <span class="token punctuation">=</span> <span class="token string">&quot;/ip4/127.0.0.1/tcp/1234&quot;</span>
  <span class="token key property">Token</span> <span class="token punctuation">=</span> <span class="token string">&quot;eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJBbGxvdyI6WyJyZWFkIiwid3JpdGUiLCJzaWduIiwiYWRtaW4iXX0.Ne3JsfHHhN6BgDtdsvLYfUaRC3eJPH_7KrBsMRBdplc&quot;</span>

<span class="token punctuation">[</span><span class="token table class-name">AuthNode</span><span class="token punctuation">]</span>
  <span class="token key property">Url</span> <span class="token punctuation">=</span> <span class="token string">&quot;&quot;</span>
  <span class="token key property">Token</span> <span class="token punctuation">=</span> <span class="token string">&quot;&quot;</span>
</code></pre></div><p>ğŸ’ <strong>åˆå§‹åŒ–å‘½ä»¤æ‰§è¡ŒæˆåŠŸåå°†ä¼šç”Ÿæˆ<code>droplet repo</code>,åœ¨ä½¿ç”¨æ—¶éœ€æ ¹æ®å®é™…ç¯å¢ƒé…ç½®ã€‚</strong></p> <p><code>droplet</code> é¦–æ¬¡å¯åŠ¨æ—¶ä¼šç”Ÿæˆé…ç½®é¡¹ï¼Œé»˜è®¤ç›®å½•ä¸º: <code>~/.droplet/config.toml</code>,å¯ä»¥æ ¹æ®å®é™…æƒ…å†µï¼Œå¯¹é…ç½®æ–‡ä»¶è¿›è¡Œè®¾ç½®ã€‚å…·ä½“é…ç½®æ–‡ä»¶çš„è§£é‡Šè¯·å‚è€ƒï¼š<a href="/zh/operation/dropleté…ç½®è§£é‡Š.html">dropleté…ç½®è§£é‡Š</a> <em>tips:</em> ä¿®æ”¹å®Œé…ç½®æ–‡ä»¶ä¹‹åéœ€è¦é‡å¯<code>droplet</code>æœåŠ¡ï¼š</p> <div class="language-bash extra-class"><pre class="language-bash"><code>$ <span class="token function">nohup</span> ./droplet run <span class="token operator">&gt;</span> droplet.log <span class="token operator"><span class="token file-descriptor important">2</span>&gt;</span><span class="token file-descriptor important">&amp;1</span> <span class="token operator">&amp;</span>
</code></pre></div><blockquote><p>å·²ç»ç”Ÿæˆ <code>repo</code> ä¹‹åï¼Œåˆå§‹åŒ–æ‰€éœ€çš„å‚æ•°è¢«å†™å…¥é…ç½®æ–‡ä»¶ï¼Œæ•…åç»­å¯åŠ¨æ— éœ€å†åŠ ã€‚</p></blockquote> <h3 id="æ·»åŠ -miner"><a href="#æ·»åŠ -miner" class="header-anchor">#</a> æ·»åŠ  miner</h3> <div class="language- extra-class"><pre class="language-text"><code>./droplet actor upsert t01041
</code></pre></div><h3 id="è®¾ç½®dropletä¿¡æ¯åˆ°ç½‘ç»œ"><a href="#è®¾ç½®dropletä¿¡æ¯åˆ°ç½‘ç»œ" class="header-anchor">#</a> è®¾ç½®dropletä¿¡æ¯åˆ°ç½‘ç»œ</h3> <ul><li>æŸ¥è¯¢ <code>droplet</code> çš„å¯¹ç­‰èŠ‚ç‚¹ç›‘å¬åœ°å€ï¼Œè·å–<code>addrs</code>å’Œ<code>peer-id</code>å€¼ã€‚</li></ul> <div class="language-bash extra-class"><pre class="language-bash"><code>./droplet net listen

/ip4/127.0.0.1/tcp/58418/p2p/12D3KooWQftXTGFBKooKuyaNkugapUzi4VmjxEKTgkpsNCQufKBK
/ip4/192.168.19.67/tcp/58418/p2p/12D3KooWQftXTGFBKooKuyaNkugapUzi4VmjxEKTgkpsNCQufKBK
/ip6/::1/tcp/49770/p2p/12D3KooWQftXTGFBKooKuyaNkugapUzi4VmjxEKTgkpsNCQufKBK
</code></pre></div><ul><li>æ·»åŠ ä¸€ä¸ª <code>miner</code> åˆ°dropletä¸­ï¼Œç”¨äºç®¡ç†è¿™ä¸ªèŠ‚ç‚¹å­˜å‚¨å’Œæ£€ç´¢ä½¿ç”¨</li></ul> <div class="language-bash extra-class"><pre class="language-bash"><code>./droplet actor upsert --account test-1041 f01041
</code></pre></div><p><code>--account</code>å¯ä»¥éšæ„å–åï¼Œç”¨äºæ ‡è®°<code>miner</code>çš„åç§°ã€‚</p> <ul><li>å°† <code>miners</code> çš„ <code>Multiaddrs</code> å’Œ <code>peer-id</code> è®¾ç½®ä¸º <code>droplet</code> çš„ <code>Multiaddrs</code> å’Œ <code>peer-id</code></li></ul> <div class="language-bash extra-class"><pre class="language-bash"><code>./droplet actor set-addrs --miner<span class="token operator">=</span>t01041 /ip4/192.168.19.67/tcp/58418
Requested multiaddrs change <span class="token keyword">in</span> message bafy2bzaceceqgxmiledunzjwbajpghzzn4iibvxhoifsrz4q2grzsirgznzdg

./droplet actor set-peer-id --miner<span class="token operator">=</span>f01041 12D3KooWQftXTGFBKooKuyaNkugapUzi4VmjxEKTgkpsNCQufKBK
  Requested peerid change <span class="token keyword">in</span> message bafy2bzacea4ruzf4hvyezzhjkt6hnzz5tpk7ttuw6jmyoadqasqtujypqitp2
</code></pre></div><ul><li>ç­‰å¾…æ¶ˆæ¯ä¸Šé“¾åï¼ŒæŸ¥çœ‹ <code>miner</code> çš„ä»£ç†ä¿¡æ¯</li></ul> <div class="language-bash extra-class"><pre class="language-bash"><code>./droplet actor info --miner t01041
peers: 12D3KooWQftXTGFBKooKuyaNkugapUzi4VmjxEKTgkpsNCQufKBK
addr: /ip4/192.168.19.67/tcp/58418
</code></pre></div><h3 id="æŒ‚å•"><a href="#æŒ‚å•" class="header-anchor">#</a> æŒ‚å•</h3> <h4 id="å­˜å‚¨æŒ‚å•"><a href="#å­˜å‚¨æŒ‚å•" class="header-anchor">#</a> å­˜å‚¨æŒ‚å•</h4> <p>SPè®¾ç½®è®¢å•å­˜å‚¨è®¢å•çš„ä»·æ ¼å’Œå­˜å‚¨æ–‡ä»¶å¤§å°é™åˆ¶ç­‰ä¿¡æ¯ã€‚</p> <div class="language-bash extra-class"><pre class="language-bash"><code>./droplet storage ask <span class="token builtin class-name">set</span> --price<span class="token operator">=</span><span class="token number">0</span>.01fil --verified-price<span class="token operator">=</span><span class="token number">0</span>.02fil --min-piece-size<span class="token operator">=</span>512b --max-piece-size<span class="token operator">=</span>512M t01041
</code></pre></div><p>å¯ä»¥é€šè¿‡å‘½ä»¤è¡Œå·¥å…·æ£€æŸ¥å®šä»·ä¿¡æ¯ï¼š</p> <div class="language-shell extra-class"><pre class="language-shell"><code>./droplet storage ask get t01041
Price per GiB/Epoch  Verified  Min. Piece Size <span class="token punctuation">(</span>padded<span class="token punctuation">)</span>  Max. Piece Size <span class="token punctuation">(</span>padded<span class="token punctuation">)</span>  Expiry <span class="token punctuation">(</span>Epoch<span class="token punctuation">)</span>  Expiry <span class="token punctuation">(</span>Appx. Rem. Time<span class="token punctuation">)</span>  Seq. No.
<span class="token number">0.01</span> FIL             <span class="token number">0.02</span> FIL  <span class="token number">512</span> B                     <span class="token number">521</span> MiB                     <span class="token number">161256</span>          719h59m0s                 <span class="token number">0</span>
</code></pre></div><h4 id="æ£€ç´¢æŒ‚å•"><a href="#æ£€ç´¢æŒ‚å•" class="header-anchor">#</a> æ£€ç´¢æŒ‚å•</h4> <ul><li>è®¾ç½®æ”¶æ¬¾åœ°å€</li></ul> <p>Droplet ä¸­çš„æ¯ä¸€ä¸ª miner éƒ½æœ‰å¯¹åº”çš„é…ç½®, å…¶ä¸­ <code>RetrievalPaymentAddress</code> é…ç½®çš„æ˜¯ miner çš„æ£€ç´¢æ”¶æ¬¾åœ°å€ã€‚</p> <p>ç¤ºä¾‹é…ç½®å¦‚ä¸‹:</p> <div class="language-toml extra-class"><pre class="language-toml"><code><span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token table class-name">Miners</span><span class="token punctuation">]</span><span class="token punctuation">]</span>
<span class="token key property">Addr</span> <span class="token punctuation">=</span> <span class="token string">&quot;t01002&quot;</span>
<span class="token key property">RetrievalPaymentAddress</span> <span class="token punctuation">=</span> <span class="token string">&quot;f3umdpich3a7xpm3bgtn4cr3k3w7auck2waw4pk76vye5tqm7zxeaq5yuewy75p63gzc5bhzhmfyhuyltcro4a&quot;</span>

</code></pre></div><ul><li>è®¾ç½®è®¢å•ä»·æ ¼</li></ul> <p>è®¾ç½®å€¼é»˜è®¤çš„è®¢å•ä»·æ ¼</p> <div class="language-bash extra-class"><pre class="language-bash"><code>./droplet retrieval ask <span class="token builtin class-name">set</span> f01002
</code></pre></div><p>åŒæ—¶ï¼Œä¹Ÿå¯ä»¥è®¾ç½®æ•°æ®æ£€ç´¢è®¢å•çš„ä»·æ ¼ï¼Œä¸è®¾ç½®æ—¶ï¼Œé»˜è®¤ä¸º0.</p> <div class="language-bash extra-class"><pre class="language-bash"><code>./droplet retrieval ask <span class="token builtin class-name">set</span> <span class="token punctuation">\</span>
--price <span class="token number">0</span>.02fil <span class="token punctuation">\</span>
--unseal-price <span class="token number">0</span>.01fil <span class="token punctuation">\</span>
--payment-interval 1MB <span class="token punctuation">\</span>
f01002
</code></pre></div><h2 id="droplet-client"><a href="#droplet-client" class="header-anchor">#</a> droplet-client</h2> <h3 id="droplet-clientåˆå§‹åŒ–å¹¶å¯åŠ¨"><a href="#droplet-clientåˆå§‹åŒ–å¹¶å¯åŠ¨" class="header-anchor">#</a> droplet-clientåˆå§‹åŒ–å¹¶å¯åŠ¨</h3> <p><code>droplet-client</code> æ­£å¸¸è¿è¡Œéœ€è¦åŒæ­¥èŠ‚ç‚¹ã€ç­¾åèŠ‚ç‚¹ï¼ˆ<code>venus fullnode</code> å’Œ <code>lotus fullnode</code> å¯ä»¥ä½œä¸ºç­¾åèŠ‚ç‚¹ï¼‰ã€æ¶ˆæ¯èŠ‚ç‚¹ï¼ˆ<code>venus fullnode</code> å’Œ <code>lotus fullnode</code> å¯ä»¥ä½œä¸ºæ¶ˆæ¯èŠ‚ç‚¹ï¼‰åŠ <code>droplet</code>ï¼Œæ•…å…¶å¯ä»¥çµæ´»é…ç½®ï¼Œåªè¦ä¿è¯æ¶ˆæ¯èƒ½å¤Ÿæ­£å¸¸ç­¾åå¹¶ä¸Šé“¾å³å¯ã€‚</p> <p><code>droplet-client</code> éœ€è¦é…ç½® <code>--addr</code> ç”¨æ¥ç»‘å®šå®¢æˆ·çš„é’±åŒ…åœ°å€ï¼Œç”¨äºæ”¯ä»˜å®¢æˆ·ç«¯æŠµæŠ¼å’Œæ£€ç´¢è´¹ç”¨ã€‚</p> <p>è¿™é‡Œä»‹ç»å¸¸ç”¨çš„ä¸‰ç§å¯åŠ¨æ–¹å¼ï¼š</p> <h4 id="æ¥å…¥-venus-é“¾æœåŠ¡-æ¨è"><a href="#æ¥å…¥-venus-é“¾æœåŠ¡-æ¨è" class="header-anchor">#</a> æ¥å…¥ <code>Venus</code> é“¾æœåŠ¡(æ¨è)</h4> <p><code>sophon-gateway</code> çš„ç­¾å <code>API</code> åªæœ‰ <code>admin</code> æƒé™æ‰èƒ½è®¿é—®ï¼ˆå®‰å…¨è€ƒè™‘ï¼‰ï¼Œä¹Ÿå°±æ˜¯åªæœ‰é“¾æœåŠ¡ç»„ä»¶æ‰èƒ½è®¿é—®ï¼Œæ•… <code>droplet-client</code> æ— æ³•ä½¿ç”¨ï¼Œæ‰€ä»¥ç”¨æœ¬åœ°çš„ <code>venus-wallet</code> è¿›è¡Œç­¾åã€‚</p> <p><code>droplet-client</code>æ˜¯ç›´è¿<code>venus-wallet</code>è¿›è¡Œæœ¬åœ°ç­¾åï¼Œ<code>--addr</code>å¿…é¡»æŒ‡å®š<code>venus-wallet</code>æœ‰çš„åœ°å€æ‰å¯ä»¥ã€‚</p> <div class="language-shell extra-class"><pre class="language-shell"><code>./droplet-client run <span class="token punctuation">\</span>
--node-url<span class="token operator">=</span>/ip4/<span class="token operator">&lt;</span>venus_ip<span class="token operator">&gt;</span>/tcp/<span class="token operator">&lt;</span>port<span class="token operator">&gt;</span> <span class="token punctuation">\</span> 
--messager-url<span class="token operator">=</span>/ip4/<span class="token operator">&lt;</span>sophon-messager_ip<span class="token operator">&gt;</span>/tcp/<span class="token operator">&lt;</span>port<span class="token operator">&gt;</span> <span class="token punctuation">\</span>
--auth-token<span class="token operator">=</span><span class="token operator">&lt;</span>user-read-or-write-permission-token<span class="token operator">&gt;</span> <span class="token punctuation">\</span>
--signer-type<span class="token operator">=</span>wallet <span class="token punctuation">\</span>
--signer-url<span class="token operator">=</span>/ip4/<span class="token operator">&lt;</span>venus-wallet_ip<span class="token operator">&gt;</span>/tcp/<span class="token operator">&lt;</span>port<span class="token operator">&gt;</span> <span class="token punctuation">\</span>
--signer-toke<span class="token operator">=</span><span class="token operator">&lt;</span>wallet-token<span class="token operator">&gt;</span> <span class="token punctuation">\</span>
--addr<span class="token operator">=</span><span class="token operator">&lt;</span>signer address<span class="token operator">&gt;</span> <span class="token punctuation">\</span>
</code></pre></div><blockquote><p><code>venus-wallet</code> ç”Ÿæˆå…·æœ‰ç­¾åæƒé™çš„ <code>token</code> è¯·å‚è€ƒä¸Šæ–‡.</p></blockquote> <h4 id="è¿æ¥-venus-fullnode-å¯åŠ¨"><a href="#è¿æ¥-venus-fullnode-å¯åŠ¨" class="header-anchor">#</a> è¿æ¥ <code>venus fullnode</code> å¯åŠ¨</h4> <div class="language-shell extra-class"><pre class="language-shell"><code>./droplet-client run <span class="token punctuation">\</span>
--node-url<span class="token operator">=</span>/ip4/<span class="token operator">&lt;</span>venus_ip<span class="token operator">&gt;</span>/tcp/<span class="token operator">&lt;</span>port<span class="token operator">&gt;</span> <span class="token punctuation">\</span> 
--node-token<span class="token operator">=</span><span class="token operator">&lt;</span>node-token<span class="token operator">&gt;</span> <span class="token punctuation">\</span>
--signer-type<span class="token operator">=</span>wallet <span class="token punctuation">\</span>
--addr<span class="token operator">=</span><span class="token operator">&lt;</span>signer address<span class="token operator">&gt;</span> <span class="token punctuation">\</span>
</code></pre></div><h4 id="è¿æ¥-lotus-fullnode-å¯åŠ¨"><a href="#è¿æ¥-lotus-fullnode-å¯åŠ¨" class="header-anchor">#</a> è¿æ¥ <code>lotus fullnode</code> å¯åŠ¨</h4> <div class="language-shell extra-class"><pre class="language-shell"><code>./droplet-client run <span class="token punctuation">\</span>
--node-url<span class="token operator">=</span>/ip4/<span class="token operator">&lt;</span>venus_ip<span class="token operator">&gt;</span>/tcp/<span class="token operator">&lt;</span>port<span class="token operator">&gt;</span> <span class="token punctuation">\</span> 
--node-token<span class="token operator">=</span><span class="token operator">&lt;</span>node-token<span class="token operator">&gt;</span> <span class="token punctuation">\</span>
--signer-type<span class="token operator">=</span>lotusnode <span class="token punctuation">\</span>
--addr<span class="token operator">=</span><span class="token operator">&lt;</span>signer address<span class="token operator">&gt;</span> <span class="token punctuation">\</span>
</code></pre></div><p>è¿™äº›é…ç½®é¡¹ä¹Ÿå¯ä»¥åœ¨é…ç½®æ–‡ä»¶ä¸­è®¾ç½®ï¼Œå‚è§<a href="/zh/operation/droplet-clienté…ç½®è§£é‡Š.html">droplet-clienté…ç½®</a></p> <h3 id="å­˜å‚¨è®¢å•-å‘å•"><a href="#å­˜å‚¨è®¢å•-å‘å•" class="header-anchor">#</a> å­˜å‚¨è®¢å•ï¼ˆå‘å•ï¼‰</h3> <h4 id="åœ¨çº¿è®¢å•"><a href="#åœ¨çº¿è®¢å•" class="header-anchor">#</a> åœ¨çº¿è®¢å•</h4> <h5 id="_1-å¯¼å…¥å¾…å­˜å‚¨çš„æ•°æ®"><a href="#_1-å¯¼å…¥å¾…å­˜å‚¨çš„æ•°æ®" class="header-anchor">#</a> 1. å¯¼å…¥å¾…å­˜å‚¨çš„æ•°æ®</h5> <div class="language-shell extra-class"><pre class="language-shell"><code>./droplet-client data <span class="token function">import</span> <span class="token operator">&lt;</span>file path<span class="token operator">&gt;</span>
Import <span class="token number">1642491708527303001</span>, Root bafk2bzacedgv2xqys5ja4gycqipmg543ekxz3tjj6wwfexda352n55ahjldja
</code></pre></div><h5 id="_2-é€‰æ‹©æŒ‚å•-è¯¢ä»·"><a href="#_2-é€‰æ‹©æŒ‚å•-è¯¢ä»·" class="header-anchor">#</a> 2. é€‰æ‹©æŒ‚å•(è¯¢ä»·)</h5> <p>æµ‹è¯•è¿é€šæ€§ï¼Œä½¿ç”¨ <code>droplet-client</code> æ¥æŸ¥è¯¢ <code>miner</code> æŒ‚å•ä¿¡æ¯ï¼š</p> <div class="language-bash extra-class"><pre class="language-bash"><code>./droplet-client storage asks query f01041 
Ask: t01041
Price per GiB: <span class="token number">0.02</span> FIL
Verified Price per GiB: <span class="token number">0.01</span> FIL
Max Piece size: <span class="token number">8</span> MiB
Min Piece size: <span class="token number">512</span> B
</code></pre></div><h5 id="_3-å‘èµ·å­˜å‚¨è®¢å•-å‘å•"><a href="#_3-å‘èµ·å­˜å‚¨è®¢å•-å‘å•" class="header-anchor">#</a> 3. å‘èµ·å­˜å‚¨è®¢å•ï¼ˆå‘å•ï¼‰</h5> <div class="language-shell extra-class"><pre class="language-shell"><code>/droplet-client storage deals init
<span class="token comment"># è¾“å…¥éœ€è¦å­˜å‚¨çš„æ•°æ®çš„cid, `./droplet-client data local`å‘½ä»¤æŸ¥çœ‹</span>
Data CID <span class="token punctuation">(</span>from lotus client <span class="token function">import</span><span class="token punctuation">)</span>: bafk2bzacedgv2xqys5ja4gycqipmg543ekxz3tjj6wwfexda352n55ahjldja
<span class="token punctuation">..</span> calculating data size
PieceCid:  baga6ea4seaqpz47j4kqdiixpehmzk3uw5c4cmqvs5iyi7xf7rwkepfhdvowdiai  PayLoadSize: <span class="token number">809</span> PieceSize: <span class="token number">1024</span>
<span class="token comment"># è¾“å…¥æ•°æ®å­˜å‚¨å‘¨æœŸ</span>
Deal duration <span class="token punctuation">(</span>days<span class="token punctuation">)</span>: <span class="token number">180</span>
<span class="token comment"># è¾“å…¥æ¥å•çš„miner id</span>
Miner Addresses <span class="token punctuation">(</span>f0<span class="token punctuation">..</span> f0<span class="token punctuation">..</span><span class="token punctuation">)</span>, none to find: t01041
<span class="token punctuation">..</span> querying miner asks
-----
Proposing from t16qnfduxzpneb2m3rbdasvhgk7rmmo32zpiypkaq
	Balance: <span class="token number">9499.999999856612207905</span> FIL
Piece size: 1KiB <span class="token punctuation">(</span>Payload size: 809B<span class="token punctuation">)</span>
Duration: 4320h0m0s
Total price: ~0.0098876953124352 FIL <span class="token punctuation">(</span><span class="token number">0.000000019073486328</span> FIL per epoch<span class="token punctuation">)</span>
Verified: <span class="token boolean">false</span>
<span class="token comment"># ç¡®è®¤æ˜¯å¦æ¥å—è®¢å•ä»·æ ¼</span>
Accept <span class="token punctuation">(</span>yes/no<span class="token punctuation">)</span>: <span class="token function">yes</span>
<span class="token punctuation">..</span> executing
Deal <span class="token punctuation">(</span>t01051<span class="token punctuation">)</span> CID: bafyreihiln2ha6eaaos7kuhwpnvjvjlxmjnpsklym6hhucu2z776bf2or4
</code></pre></div><p>ç„¶åç­‰å¾…è®¢å•æ¶ˆæ¯ä¸Šé“¾ï¼Œä»¥åŠå­˜å‚¨æä¾›å•†å®Œæˆæ•°æ®å°è£…å³å¯ã€‚</p> <p><code>droplet-client</code> æŸ¥çœ‹è®¢å•:</p> <div class="language-shell extra-class"><pre class="language-shell"><code>./droplet-client storage deals list
DealCid      DealId  Provider  State                          On Chain?  Slashed?  PieceCID     Size    Price                    Duration  Verified
<span class="token punctuation">..</span>.76bf2or4  <span class="token number">0</span>       t01051    StorageDealCheckForAcceptance  N          N         <span class="token punctuation">..</span>.dvowdiai  <span class="token number">1016</span> B  <span class="token number">0.00992212295525724</span> FIL  <span class="token number">520205</span>    <span class="token boolean">false</span>
  Message: Provider state: StorageDealPublish
</code></pre></div><h4 id="ç¦»çº¿è®¢å•"><a href="#ç¦»çº¿è®¢å•" class="header-anchor">#</a> ç¦»çº¿è®¢å•</h4> <h5 id="_1-å¯¼å…¥è®¢å•å­˜å‚¨æ–‡ä»¶"><a href="#_1-å¯¼å…¥è®¢å•å­˜å‚¨æ–‡ä»¶" class="header-anchor">#</a> 1. å¯¼å…¥è®¢å•å­˜å‚¨æ–‡ä»¶</h5> <div class="language-bash extra-class"><pre class="language-bash"><code>./droplet-client data <span class="token function">import</span> ./README.md
Import <span class="token number">1642643014364955003</span>, Root bafk2bzaceaf4sallirkt63fqrojz5gaut7akiwxrclcsymqelqad7man3hc2c
</code></pre></div><h5 id="_2-è½¬ä¸ºcaræ–‡ä»¶"><a href="#_2-è½¬ä¸ºcaræ–‡ä»¶" class="header-anchor">#</a> 2. è½¬ä¸ºCARæ–‡ä»¶</h5> <div class="language-bash extra-class"><pre class="language-bash"><code>./droplet-client data generate-car ./README.md ./readme.md.car
</code></pre></div><h5 id="_3-è®¡ç®—caræ–‡ä»¶çš„cidå’Œpiece-size"><a href="#_3-è®¡ç®—caræ–‡ä»¶çš„cidå’Œpiece-size" class="header-anchor">#</a> 3. è®¡ç®—CARæ–‡ä»¶çš„<code>CID</code>å’Œ<code>Piece size</code></h5> <div class="language-shell extra-class"><pre class="language-shell"><code>./droplet-client data commP ./readme.md.car
CID:  baga6ea4seaqfewgysi3n3cjylkbfknr56vbemb2gwjfvpctqtjgpdweu7o3d6mq
Piece size:  <span class="token number">3.969</span> KiB
</code></pre></div><h5 id="_4-å‘èµ·è®¢å•"><a href="#_4-å‘èµ·è®¢å•" class="header-anchor">#</a> 4. å‘èµ·è®¢å•</h5> <div class="language-bash extra-class"><pre class="language-bash"><code>./droplet-client storage deals init <span class="token punctuation">\</span>
--manual-piece-cid<span class="token operator">=</span>baga6ea4seaqfewgysi3n3cjylkbfknr56vbemb2gwjfvpctqtjgpdweu7o3d6mq <span class="token punctuation">\</span>
--manual-piece-size<span class="token operator">=</span><span class="token number">4064</span> <span class="token punctuation">\</span>
bafk2bzaceaf4sallirkt63fqrojz5gaut7akiwxrclcsymqelqad7man3hc2c <span class="token punctuation">\</span>
f01051 <span class="token punctuation">\</span>
<span class="token number">0</span>.01fil <span class="token punctuation">\</span>
<span class="token number">518400</span>
bafyreiecguaxgtmgcanfco6huni4d6h6zs3w3bznermmiurtdos7r6hftm
</code></pre></div><ul><li><code>manual-piece-cid</code>: åœ¨ç¬¬3æ­¥è®¡æ‰§è¡Œ<code>data commP</code>åè¾“å‡ºçš„<code>CID</code></li> <li><code>manual-piece-size</code>: åœ¨ç¬¬3æ­¥æ‰§è¡Œ<code>data commP</code>åè¾“å‡ºçš„<code>Piece size</code>.éœ€è¦æ³¨æ„çš„æ˜¯, åœ¨ä½¿ç”¨è¿™ä¸ªå‚æ•°æ—¶, è¿™ä¸ªå€¼éœ€è¦è½¬æ¢æˆ<code>byte</code>çš„å¤§å°, åœ¨è¿™é‡Œä¸º3.969kibè½¬æ¢æˆbyteçš„å¤§å°æ˜¯4064.
ä¹‹å4ä¸ªå‚æ•°åˆ†åˆ«æ˜¯:</li> <li>ç¬¬ä¸€æ­¥æ‰§è¡Œ<code>import</code>å‘½ä»¤åè¾“å…¥çš„<code>Root</code></li> <li>çŸ¿å·¥ID</li> <li>åå•†æ”¯ä»˜è®¢å•çš„è´¹ç”¨<code>0.01fil</code>, **è¿™ä¸ªå€¼å¿…é¡»å¤§äºæ—·å·¥è®¾ç½®çš„<code>storage ask</code>ä¸­çš„æœ€å°å€¼, ä¸ç„¶è®¢å•ä¼šè¢«æ‹’ç»æ‰.</li> <li>åˆçº¦å‘¨æœŸ, å¿…é¡»å¤§äºç­‰äº180å¤©, è¿™ä¸ªå€¼ä¹Ÿéœ€è¦æ¢æˆepochä¸ºå•ä½, æ¯ä¸ªepoch=30ç§’, ç¤ºä¾‹ä¸­:518400 = 180å¤©.</li></ul> <p>æœ€åçš„è¾“å‡º<code>bafyreidfs2w7lxacq6zpqck7q4zimyitidxyahojf7dbbuz5zr7irdlmqa</code>ä¸ºproposeçš„cid.
çº¿ä¸Šè®¢å•ä¸€æ ·, æ­¤æ—¶å¯ä»¥é€šè¿‡droplet-clientæŸ¥çœ‹dealä¿¡æ¯, è®¢å•çš„æœ€åçŠ¶æ€ä¼šåœæ­¢åœ¨<code>StorageDealWaitingForData</code></p> <div class="language-shell extra-class"><pre class="language-shell"><code>./droplet-client storage deals list
DealCid      DealId  Provider  State                          On Chain?        Slashed?  PieceCID     Size       Price                    Duration  Verified  
<span class="token punctuation">..</span>.s7r6hftm  <span class="token number">0</span>       t01051    StorageDealCheckForAcceptance  N                N         <span class="token punctuation">..</span>.u7o3d6mq  <span class="token number">3.969</span> KiB  <span class="token number">5196.63</span> FIL              <span class="token number">519663</span>    <span class="token boolean">false</span>     
  Message: Provider state: StorageDealWaitingForData
</code></pre></div><p>ğŸ’ <strong>å¦‚æœ <code>droplet-client</code> å‡ºç°ä¸‹é¢çš„å†…å®¹:</strong></p> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token number">2022</span>-01-20T12:47:27.966+0800	ERROR	storagemarket_impl	clientstates/client_states.go:324	deal bafyreif2k2e4acraxk33z3llwo5gqmk32tfrdj2kocjanojbfbf6vj72vm failed: adding market funds failed: estimating gas used: message execution failed: <span class="token builtin class-name">exit</span> SysErrInsufficientFunds<span class="token punctuation">(</span><span class="token number">6</span><span class="token punctuation">)</span>
</code></pre></div><p>è¯´æ˜é’±åŒ…ä½™é¢ä¸è¶³,è°ƒç”¨å‘½ä»¤ <code>./droplet-client actor-funds add --address f0xxx --from f3xxxxxxxxxx 100fil</code> å……å€¼åé‡æ–°æ‰§è¡Œå‘½ä»¤.</p> <h5 id="_5-å¯¼å…¥ç¦»çº¿è®¢å•çš„æ•°æ®æ–‡ä»¶"><a href="#_5-å¯¼å…¥ç¦»çº¿è®¢å•çš„æ•°æ®æ–‡ä»¶" class="header-anchor">#</a> 5. å¯¼å…¥ç¦»çº¿è®¢å•çš„æ•°æ®æ–‡ä»¶</h5> <p>éœ€è¦å°†ä¹‹å‰ç¬¬2æ­¥ç”Ÿæˆçš„<code>.car</code>æ–‡ä»¶çº¿ä¸‹ä¼ è¾“åˆ°droplet, å¹¶é€šè¿‡dropletå‘½ä»¤å¯¼å…¥æ•°æ®:</p> <div class="language-shell extra-class"><pre class="language-shell"><code>./droplet storage deal import-data bafyreiecguaxgtmgcanfco6huni4d6h6zs3w3bznermmiurtdos7r6hftm ./readme.md.car
</code></pre></div><p>å†æ¬¡æŸ¥çœ‹çŠ¶æ€, è®¢å•çŠ¶æ€æ›´æ–°ä¸º<code>StorageDealPublishing</code>:</p> <div class="language-shell extra-class"><pre class="language-shell"><code>./droplet-client storage deals list
DealCid      DealId  Provider  State                          On Chain?        Slashed?  PieceCID     Size       Price                    Duration  Verified  
<span class="token punctuation">..</span>.s7r6hftm  <span class="token number">0</span>       t01051    StorageDealCheckForAcceptance  N                N         <span class="token punctuation">..</span>.u7o3d6mq  <span class="token number">3.969</span> KiB  <span class="token number">5196.63</span> FIL              <span class="token number">519663</span>    <span class="token boolean">false</span>     
Message: Provider state: StorageDealPublishing
</code></pre></div><p>æœ€åç­‰å¾…è®¢å•çŠ¶æ€å˜åŒ–ä¸º<code>StorageDealAwaitingPreCommit</code> å°±å¯ä»¥è¿›è¡Œè®¢å•æ•°æ®çš„å°è£…äº†ã€‚</p> <h1 id="æäº¤æ•°æ®æ£€ç´¢è®¢å•"><a href="#æäº¤æ•°æ®æ£€ç´¢è®¢å•" class="header-anchor">#</a> æäº¤æ•°æ®æ£€ç´¢è®¢å•</h1> <p>ç”¨æˆ·é€šè¿‡ <code>minerID</code> å’Œ <code>Data CID</code> å°±å¯ä»¥å‘èµ·æ•°æ®æ£€ç´¢è®¢å•</p> <div class="language-shell extra-class"><pre class="language-shell"><code>./droplet-client retrieval retrieve --provider t01020 bafk2bzacearla6en6crpouxo72d5lhr3buajbzjippl63bfsd2m7rsyughu42 test.txt
Recv <span class="token number">0</span> B, Paid <span class="token number">0</span> FIL, Open <span class="token punctuation">(</span>New<span class="token punctuation">)</span>, 0s
Recv <span class="token number">0</span> B, Paid <span class="token number">0</span> FIL, DealProposed <span class="token punctuation">(</span>WaitForAcceptance<span class="token punctuation">)</span>, 16ms
Recv <span class="token number">0</span> B, Paid <span class="token number">0</span> FIL, DealAccepted <span class="token punctuation">(</span>Accepted<span class="token punctuation">)</span>, 26ms
Recv <span class="token number">0</span> B, Paid <span class="token number">0</span> FIL, PaymentChannelSkip <span class="token punctuation">(</span>Ongoing<span class="token punctuation">)</span>, 27ms
Recv <span class="token number">1.479</span> KiB, Paid <span class="token number">0</span> FIL, BlocksReceived <span class="token punctuation">(</span>Ongoing<span class="token punctuation">)</span>, 30ms
Recv <span class="token number">1.479</span> KiB, Paid <span class="token number">0</span> FIL, AllBlocksReceived <span class="token punctuation">(</span>BlocksComplete<span class="token punctuation">)</span>, 33ms
Recv <span class="token number">1.479</span> KiB, Paid <span class="token number">0</span> FIL, Complete <span class="token punctuation">(</span>CheckComplete<span class="token punctuation">)</span>, 35ms
Recv <span class="token number">1.479</span> KiB, Paid <span class="token number">0</span> FIL, CompleteVerified <span class="token punctuation">(</span>FinalizingBlockstore<span class="token punctuation">)</span>, 36ms
Recv <span class="token number">1.479</span> KiB, Paid <span class="token number">0</span> FIL, BlockstoreFinalized <span class="token punctuation">(</span>Completed<span class="token punctuation">)</span>, 36ms
Success
</code></pre></div></div> <footer class="page-edit"><div class="edit-link"><a href="https://github.com/ipfs-force-community/damocles-docs/edit/main/docs/zh/operation/quick_start.md" target="_blank" rel="noopener noreferrer">Edit this page</a> <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></div> <!----></footer> <div class="page-nav"><p class="inner"><!----> <span class="next"><a href="/zh/operation/market-client-config.html">
        droplet-client é…ç½®
      </a>
      â†’
    </span></p></div> </main></div><div class="global-ui"><!----></div></div>
    <script src="/assets/js/app.3b420fac.js" defer></script><script src="/assets/js/2.d646fae5.js" defer></script><script src="/assets/js/40.eb08e8b4.js" defer></script>
  </body>
</html>
