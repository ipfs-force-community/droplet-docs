<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Configurations of droplet | Droplet</title>
    <meta name="generator" content="VuePress 1.8.0">
    <link rel="icon" href="/assets/droplet-icon.png">
    <script async="true" src="https://www.googletagmanager.com/gtag/js?id=G-GRVZ8072DQ"></script>
    <script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'G-GRVZ8072DQ');</script>
    <meta name="description" content="Droplet, formerly known as Venus Deal Service, is THE Filecoin storage deal solution.">
    
    <link rel="preload" href="/assets/css/0.styles.72e9161a.css" as="style"><link rel="preload" href="/assets/js/app.e4dd30fd.js" as="script"><link rel="preload" href="/assets/js/2.d646fae5.js" as="script"><link rel="preload" href="/assets/js/17.b592e31e.js" as="script"><link rel="prefetch" href="/assets/js/10.54d869d8.js"><link rel="prefetch" href="/assets/js/11.0709d827.js"><link rel="prefetch" href="/assets/js/12.1067bf79.js"><link rel="prefetch" href="/assets/js/13.79dca4c5.js"><link rel="prefetch" href="/assets/js/14.90209d4e.js"><link rel="prefetch" href="/assets/js/15.cfd4f0ef.js"><link rel="prefetch" href="/assets/js/16.0655211a.js"><link rel="prefetch" href="/assets/js/18.dd25ebca.js"><link rel="prefetch" href="/assets/js/19.ae250042.js"><link rel="prefetch" href="/assets/js/20.e55ae312.js"><link rel="prefetch" href="/assets/js/21.8ec14afd.js"><link rel="prefetch" href="/assets/js/22.20cd45db.js"><link rel="prefetch" href="/assets/js/23.b96f8066.js"><link rel="prefetch" href="/assets/js/24.98c32c85.js"><link rel="prefetch" href="/assets/js/25.bc845610.js"><link rel="prefetch" href="/assets/js/26.95a23eb5.js"><link rel="prefetch" href="/assets/js/27.7420f3da.js"><link rel="prefetch" href="/assets/js/28.308f449b.js"><link rel="prefetch" href="/assets/js/29.dc474eae.js"><link rel="prefetch" href="/assets/js/3.4f172ebf.js"><link rel="prefetch" href="/assets/js/30.3c35e818.js"><link rel="prefetch" href="/assets/js/31.4d803608.js"><link rel="prefetch" href="/assets/js/32.195b1e04.js"><link rel="prefetch" href="/assets/js/33.e36813ef.js"><link rel="prefetch" href="/assets/js/34.31db2e2c.js"><link rel="prefetch" href="/assets/js/35.25c548aa.js"><link rel="prefetch" href="/assets/js/36.62f647ba.js"><link rel="prefetch" href="/assets/js/37.268ad578.js"><link rel="prefetch" href="/assets/js/38.29313c11.js"><link rel="prefetch" href="/assets/js/39.6ffc3ac2.js"><link rel="prefetch" href="/assets/js/4.ee54e947.js"><link rel="prefetch" href="/assets/js/40.eb08e8b4.js"><link rel="prefetch" href="/assets/js/41.f90b1bb5.js"><link rel="prefetch" href="/assets/js/5.b5bd5abf.js"><link rel="prefetch" href="/assets/js/6.4fea068b.js"><link rel="prefetch" href="/assets/js/7.fc8c7bc4.js"><link rel="prefetch" href="/assets/js/8.9147db7e.js"><link rel="prefetch" href="/assets/js/9.a8371828.js">
    <link rel="stylesheet" href="/assets/css/0.styles.72e9161a.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><img src="/assets/droplet-icon.png" alt="Droplet" class="logo"> <span class="site-name can-hide">Droplet</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/intro/" class="nav-link">
  Introduction
</a></div><div class="nav-item"><a href="/operation/" class="nav-link router-link-active">
  Deployment &amp; Operations
</a></div><div class="nav-item"><a href="/about/" class="nav-link">
  About
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Select language" class="dropdown-title"><span class="title">Languages</span> <span class="arrow down"></span></button> <button type="button" aria-label="Select language" class="mobile-dropdown-title"><span class="title">Languages</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/operation/market-config.html" aria-current="page" class="nav-link router-link-exact-active router-link-active">
  English
</a></li><li class="dropdown-item"><!----> <a href="/zh/operation/market-config.html" class="nav-link">
  简体中文
</a></li></ul></div></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/intro/" class="nav-link">
  Introduction
</a></div><div class="nav-item"><a href="/operation/" class="nav-link router-link-active">
  Deployment &amp; Operations
</a></div><div class="nav-item"><a href="/about/" class="nav-link">
  About
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Select language" class="dropdown-title"><span class="title">Languages</span> <span class="arrow down"></span></button> <button type="button" aria-label="Select language" class="mobile-dropdown-title"><span class="title">Languages</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/operation/market-config.html" aria-current="page" class="nav-link router-link-exact-active router-link-active">
  English
</a></li><li class="dropdown-item"><!----> <a href="/zh/operation/market-config.html" class="nav-link">
  简体中文
</a></li></ul></div></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>Deployment</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/operation/start.html" class="sidebar-link">Getting started</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>Configurations</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/operation/market-config.html" aria-current="page" class="active sidebar-link">Droplet config</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/operation/market-config.html#data-transfer-parameter-configuration" class="sidebar-link">Data Transfer Parameter Configuration</a></li><li class="sidebar-sub-header"><a href="/operation/market-config.html#basic-parameter-configuration" class="sidebar-link">Basic Parameter Configuration</a></li><li class="sidebar-sub-header"><a href="/operation/market-config.html#droplet-network-configuration" class="sidebar-link">droplet Network Configuration</a></li><li class="sidebar-sub-header"><a href="/operation/market-config.html#venus-chain-service-configuration" class="sidebar-link">Venus Chain Service Configuration</a></li><li class="sidebar-sub-header"><a href="/operation/market-config.html#miner-configuration" class="sidebar-link">Miner Configuration</a></li><li class="sidebar-sub-header"><a href="/operation/market-config.html#database-configuration" class="sidebar-link">Database Configuration</a></li><li class="sidebar-sub-header"><a href="/operation/market-config.html#sector-storage-configuration" class="sidebar-link">Sector Storage Configuration</a></li><li class="sidebar-sub-header"><a href="/operation/market-config.html#log-settings" class="sidebar-link">Log Settings</a></li><li class="sidebar-sub-header"><a href="/operation/market-config.html#dag-storage-settings" class="sidebar-link">DAG Storage Settings</a></li><li class="sidebar-sub-header"><a href="/operation/market-config.html#data-retrieval" class="sidebar-link">Data Retrieval</a></li><li class="sidebar-sub-header"><a href="/operation/market-config.html#metric-configuration" class="sidebar-link">Metric Configuration</a></li></ul></li><li><a href="/operation/client-config.html" class="sidebar-link">Client config</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>Operations</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/operation/prep-datasets.html" class="sidebar-link">Preping large datasets</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>Migration</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/operation/migrate-v1-to-v2.html" class="sidebar-link">Upgrading to droplet 2.x</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="configurations-of-droplet"><a href="#configurations-of-droplet" class="header-anchor">#</a> Configurations of droplet</h1> <p>A typical <code>droplet</code> configuration looks like this:</p> <div class="language- extra-class"><pre class="language-text"><code>
# ****** Data transfer parameter configuration ***********
SimultaneousTransfersForStorage = 20
SimultaneousTransfersForStoragePerClient = 20
SimultaneousTransfersForRetrieval = 20


# ****** Global Basic Parameter Configuration ***********
[CommonProvider]
   ConsiderOnlineStorageDeals = true
   Consider OfflineStorageDeals = true
   ConsiderOnlineRetrievalDeals = true
   ConsiderOfflineRetrievalDeals = true
   ConsiderVerifiedStorageDeals = true
   ConsiderUnverifiedStorageDeals = true
   PieceCidBlocklist = []
   ExpectedSealDuration = &quot;24h0m0s&quot;
   MaxDealStartDelay = &quot;336h0m0s&quot;
   PublishMsgPeriod = &quot;1h0m0s&quot;
   MaxDealsPerPublishMsg = 8
   MaxProviderCollateralMultiplier = 2
   Filter = &quot;&quot;
   RetrievalFilter = &quot;&quot;
   TransferPath = &quot;&quot;
   MaxPublishDealsFee = &quot;0 FIL&quot;
   MaxMarketBalanceAddFee = &quot;0 FIL&quot;
   RetrievalPaymentAddress = &quot;&quot;
   DealPublishAddress = []
   [CommonProvider. RetrievalPricing]
     Strategy = &quot;default&quot;
     [CommonProvider. RetrievalPricing. Default]
       VerifiedDealsFreeTransfer = true
     [CommonProvider. RetrievalPricing. External]
       Path = &quot;&quot;
    

Each miner can have independent basic parameters. If there is no configuration, the global configuration will be used. The configuration options are as follows:

# ****** Miner Basic Parameter Configuration ********
[[Miners]]
   Addr = &quot;f01000&quot;
   Account = &quot;testuser01&quot;
  
    ConsiderOnlineStorageDeals = true
    ConsiderOfflineStorageDeals = true
    ConsiderOnlineRetrievalDeals = true
    ConsiderOfflineRetrievalDeals = true
    ConsiderVerifiedStorageDeals = true
    ConsiderUnverifiedStorageDeals = true
    PieceCidBlocklist = []
    ExpectedSealDuration = &quot;24h0m0s&quot;
    MaxDealStartDelay = &quot;336h0m0s&quot;
    PublishMsgPeriod = &quot;1h0m0s&quot;
    MaxDealsPerPublishMsg = 8
    MaxProviderCollateralMultiplier = 2
    Filter = &quot;&quot;
    RetrievalFilter = &quot;&quot;
    TransferPath = &quot;/mnt/transfer&quot;
    MaxPublishDealsFee = &quot;0 FIL&quot;
    MaxMarketBalanceAddFee = &quot;0 FIL&quot;
    RetrievalPaymentAddress = &quot;&quot;
    DealPublishAddress = []
    [CommonProvider. RetrievalPricing]
      Strategy = &quot;default&quot;
      [CommonProvider. RetrievalPricing. Default]
        VerifiedDealsFreeTransfer = true
      [CommonProvider. RetrievalPricing. External]
        Path = &quot;&quot;

# ****** droplet network configuration ***********
[API]
   ListenAddress = &quot;/ip4/127.0.0.1/tcp/41235&quot;
   RemoteListenAddress = &quot;&quot;
   Secret = &quot;e647ee23cf95424162b974cd641b6a6479cbc7cb1209cc755f762c8248d50ba4&quot;
   Timeout = &quot;30s&quot;

[Libp2p]
   ListenAddresses = [&quot;/ip4/0.0.0.0/tcp/58418&quot;, &quot;/ip6/::/tcp/0&quot;]
   AnnounceAddresses = []
   NoAnnounceAddresses = []
   PrivateKey = &quot;08011240d47934b6fccf8b79786335a55ccc04bdb9c92866cae2c0cea2fdefe0f2e7c18650dfbde5dd126c2a23a0d1c60686d3dedd064b67ba97c6161dd8007f0675e&quot;


# ****** Venus Chain Service Configuration ***********
[Node]
   Url = &quot;/ip4/192.168.200.151/tcp/3453&quot;
   Token = &quot;eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJuYW1lIjoidGVzdC11c2VyMDEiLCJwZXJtIjoic2lnbiIsImV4dCI6IiJ9.ETjNy3HMDS3ScZ3cax9xYb6AopNWYp4y71lZGCvYxMg&quot;

[Messager]
   Url = &quot;/ip4/127.0.0.1/tcp/39812&quot;
   Token = &quot;eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJuYW1lIjoidGVzdC11c2VyMDEiLCJwZXJtIjoic2lnbiIsImV4dCI6IiJ9.ETjNy3HMDS3ScZ3cax9xYb6AopNWYp4y71lZGCvYxMg&quot;

[Signer]
   Type = &quot;gateway&quot;
   Url = &quot;/ip4/127.0.0.1/tcp/45132&quot;
   Token = &quot;eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJuYW1lIjoidGVzdC11c2VyMDEiLCJwZXJtIjoic2lnbiIsImV4dCI6IiJ9.ETjNy3HMDS3ScZ3cax9xYb6AopNWYp4y71lZGCvYxMg&quot;

[AuthNode]
   Url = &quot;http://127.0.0.1:8989&quot;
   Token = &quot;eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJuYW1lIjoidGVzdC11c2VyMDEiLCJwZXJtIjoic2lnbiIsImV4dCI6IiJ9.ETjNy3HMDS3ScZ3cax9xYb6AopNWYp4y71lZGCvYxMg&quot;



# ********** Database Settings ********
[Mysql]
ConnectionString = &quot;&quot;
MaxOpenConn = 100
MaxIdleConn = 100
ConnMaxLifeTime = &quot;1m&quot;
Debug = false


# ********* Sector Storage Setting ***********
[Piece Storage]
S3 = []

[[PieceStorage. Fs]]
Name = &quot;local&quot;
ReadOnly = false
Path = &quot;./.vscode/test&quot;


# *********** Log Settings ***********
[Journal]
Path = &quot;journal&quot;


# ********** DAG Storage Settings ********

[DAGStore]
RootDir = &quot;/root/.droplet/dagstore&quot;
MaxConcurrentIndex = 5
MaxConcurrentReadyFetches = 0
MaxConcurrencyStorageCalls = 100
GCInterval = &quot;1m0s&quot;
Transient = &quot;&quot;
Index = &quot;&quot;
Use Transient = false


# ********** Data Retrieval Configuration ********

RetrievalPaymentAddress = &quot;&quot;



# ****** Metric Configuration ***********
[Metrics]
   Enabled = false
   [Metrics. Exporter]
     Type = &quot;prometheus&quot;
     [Metrics. Exporter. Prometheus]
       RegistryType = &quot;define&quot;
       Namespace = &quot;&quot;
       EndPoint = &quot;/ip4/0.0.0.0/tcp/4568&quot;
       Path = &quot;/debug/metrics&quot;
       ReportingPeriod = &quot;10s&quot;
     [Metrics. Exporter. Graphite]
       Namespace = &quot;&quot;
       Host = &quot;127.0.0.1&quot;
       Port = 4568
       ReportingPeriod = &quot;10s&quot;

</code></pre></div><p>Next, using the above as the base, we will walk you through basic parameters, network configuration, Venus component configuration and other configuration options.</p> <h2 id="data-transfer-parameter-configuration"><a href="#data-transfer-parameter-configuration" class="header-anchor">#</a> Data Transfer Parameter Configuration</h2> <div class="language- extra-class"><pre class="language-text"><code># Store the maximum number of simultaneous transfers for storage deals
# Integer type, default: 20
SimultaneousTransfersForStorage = 20

# The maximum number of simultaneous transfers of storage deal per client
# Integer type, default: 20
SimultaneousTransfersForStoragePerClient = 20

# The maximum number of simultaneous data transfers
# Integer type, default: 20
SimultaneousTransfersForRetrieval = 20
</code></pre></div><h2 id="basic-parameter-configuration"><a href="#basic-parameter-configuration" class="header-anchor">#</a> Basic Parameter Configuration</h2> <p>The configuration mainly sets the preferences of how the market service should work. The functions of each configuration options are as follows:</p> <div class="language- extra-class"><pre class="language-text"><code># Whether to accept online storage deals
# Boolean value, defaults to true
ConsiderOnlineStorageDeals = true

# Whether to accept offline storage deals
# Boolean value, defaults to true
ConsiderOfflineStorageDeals = true

# Whether to accept online data retrieval requests
# Boolean value, defaults to true
ConsiderOnlineRetrievalDeals = true

# Decide whether to accept offline data retrieval requests
# Boolean value, defaults to true
ConsiderOfflineRetrievalDeals = true

# Whether to accept verified storage deals
# Boolean value, defaults to true
ConsiderVerifiedStorageDeals = true

# Whether to accept unverified storage deals
# Boolean value, defaults to true
ConsiderUnverifiedStorageDeals = true

# Storage deal data blacklist
# string array where each string is a CID, the default is empty
# CID data in the blacklist will not be used to fullfil deals
PieceCidBlocklist = []

# The maximum expected time for the storage deal to be sealed
# Time string, default: &quot;24h0m0s&quot;
# The time string is a string composed of numbers and time units. Numbers include integers and decimals. Legal units include &quot;ns&quot;, &quot;us&quot; (or &quot;µs&quot;), &quot;ms&quot;, &quot;s&quot;, &quot;m&quot; , &quot;h&quot;.
ExpectedSealDuration = &quot;24h0m0s&quot;

# Max delay before starting sealing a storage deal
# Time string, default: &quot;336h0m0s&quot;
MaxDealStartDelay = &quot;336h0m0s&quot;

# Periods between publishing messages
# Time string Default: &quot;1h0m0s&quot;
PublishMsgPeriod = &quot;5m0s&quot;

# The maximum number of deals in a publish message
# Integer type, default is 8
MaxDealsPerPublishMsg = 8

# Maximum storage provider collateral multiplication factor
# Integer type, default: 2
MaxProviderCollateralMultiplier = 2

# Filter storage deals through external executors, which can be executable programs or scripts
Filter = &quot;&quot;

# Filter retrieval requests through external executors, which can be executable programs or scripts
RetrievalFilter = &quot;&quot;

# Storage location of transferred deal data
# string type, optional, when it is empty, the path of `DROPLET_REPO` is used by default
TransferPath = &quot;&quot;

# Maximum fee for sending deal related messages
# FIL type, default: &quot;0 FIL&quot;
# The format of the FIL type string is integer + &quot; FIL&quot;
MaxPublishDealsFee = &quot;0 FIL&quot;

# The maximum fee spent when sending escrow related message
# FIL type, default: &quot;0 FIL&quot;
MaxMarketBalanceAddFee = &quot;0 FIL&quot;

# Reserved fields, this configuration option is invalid
[Retrieval Pricing]

# The type of strategy to use
# String type, you can choose &quot;default&quot; and &quot;external&quot;, the default is: &quot;default&quot;
# The former uses the built-in default strategy, and the latter uses the strategy customized by the script provided externally
Strategy = &quot;default&quot;

[RetrievalPricing.Default]

# For verified storage deal, whether the price is 0
# boolean, defaults to &quot;true&quot;
# Only taking effects when Strategy = &quot;default&quot; 
VerifiedDealsFreeTransfer = true

[RetrievalPricing.External]
# Path to scripts that define external policies
# String type, Required if external strategy is selected
Path = &quot;&quot;

# This setting is a reserved field and is currently invalid
[AddressConfig]

# Whether to lower the priority of using the woker address to publish messages, if set to true, the woker address will be used to send messages only if there are no other applicable addresses
# Boolean, default is false
DisableWorkerFallback = false

[[AddressConfig. DealPublishControl]]

# Address to publish deal messages
# string type, required
Addr = &quot;&quot;

# The account holding the corresponding address
# string type, required
Account=&quot;&quot;
</code></pre></div><h2 id="droplet-network-configuration"><a href="#droplet-network-configuration" class="header-anchor">#</a> droplet Network Configuration</h2> <p>This part of the configuration determines the interface between the droplet and others</p> <h3 id="api"><a href="#api" class="header-anchor">#</a> [API]</h3> <p>The interface that market provides external services</p> <div class="language- extra-class"><pre class="language-text"><code>[API]
# Market address where the service listens
# String type, required, default: &quot;/ip4/127.0.0.1/tcp/41235&quot;
ListenAddress = &quot;/ip4/127.0.0.1/tcp/41235&quot;

# reserved text
RemoteListenAddress = &quot;&quot;

# token used for encrypted communication
# String type, optional (automatically generated if there is none)
Secret = &quot;878f9c1f88c6f68ee7be17e5f0848c9312897b5d22ff7d89ca386ed0a583da3c&quot;

# reserved text
Timeout = &quot;30s&quot;
</code></pre></div><h3 id="libp2p"><a href="#libp2p" class="header-anchor">#</a> [Libp2p]</h3> <p>The communication address used by the Market when communicating in the P2P network</p> <div class="language- extra-class"><pre class="language-text"><code>[Libp2p]
# Listening network address
# string array, required default: [&quot;/ip4/0.0.0.0/tcp/58418&quot;, &quot;/ip6/::/tcp/0&quot;]
ListenAddresses = [&quot;/ip4/0.0.0.0/tcp/58418&quot;, &quot;/ip6/::/tcp/0&quot;]

# reserved text
AnnounceAddresses = []

# reserved text
NoAnnounceAddresses = []

# token used to generate peerid for p2p connections
# string, optional (automatically generated if not set)
PrivateKey = &quot;08011240ae580daabbe087007d2b4db4e880af10d582215d2272669a94c49c854f36f99c35&quot;
</code></pre></div><h2 id="venus-chain-service-configuration"><a href="#venus-chain-service-configuration" class="header-anchor">#</a> Venus Chain Service Configuration</h2> <p>When accessing Venus Chain Service, the API of the relevant component needs to be configured.</p> <h3 id="node"><a href="#node" class="header-anchor">#</a> [Node]</h3> <p>Venus chain service access configuration</p> <div class="language- extra-class"><pre class="language-text"><code>[Node]
# Chain service
# String type, Mandatory (can also be configured directly through the --node-url flag of the command line)
Url = &quot;/ip4/192.168.200.128/tcp/3453&quot;

# Authentication token of Venus chain service
# String type, Mandatory (can also be configured directly through the --auth-token flag of the command line)
Token = &quot;eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJuYW1lIjoiZm9yY2VuZXQtbnYxNiIsInBlcm0iOiJhZG1pbiIsImV4dCI6IiJ9.PuzEy1TlAjjNiSUu_tbHi2XPUritDLm9Xf5UW3MHRe8&quot;

</code></pre></div><h3 id="messager"><a href="#messager" class="header-anchor">#</a> [Messager]</h3> <p>venus message service access configuration</p> <div class="language- extra-class"><pre class="language-text"><code>[Messager]
# Message service
# String type, optional (can also be configured directly through the --messager-url flag on the command line) It can be left blank when not connecting to the chain service
Url = &quot;/ip4/192.168.200.128/tcp/39812/&quot;

# Authentication token of Venus chain service 
# String type, optional (can also be configured directly through the --auth-token flag of the command line) It can be left blank when not connecting to the chain service
Token = &quot;eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJuYW1lIjoiZm9yY2VuZXQtbnYxNiIsInBlcm0iOiJhZG1pbiIsImV4dCI6IiJ9.PuzEy1TlAjjNiSUu_tbHi2XPUritDLm9Xf5UW3MHRe8&quot;
</code></pre></div><h3 id="signer"><a href="#signer" class="header-anchor">#</a> [Signer]</h3> <p>Accessing Venus signature service, which can be of two types: signature services directly provided by venus-wallet and indirect signature services provided by sophon-gateway</p> <div class="language- extra-class"><pre class="language-text"><code>[Signer]
# Type of signature service
# String type enumeration: &quot;gateway&quot;, &quot;wallet&quot;, &quot;lotusnode&quot;
Type = &quot;gateway&quot;

# Signature service
# String type, Mandatory (can also be configured directly through the --signer-url flag on the command line)
Url = &quot;/ip4/192.168.200.128/tcp/45132/&quot;

# Authentication token of Venus chain service
# String type, Mandatory (can also be configured directly through the --auth-token flag of the command line)
Token = &quot;eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJuYW1lIjoiZm9yY2VuZXQtbnYxNiIsInBlcm0iOiJhZG1pbiIsImV4dCI6IiJ9.PuzEy1TlAjjNiSUu_tbHi2XPUritDLm9Xf5UW3MHRe8&quot;
</code></pre></div><h3 id="authnode"><a href="#authnode" class="header-anchor">#</a> [AuthNode]</h3> <p>Venus authentication service access configuration</p> <div class="language- extra-class"><pre class="language-text"><code>[AuthNode]

# Authentication service
# String type， Optional (can also be configured directly through the --signer-url flag of the command line) It can be left blank when not connecting to the chain service
Url = &quot;http://192.168.200.128:8989&quot;

# Authentication token of Venus chain service
# String type, Optional (can also be configured directly through the --auth-token flag of the command line) It can be left blank when not connecting to the chain service
Token = &quot;eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJuYW1lIjoiZm9yY2VuZXQtbnYxNiIsInBlcm0iOiJhZG1pbiIsImV4dCI6IiJ9.PuzEy1TlAjjNiSUu_tbHi2XPUritDLm9Xf5UW3MHRe8&quot;
</code></pre></div><h2 id="miner-configuration"><a href="#miner-configuration" class="header-anchor">#</a> Miner Configuration</h2> <p>Preset miner information</p> <div class="language- extra-class"><pre class="language-text"><code>[[Miners]]
# Miner's address
# string type, required
Addr=&quot;&quot;

# account name
# string type required
Account = &quot;&quot;

# Basic parameters, see above
</code></pre></div><div class="custom-block tip"><p class="custom-block-title">TIP</p> <p>Basic parameters will use <code>CommonProvider</code> when not configured, which is as follows:</p> <div class="language- extra-class"><pre class="language-text"><code>[[Miners]]
   Addr = &quot;f02472&quot;
   Account = &quot;litao&quot;
</code></pre></div><p>If one of the basic parameters is configured, then all items must be configured. For example:</p> <div class="language- extra-class"><pre class="language-text"><code>[[Miners]]
   Addr = &quot;f02472&quot;
   Account = &quot;litao&quot;
   TransferPath = &quot;/mnt/transfer/2472&quot;
</code></pre></div><p>Such a configuration will cause other configuration items in the basic parameters to have zero values, instead of using the configuration in default <code>CommonProvider</code>.
For example, <code>ConsiderOnlineStorageDeals</code> corresponding to <code>f02472</code> will be equal to <code>false</code>, not <code>true</code> in <code>CommonProvider</code>.</p> <p>At this point, it requires special attention. The correct configuration are as following:</p> <div class="language- extra-class"><pre class="language-text"><code>[[Miners]]
   Addr = &quot;f02472&quot;
   Account = &quot;litao&quot;
   TransferPath = &quot;/mnt/transfer/2472&quot;
   ConsiderOnlineStorageDeals = true
   ConsiderOfflineStorageDeals = true
   ConsiderOnlineRetrievalDeals = true
   ConsiderOfflineRetrievalDeals = true
   ConsiderVerifiedStorageDeals = true
   ConsiderUnverifiedStorageDeals = true
   PieceCidBlocklist = []
   ExpectedSealDuration = &quot;24h0m0s&quot;
   MaxDealStartDelay = &quot;336h0m0s&quot;
   PublishMsgPeriod = &quot;1m0s&quot;
   MaxDealsPerPublishMsg = 8
   MaxProviderCollateralMultiplier = 2
   Filter = &quot;&quot;
   RetrievalFilter = &quot;&quot;
   MaxPublishDealsFee = &quot;0 FIL&quot;
   MaxMarketBalanceAddFee = &quot;0 FIL&quot;
   RetrievalPaymentAddress = &quot;&quot;
   [Retrieval Pricing]
     Strategy = &quot;default&quot;
     [RetrievalPricing. Default]
       VerifiedDealsFreeTransfer = true
     [RetrievalPricing.External]
       Path = &quot;&quot;
</code></pre></div><p>This is not very flexible, and will be considered for optimization in the future.</p></div> <h2 id="database-configuration"><a href="#database-configuration" class="header-anchor">#</a> Database Configuration</h2> <p>The setting of the storage database for the data generated during the operation of the droplet.
BadgerDB and MySQLDB are currently supported, and BadgerDB is used by default.</p> <h3 id="mysql"><a href="#mysql" class="header-anchor">#</a> [Mysql]</h3> <p>MySQLDB configuration</p> <div class="language- extra-class"><pre class="language-text"><code>[Mysql]

# The connection string used to connect to the MySQL database
# String type, If you want to use MySQL database, this is required, otherwise use the default BadgerDB
ConnectionString = &quot;&quot;

# Maximum number of open connections
# Integer type, defaults to 100
MaxOpenConn = 100

# Maximum number of idle connections
# Integer type, defaults to 100
MaxIdleConn = 100

# The maximum lifetime of a reusable connection
# time string, default: &quot;1m&quot;
# The time string is a string composed of numbers and time units. Numbers include integers and decimals. Legal units include &quot;ns&quot;, &quot;us&quot; (or &quot;µs&quot;), &quot;ms&quot;, &quot;s&quot;, &quot;m&quot; , &quot;h&quot;.
ConnMaxLifeTime = &quot;1m&quot;

# Whether to output database-related debugging information
# boolean default, false
Debug = false
</code></pre></div><h2 id="sector-storage-configuration"><a href="#sector-storage-configuration" class="header-anchor">#</a> Sector Storage Configuration</h2> <p>Configure the storage space of imported data from droplet.
Two types of data storage are supported: file system storage or object storage.</p> <h3 id="piecestorage-fs"><a href="#piecestorage-fs" class="header-anchor">#</a> [[PieceStorage. Fs]]</h3> <p>Configure the local file system as sector storage
For sectors with a large amount of data, it is recommended to mount the file system shared with sophon-cluster</p> <div class="language- extra-class"><pre class="language-text"><code>[Piece Storage]
[[PieceStorage. Fs]]

# The name of the storage space, which must be unique among all storage spaces in the market
# string type, required
Name = &quot;local&quot;

# Whether the storage space is writable (readOnly=false means writable)
# boolean, default is false
ReadOnly = false

# The path of the storage space in the local file system
# string type, required
Path = &quot;/piecestorage/&quot;

</code></pre></div><div class="language- extra-class"><pre class="language-text"><code>[Piece Storage]
[[PieceStorage.S3]]
# The name of the storage space, which must be unique among all storage spaces in the market
# string type, required
Name = &quot;s3&quot;

# Whether the storage space is writable (readOnly=false means writable)
# boolean, default is false
ReadOnly = true

# Object storage service
# string type, required
# Support individual EndPoint (&quot;oss-cn-shanghai.aliyuncs.com&quot;) or complete EndPoint Url (&quot;http://oss-cn-shanghai.aliyuncs.com&quot;)
EndPoint = &quot;oss-cn-shanghai.aliyuncs.com&quot;

# Bucket name of the object storage service
# string type, required
Bucket = &quot;droplet&quot;

# Specify the subdirectory in the Bucket
# string type, optional
SubDir = &quot;dir1/dir2&quot;

# Access the parameters of the object storage service
# String type, AccessKey and SecretKey are mandatory, and Token is optional
AccessKey = &quot;LTAI5t6HiFgsqN6eVJ...&quot;
SecretKey = &quot;AlFNH9NakUsVjVRxMHaaYP7p...&quot;
Token = &quot;&quot;

</code></pre></div><h2 id="log-settings"><a href="#log-settings" class="header-anchor">#</a> Log Settings</h2> <p>Configure the location where the log is stored during the use of the market.</p> <div class="language- extra-class"><pre class="language-text"><code>[Journal]

# The location of the log storage
# String type, The default is: &quot;journal&quot; (that is, the journal folder under the `DROPLET_REPO` folder)
Path = &quot;journal&quot;
</code></pre></div><h2 id="dag-storage-settings"><a href="#dag-storage-settings" class="header-anchor">#</a> DAG Storage Settings</h2> <p>Configuration of the DAG datastore.</p> <div class="language- extra-class"><pre class="language-text"><code># Refer to github.com/filecoin-project/dagstore/dagstore.go
[DAGStore]

# The root directory of the DAG data store
# String type, Default: &quot;&lt;DROPLET_REPO_PATH&gt;/dagstore&quot;
RootDir = &quot;/root/.droplet/dagstore&quot;

# The maximum number of index jobs that can be performed at the same time
# Integer type, defaults to 5, 0 means unlimited
MaxConcurrentIndex = 5

# The maximum number of unsealed deals that can be fetched at the same time
# Integer type, defaults to 0, 0 means unlimited
MaxConcurrentReadyFetches = 0

# The maximum number of storage APIs that can be called simultaneously
# Integer type, defaults to 100
MaxConcurrencyStorageCalls = 100

# DAG data garbage collection interval
# time string, default: &quot;1m0s&quot;
# The time string is a string composed of numbers and time units. Numbers include integers and decimals. Legal units include &quot;ns&quot;, &quot;us&quot; (or &quot;µs&quot;), &quot;ms&quot;, &quot;s&quot;, &quot;m&quot; , &quot;h&quot;.
GCInterval = &quot;1m0s&quot;

# Storage path for temporary files
# string type, optional, if not set, the 'transients' folder in the RooDir directory will be used
Transient = &quot;&quot;

# Path to store sector index data
# String type, optional, if not set, the 'index' folder under the RooDir directory will be used
Index = &quot;&quot;

# Do not use local cache, read data source directly
# Boolean type, defaults to false
Use Transient = false
</code></pre></div><h2 id="data-retrieval"><a href="#data-retrieval" class="header-anchor">#</a> Data Retrieval</h2> <p>Relevant configuration when obtaining the sector data stored in the deal</p> <h3 id="retrievalpaymentaddress"><a href="#retrievalpaymentaddress" class="header-anchor">#</a> [RetrievalPaymentAddress]</h3> <p>The receiving address used for retrieval requests</p> <div class="language- extra-class"><pre class="language-text"><code>RetrievalPaymentAddress = &quot;&quot;
</code></pre></div><h2 id="metric-configuration"><a href="#metric-configuration" class="header-anchor">#</a> Metric Configuration</h2> <p>Configure Metric-related parameters.</p> <div class="language-toml extra-class"><pre class="language-toml"><code><span class="token punctuation">[</span><span class="token table class-name">Metrics</span><span class="token punctuation">]</span>

<span class="token comment"># Whether to enable Metric</span>
<span class="token comment"># boolean, default is false</span>
<span class="token key property">Enabled</span> <span class="token punctuation">=</span> <span class="token boolean">false</span>

<span class="token comment"># Metric export settings</span>
<span class="token punctuation">[</span><span class="token table class-name">Metrics. Exporter</span><span class="token punctuation">]</span>

<span class="token comment"># The type of Metric export</span>
<span class="token comment"># String type, Optional values are &quot;prometheus&quot; and &quot;graphite&quot; Default is &quot;prometheus&quot;</span>
<span class="token key property">Type</span> <span class="token punctuation">=</span> <span class="token string">&quot;prometheus&quot;</span>

<span class="token comment"># Prometheus export settings</span>
<span class="token punctuation">[</span><span class="token table class-name">Metrics.Exporter.Prometheus</span><span class="token punctuation">]</span>

<span class="token comment"># type of register</span>
<span class="token comment"># String type, Optional, values are &quot;define&quot; and &quot;default&quot;; Default is &quot;define&quot;</span>
<span class="token comment"># define: use new registry; default: use default registry provided by Prometheus</span>
<span class="token key property">RegistryType</span> <span class="token punctuation">=</span> <span class="token string">&quot;define&quot;</span>

<span class="token comment"># Namespaces</span>
<span class="token comment"># string type, defaults to &quot;&quot;</span>
<span class="token key property">Namespace</span> <span class="token punctuation">=</span> <span class="token string">&quot;&quot;</span>

<span class="token comment"># listen address</span>
<span class="token comment"># String type, Default is &quot;/ip4/0.0.0.0/tcp/4568&quot;</span>
<span class="token key property">EndPoint</span> <span class="token punctuation">=</span> <span class="token string">&quot;/ip4/0.0.0.0/tcp/4568&quot;</span>

<span class="token comment"># The access path of the Metrics indicator</span>
<span class="token comment"># string type, defaults to &quot;/debug/metrics&quot;</span>
<span class="token key property">Path</span> <span class="token punctuation">=</span> <span class="token string">&quot;/debug/metrics&quot;</span>

<span class="token comment"># Metric index aggregation cycle</span>
<span class="token comment"># time string, defaults to &quot;10s&quot;</span>
<span class="token key property">ReportingPeriod</span> <span class="token punctuation">=</span> <span class="token string">&quot;10s&quot;</span>


<span class="token comment"># Graphite export settings</span>
<span class="token punctuation">[</span><span class="token table class-name">Metrics. Exporter. Graphite</span><span class="token punctuation">]</span>

<span class="token comment"># Namespaces</span>
<span class="token comment"># string type, defaults to &quot;&quot;</span>
<span class="token key property">Namespace</span> <span class="token punctuation">=</span> <span class="token string">&quot;&quot;</span>

<span class="token comment"># listen address</span>
<span class="token comment"># String type, Default is &quot;127.0.0.1&quot;</span>
<span class="token key property">Host</span> <span class="token punctuation">=</span> <span class="token string">&quot;127.0.0.1&quot;</span>

<span class="token comment"># Listen port</span>
<span class="token comment"># integer type, default is 4568</span>
<span class="token key property">Port</span> <span class="token punctuation">=</span> <span class="token number">4568</span>

<span class="token comment"># Metric index aggregation cycle</span>
<span class="token comment"># time string, defaults to &quot;10s&quot;</span>
<span class="token key property">ReportingPeriod</span> <span class="token punctuation">=</span> <span class="token string">&quot;10s&quot;</span>
</code></pre></div></div> <footer class="page-edit"><div class="edit-link"><a href="https://github.com/ipfs-force-community/damocles-docs/edit/main/docs/operation/market-config.md" target="_blank" rel="noopener noreferrer">Edit this page</a> <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></div> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/operation/start.html" class="prev">
        Getting started
      </a></span> <span class="next"><a href="/operation/client-config.html">
        Client config
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"><!----></div></div>
    <script src="/assets/js/app.e4dd30fd.js" defer></script><script src="/assets/js/2.d646fae5.js" defer></script><script src="/assets/js/17.b592e31e.js" defer></script>
  </body>
</html>
